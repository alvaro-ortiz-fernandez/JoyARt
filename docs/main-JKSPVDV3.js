var XS=Object.defineProperty,eA=Object.defineProperties;var tA=Object.getOwnPropertyDescriptors;var sE=Object.getOwnPropertySymbols;var nA=Object.prototype.hasOwnProperty,rA=Object.prototype.propertyIsEnumerable;var aE=(t,e,n)=>e in t?XS(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,j=(t,e)=>{for(var n in e||={})nA.call(e,n)&&aE(t,n,e[n]);if(sE)for(var n of sE(e))rA.call(e,n)&&aE(t,n,e[n]);return t},De=(t,e)=>eA(t,tA(e));var yt=null,Yc=!1,uh=1,iA=null,Gt=Symbol("SIGNAL");function Y(t){let e=yt;return yt=t,e}function Jc(){return yt}var Zc={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function Xc(t){if(Yc)throw new Error("");if(yt===null)return;yt.consumerOnSignalRead(t);let e=yt.producersTail;if(e!==void 0&&e.producer===t)return;let n,r=yt.recomputing;if(r&&(n=e!==void 0?e.nextProducer:yt.producers,n!==void 0&&n.producer===t)){yt.producersTail=n,n.lastReadVersion=t.version;return}let i=t.consumersTail;if(i!==void 0&&i.consumer===yt&&(!r||sA(i,yt)))return;let o=Zi(yt),s={producer:t,consumer:yt,nextProducer:n,prevConsumer:i,lastReadVersion:t.version,nextConsumer:void 0};yt.producersTail=s,e!==void 0?e.nextProducer=s:yt.producers=s,o&&fE(t,s)}function cE(){uh++}function uE(t){if(!(Zi(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===uh)){if(!t.producerMustRecompute(t)&&!tu(t)){ch(t);return}t.producerRecomputeValue(t),ch(t)}}function lh(t){if(t.consumers===void 0)return;let e=Yc;Yc=!0;try{for(let n=t.consumers;n!==void 0;n=n.nextConsumer){let r=n.consumer;r.dirty||oA(r)}}finally{Yc=e}}function dh(){return yt?.consumerAllowSignalWrites!==!1}function oA(t){t.dirty=!0,lh(t),t.consumerMarkedDirty?.(t)}function ch(t){t.dirty=!1,t.lastCleanEpoch=uh}function eu(t){return t&&lE(t),Y(t)}function lE(t){t.producersTail=void 0,t.recomputing=!0}function fh(t,e){Y(e),t&&dE(t)}function dE(t){t.recomputing=!1;let e=t.producersTail,n=e!==void 0?e.nextProducer:t.producers;if(n!==void 0){if(Zi(t))do n=hh(n);while(n!==void 0);e!==void 0?e.nextProducer=void 0:t.producers=void 0}}function tu(t){for(let e=t.producers;e!==void 0;e=e.nextProducer){let n=e.producer,r=e.lastReadVersion;if(r!==n.version||(uE(n),r!==n.version))return!0}return!1}function Hs(t){if(Zi(t)){let e=t.producers;for(;e!==void 0;)e=hh(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function fE(t,e){let n=t.consumersTail,r=Zi(t);if(n!==void 0?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let i=t.producers;i!==void 0;i=i.nextProducer)fE(i.producer,i)}function hh(t){let e=t.producer,n=t.nextProducer,r=t.nextConsumer,i=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,r!==void 0?r.prevConsumer=i:e.consumersTail=i,i!==void 0)i.nextConsumer=r;else if(e.consumers=r,!Zi(e)){let o=e.producers;for(;o!==void 0;)o=hh(o)}return n}function Zi(t){return t.consumerIsAlwaysLive||t.consumers!==void 0}function hE(t){iA?.(t)}function sA(t,e){let n=e.producersTail;if(n!==void 0){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(r!==void 0)}return!1}function pE(t,e){return Object.is(t,e)}function aA(){throw new Error}var gE=aA;function mE(t){gE(t)}function ph(t){gE=t}var cA=null;function gh(t,e){let n=Object.create(nu);n.value=t,e!==void 0&&(n.equal=e);let r=()=>yE(n);return r[Gt]=n,hE(n),[r,s=>zs(n,s),s=>vE(n,s)]}function yE(t){return Xc(t),t.value}function zs(t,e){dh()||mE(t),t.equal(t.value,e)||(t.value=e,uA(t))}function vE(t,e){dh()||mE(t),zs(t,e(t.value))}var nu=De(j({},Zc),{equal:pE,value:void 0,kind:"signal"});function uA(t){t.version++,cE(),lh(t),cA?.(t)}function mh(t){let e=Y(null);try{return t()}finally{Y(e)}}function te(t){return typeof t=="function"}function Xi(t){let n=t(r=>{Error.call(r),r.stack=new Error().stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var ru=Xi(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:
${n.map((r,i)=>`${i+1}) ${r.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=n});function qs(t,e){if(t){let n=t.indexOf(e);0<=n&&t.splice(n,1)}}var ct=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(let o of n)o.remove(this);else n.remove(this);let{initialTeardown:r}=this;if(te(r))try{r()}catch(o){e=o instanceof ru?o.errors:[o]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let o of i)try{_E(o)}catch(s){e=e??[],s instanceof ru?e=[...e,...s.errors]:e.push(s)}}if(e)throw new ru(e)}}add(e){var n;if(e&&e!==this)if(this.closed)_E(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}}_hasParent(e){let{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){let{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){let{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&qs(n,e)}remove(e){let{_finalizers:n}=this;n&&qs(n,e),e instanceof t&&e._removeParent(this)}};ct.EMPTY=(()=>{let t=new ct;return t.closed=!0,t})();var yh=ct.EMPTY;function iu(t){return t instanceof ct||t&&"closed"in t&&te(t.remove)&&te(t.add)&&te(t.unsubscribe)}function _E(t){te(t)?t():t.unsubscribe()}var rn={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var eo={setTimeout(t,e,...n){let{delegate:r}=eo;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){let{delegate:e}=eo;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function ou(t){eo.setTimeout(()=>{let{onUnhandledError:e}=rn;if(e)e(t);else throw t})}function Gs(){}var EE=vh("C",void 0,void 0);function wE(t){return vh("E",void 0,t)}function IE(t){return vh("N",t,void 0)}function vh(t,e,n){return{kind:t,value:e,error:n}}var Wr=null;function to(t){if(rn.useDeprecatedSynchronousErrorHandling){let e=!Wr;if(e&&(Wr={errorThrown:!1,error:null}),t(),e){let{errorThrown:n,error:r}=Wr;if(Wr=null,n)throw r}}else t()}function DE(t){rn.useDeprecatedSynchronousErrorHandling&&Wr&&(Wr.errorThrown=!0,Wr.error=t)}var Kr=class extends ct{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,iu(e)&&e.add(this)):this.destination=fA}static create(e,n,r){return new no(e,n,r)}next(e){this.isStopped?Eh(IE(e),this):this._next(e)}error(e){this.isStopped?Eh(wE(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?Eh(EE,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},lA=Function.prototype.bind;function _h(t,e){return lA.call(t,e)}var wh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){su(r)}}error(e){let{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){su(r)}else su(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){su(n)}}},no=class extends Kr{constructor(e,n,r){super();let i;if(te(e)||!e)i={next:e??void 0,error:n??void 0,complete:r??void 0};else{let o;this&&rn.useDeprecatedNextContext?(o=Object.create(e),o.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&_h(e.next,o),error:e.error&&_h(e.error,o),complete:e.complete&&_h(e.complete,o)}):i=e}this.destination=new wh(i)}};function su(t){rn.useDeprecatedSynchronousErrorHandling?DE(t):ou(t)}function dA(t){throw t}function Eh(t,e){let{onStoppedNotification:n}=rn;n&&eo.setTimeout(()=>n(t,e))}var fA={closed:!0,next:Gs,error:dA,complete:Gs};var ro=typeof Symbol=="function"&&Symbol.observable||"@@observable";function on(t){return t}function Ih(...t){return Dh(t)}function Dh(t){return t.length===0?on:t.length===1?t[0]:function(n){return t.reduce((r,i)=>i(r),n)}}var le=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){let r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,i){let o=pA(n)?n:new no(n,r,i);return to(()=>{let{operator:s,source:c}=this;o.add(s?s.call(o,c):c?this._subscribe(o):this._trySubscribe(o))}),o}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return r=bE(r),new r((i,o)=>{let s=new no({next:c=>{try{n(c)}catch(u){o(u),s.unsubscribe()}},error:o,complete:i});this.subscribe(s)})}_subscribe(n){var r;return(r=this.source)===null||r===void 0?void 0:r.subscribe(n)}[ro](){return this}pipe(...n){return Dh(n)(this)}toPromise(n){return n=bE(n),new n((r,i)=>{let o;this.subscribe(s=>o=s,s=>i(s),()=>r(o))})}}return t.create=e=>new t(e),t})();function bE(t){var e;return(e=t??rn.Promise)!==null&&e!==void 0?e:Promise}function hA(t){return t&&te(t.next)&&te(t.error)&&te(t.complete)}function pA(t){return t&&t instanceof Kr||hA(t)&&iu(t)}function gA(t){return te(t?.lift)}function _e(t){return e=>{if(gA(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ee(t,e,n,r,i){return new bh(t,e,n,r,i)}var bh=class extends Kr{constructor(e,n,r,i,o,s){super(e),this.onFinalize=o,this.shouldUnsubscribe=s,this._next=n?function(c){try{n(c)}catch(u){e.error(u)}}:super._next,this._error=i?function(c){try{i(c)}catch(u){e.error(u)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:n}=this;super.unsubscribe(),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var TE=Xi(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ut=(()=>{class t extends le{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){let r=new au(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new TE}next(n){to(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let r of this.currentObservers)r.next(n)}})}error(n){to(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;let{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){to(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){let{hasError:r,isStopped:i,observers:o}=this;return r||i?yh:(this.currentObservers=null,o.push(n),new ct(()=>{this.currentObservers=null,qs(o,n)}))}_checkFinalizedStatuses(n){let{hasError:r,thrownError:i,isStopped:o}=this;r?n.error(i):o&&n.complete()}asObservable(){let n=new le;return n.source=this,n}}return t.create=(e,n)=>new au(e,n),t})(),au=class extends ut{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,e)}error(e){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,e)}complete(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)}_subscribe(e){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&r!==void 0?r:yh}};var Qe=class extends ut{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){let{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}};var Nt=new le(t=>t.complete());function CE(t){return t&&te(t.schedule)}function SE(t){return t[t.length-1]}function cu(t){return te(SE(t))?t.pop():void 0}function vr(t){return CE(SE(t))?t.pop():void 0}function RE(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function c(f){try{l(r.next(f))}catch(p){s(p)}}function u(f){try{l(r.throw(f))}catch(p){s(p)}}function l(f){f.done?o(f.value):i(f.value).then(c,u)}l((r=r.apply(t,e||[])).next())})}function AE(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Qr(t){return this instanceof Qr?(this.v=t,this):new Qr(t)}function xE(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(y){return function(A){return Promise.resolve(A).then(y,p)}}function c(y,A){r[y]&&(i[y]=function(x){return new Promise(function(S,k){o.push([y,x,S,k])>1||u(y,x)})},A&&(i[y]=A(i[y])))}function u(y,A){try{l(r[y](A))}catch(x){m(o[0][3],x)}}function l(y){y.value instanceof Qr?Promise.resolve(y.value.v).then(f,p):m(o[0][2],y)}function f(y){u("next",y)}function p(y){u("throw",y)}function m(y,A){y(A),o.shift(),o.length&&u(o[0][0],o[0][1])}}function ME(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof AE=="function"?AE(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(o){n[o]=t[o]&&function(s){return new Promise(function(c,u){s=t[o](s),i(c,u,s.done,s.value)})}}function i(o,s,c,u){Promise.resolve(u).then(function(l){o({value:l,done:c})},s)}}var uu=t=>t&&typeof t.length=="number"&&typeof t!="function";function lu(t){return te(t?.then)}function du(t){return te(t[ro])}function fu(t){return Symbol.asyncIterator&&te(t?.[Symbol.asyncIterator])}function hu(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function mA(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var pu=mA();function gu(t){return te(t?.[pu])}function mu(t){return xE(this,arguments,function*(){let n=t.getReader();try{for(;;){let{value:r,done:i}=yield Qr(n.read());if(i)return yield Qr(void 0);yield yield Qr(r)}}finally{n.releaseLock()}})}function yu(t){return te(t?.getReader)}function Be(t){if(t instanceof le)return t;if(t!=null){if(du(t))return yA(t);if(uu(t))return vA(t);if(lu(t))return _A(t);if(fu(t))return NE(t);if(gu(t))return EA(t);if(yu(t))return wA(t)}throw hu(t)}function yA(t){return new le(e=>{let n=t[ro]();if(te(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function vA(t){return new le(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}function _A(t){return new le(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,ou)})}function EA(t){return new le(e=>{for(let n of t)if(e.next(n),e.closed)return;e.complete()})}function NE(t){return new le(e=>{IA(t,e).catch(n=>e.error(n))})}function wA(t){return NE(mu(t))}function IA(t,e){var n,r,i,o;return RE(this,void 0,void 0,function*(){try{for(n=ME(t);r=yield n.next(),!r.done;){let s=r.value;if(e.next(s),e.closed)return}}catch(s){i={error:s}}finally{try{r&&!r.done&&(o=n.return)&&(yield o.call(n))}finally{if(i)throw i.error}}e.complete()})}function Pt(t,e,n,r=0,i=!1){let o=e.schedule(function(){n(),i?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(o),!i)return o}function vu(t,e=0){return _e((n,r)=>{n.subscribe(Ee(r,i=>Pt(r,t,()=>r.next(i),e),()=>Pt(r,t,()=>r.complete(),e),i=>Pt(r,t,()=>r.error(i),e)))})}function _u(t,e=0){return _e((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function PE(t,e){return Be(t).pipe(_u(e),vu(e))}function OE(t,e){return Be(t).pipe(_u(e),vu(e))}function kE(t,e){return new le(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}function FE(t,e){return new le(n=>{let r;return Pt(n,e,()=>{r=t[pu](),Pt(n,e,()=>{let i,o;try{({value:i,done:o}=r.next())}catch(s){n.error(s);return}o?n.complete():n.next(i)},0,!0)}),()=>te(r?.return)&&r.return()})}function Eu(t,e){if(!t)throw new Error("Iterable cannot be null");return new le(n=>{Pt(n,e,()=>{let r=t[Symbol.asyncIterator]();Pt(n,e,()=>{r.next().then(i=>{i.done?n.complete():n.next(i.value)})},0,!0)})})}function LE(t,e){return Eu(mu(t),e)}function VE(t,e){if(t!=null){if(du(t))return PE(t,e);if(uu(t))return kE(t,e);if(lu(t))return OE(t,e);if(fu(t))return Eu(t,e);if(gu(t))return FE(t,e);if(yu(t))return LE(t,e)}throw hu(t)}function Oe(t,e){return e?VE(t,e):Be(t)}function ae(...t){let e=vr(t);return Oe(t,e)}function Th(t,e){let n=te(t)?t:()=>t,r=i=>i.error(n());return new le(e?i=>e.schedule(r,0,i):r)}function wu(t){return!!t&&(t instanceof le||te(t.lift)&&te(t.subscribe))}var Yr=Xi(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function fe(t,e){return _e((n,r)=>{let i=0;n.subscribe(Ee(r,o=>{r.next(t.call(e,o,i++))}))})}var{isArray:DA}=Array;function bA(t,e){return DA(e)?t(...e):t(e)}function Iu(t){return fe(e=>bA(t,e))}var{isArray:TA}=Array,{getPrototypeOf:CA,prototype:SA,keys:AA}=Object;function Du(t){if(t.length===1){let e=t[0];if(TA(e))return{args:e,keys:null};if(RA(e)){let n=AA(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}function RA(t){return t&&typeof t=="object"&&CA(t)===SA}function bu(t,e){return t.reduce((n,r,i)=>(n[r]=e[i],n),{})}function Ws(...t){let e=vr(t),n=cu(t),{args:r,keys:i}=Du(t);if(r.length===0)return Oe([],e);let o=new le(xA(r,e,i?s=>bu(i,s):on));return n?o.pipe(Iu(n)):o}function xA(t,e,n=on){return r=>{jE(e,()=>{let{length:i}=t,o=new Array(i),s=i,c=i;for(let u=0;u<i;u++)jE(e,()=>{let l=Oe(t[u],e),f=!1;l.subscribe(Ee(r,p=>{o[u]=p,f||(f=!0,c--),c||r.next(n(o.slice()))},()=>{--s||r.complete()}))},r)},r)}}function jE(t,e,n){t?Pt(n,t,e):e()}function BE(t,e,n,r,i,o,s,c){let u=[],l=0,f=0,p=!1,m=()=>{p&&!u.length&&!l&&e.complete()},y=x=>l<r?A(x):u.push(x),A=x=>{o&&e.next(x),l++;let S=!1;Be(n(x,f++)).subscribe(Ee(e,k=>{i?.(k),o?y(k):e.next(k)},()=>{S=!0},void 0,()=>{if(S)try{for(l--;u.length&&l<r;){let k=u.shift();s?Pt(e,s,()=>A(k)):A(k)}m()}catch(k){e.error(k)}}))};return t.subscribe(Ee(e,y,()=>{p=!0,m()})),()=>{c?.()}}function tt(t,e,n=1/0){return te(e)?tt((r,i)=>fe((o,s)=>e(r,o,i,s))(Be(t(r,i))),n):(typeof e=="number"&&(n=e),_e((r,i)=>BE(r,i,t,n)))}function UE(t=1/0){return tt(on,t)}function $E(){return UE(1)}function io(...t){return $E()(Oe(t,vr(t)))}function Ks(t){return new le(e=>{Be(t()).subscribe(e)})}function Ch(...t){let e=cu(t),{args:n,keys:r}=Du(t),i=new le(o=>{let{length:s}=n;if(!s){o.complete();return}let c=new Array(s),u=s,l=s;for(let f=0;f<s;f++){let p=!1;Be(n[f]).subscribe(Ee(o,m=>{p||(p=!0,l--),c[f]=m},()=>u--,void 0,()=>{(!u||!p)&&(l||o.next(r?bu(r,c):c),o.complete())}))}});return e?i.pipe(Iu(e)):i}function Wt(t,e){return _e((n,r)=>{let i=0;n.subscribe(Ee(r,o=>t.call(e,o,i++)&&r.next(o)))})}function Qs(t){return _e((e,n)=>{let r=null,i=!1,o;r=e.subscribe(Ee(n,void 0,void 0,s=>{o=Be(t(s,Qs(t)(e))),r?(r.unsubscribe(),r=null,o.subscribe(n)):i=!0})),i&&(r.unsubscribe(),r=null,o.subscribe(n))})}function oo(t,e){return te(e)?tt(t,e,1):tt(t,1)}function Sh(t){return _e((e,n)=>{let r=!1;e.subscribe(Ee(n,i=>{r=!0,n.next(i)},()=>{r||n.next(t),n.complete()}))})}function Un(t){return t<=0?()=>Nt:_e((e,n)=>{let r=0;e.subscribe(Ee(n,i=>{++r<=t&&(n.next(i),t<=r&&n.complete())}))})}function HE(t=MA){return _e((e,n)=>{let r=!1;e.subscribe(Ee(n,i=>{r=!0,n.next(i)},()=>r?n.complete():n.error(t())))})}function MA(){return new Yr}function sn(t){return _e((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}function $n(t,e){let n=arguments.length>=2;return r=>r.pipe(t?Wt((i,o)=>t(i,o,r)):on,Un(1),n?Sh(e):HE(()=>new Yr))}function Tu(t){return t<=0?()=>Nt:_e((e,n)=>{let r=[];e.subscribe(Ee(n,i=>{r.push(i),t<r.length&&r.shift()},()=>{for(let i of r)n.next(i);n.complete()},void 0,()=>{r=null}))})}function Ah(...t){let e=vr(t);return _e((n,r)=>{(e?io(t,n,e):io(t,n)).subscribe(r)})}function Kt(t,e){return _e((n,r)=>{let i=null,o=0,s=!1,c=()=>s&&!i&&r.complete();n.subscribe(Ee(r,u=>{i?.unsubscribe();let l=0,f=o++;Be(t(u,f)).subscribe(i=Ee(r,p=>r.next(e?e(u,p,f,l++):p),()=>{i=null,c()}))},()=>{s=!0,c()}))})}function Ys(t){return _e((e,n)=>{Be(t).subscribe(Ee(n,()=>n.complete(),Gs)),!n.closed&&e.subscribe(n)})}function Dt(t,e,n){let r=te(t)||e||n?{next:t,error:e,complete:n}:t;return r?_e((i,o)=>{var s;(s=r.subscribe)===null||s===void 0||s.call(r);let c=!0;i.subscribe(Ee(o,u=>{var l;(l=r.next)===null||l===void 0||l.call(r,u),o.next(u)},()=>{var u;c=!1,(u=r.complete)===null||u===void 0||u.call(r),o.complete()},u=>{var l;c=!1,(l=r.error)===null||l===void 0||l.call(r,u),o.error(u)},()=>{var u,l;c&&((u=r.unsubscribe)===null||u===void 0||u.call(r)),(l=r.finalize)===null||l===void 0||l.call(r)}))}):on}var Rh;function Cu(){return Rh}function In(t){let e=Rh;return Rh=t,e}var zE=Symbol("NotFound");function so(t){return t===zE||t?.name==="\u0275NotFound"}var Nu="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss",$=class extends Error{code;constructor(e,n){super(ti(e,n)),this.code=e}};function kA(t){return`NG0${Math.abs(t)}`}function ti(t,e){return`${kA(t)}${e?": "+e:""}`}var na=globalThis;function we(t){for(let e in t)if(t[e]===we)return e;throw Error("")}function zn(t){if(typeof t=="string")return t;if(Array.isArray(t))return`[${t.map(zn).join(", ")}]`;if(t==null)return""+t;let e=t.overriddenName||t.name;if(e)return`${e}`;let n=t.toString();if(n==null)return""+n;let r=n.indexOf(`
`);return r>=0?n.slice(0,r):n}function Pu(t,e){return t?e?`${t} ${e}`:t:e||""}var FA=we({__forward_ref__:we});function Ou(t){return t.__forward_ref__=Ou,t.toString=function(){return zn(this())},t}function Ot(t){return zh(t)?t():t}function zh(t){return typeof t=="function"&&t.hasOwnProperty(FA)&&t.__forward_ref__===Ou}function H(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function ra(t){return LA(t,ku)}function qh(t){return ra(t)!==null}function LA(t,e){return t.hasOwnProperty(e)&&t[e]||null}function VA(t){let e=t?.[ku]??null;return e||null}function Mh(t){return t&&t.hasOwnProperty(Au)?t[Au]:null}var ku=we({\u0275prov:we}),Au=we({\u0275inj:we}),z=class{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,typeof n=="number"?this.__NG_ELEMENT_ID__=n:n!==void 0&&(this.\u0275prov=H({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Gh(t){return t&&!!t.\u0275providers}var Wh=we({\u0275cmp:we}),Kh=we({\u0275dir:we}),Qh=we({\u0275pipe:we}),Yh=we({\u0275mod:we}),Zs=we({\u0275fac:we}),ni=we({__NG_ELEMENT_ID__:we}),qE=we({__NG_ENV_ID__:we});function ri(t){return typeof t=="string"?t:t==null?"":String(t)}function QE(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():ri(t)}var YE=we({ngErrorCode:we}),jA=we({ngErrorMessage:we}),BA=we({ngTokenPath:we});function Jh(t,e){return JE("",-200,e)}function Fu(t,e){throw new $(-201,!1)}function JE(t,e,n){let r=new $(e,t);return r[YE]=e,r[jA]=t,n&&(r[BA]=n),r}function UA(t){return t[YE]}var Nh;function ZE(){return Nh}function bt(t){let e=Nh;return Nh=t,e}function Zh(t,e,n){let r=ra(t);if(r&&r.providedIn=="root")return r.value===void 0?r.value=r.factory():r.value;if(n&8)return null;if(e!==void 0)return e;Fu(t,"Injector")}var $A={},Jr=$A,HA="__NG_DI_FLAG__",Ph=class{injector;constructor(e){this.injector=e}retrieve(e,n){let r=Zr(n)||0;try{return this.injector.get(e,r&8?null:Jr,r)}catch(i){if(so(i))return i;throw i}}};function zA(t,e=0){let n=Cu();if(n===void 0)throw new $(-203,!1);if(n===null)return Zh(t,void 0,e);{let r=qA(e),i=n.retrieve(t,r);if(so(i)){if(r.optional)return null;throw i}return i}}function K(t,e=0){return(ZE()||zA)(Ot(t),e)}function P(t,e){return K(t,Zr(e))}function Zr(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function qA(t){return{optional:!!(t&8),host:!!(t&1),self:!!(t&2),skipSelf:!!(t&4)}}function Oh(t){let e=[];for(let n=0;n<t.length;n++){let r=Ot(t[n]);if(Array.isArray(r)){if(r.length===0)throw new $(900,!1);let i,o=0;for(let s=0;s<r.length;s++){let c=r[s],u=GA(c);typeof u=="number"?u===-1?i=c.token:o|=u:i=c}e.push(K(i,o))}else e.push(K(r))}return e}function GA(t){return t[HA]}function _r(t,e){let n=t.hasOwnProperty(Zs);return n?t[Zs]:null}function Lu(t,e){t.forEach(n=>Array.isArray(n)?Lu(n,e):e(n))}function Xh(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function ia(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function XE(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(i===1)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;){let o=i-2;t[i]=t[o],i--}t[e]=n,t[e+1]=r}}function Vu(t,e,n){let r=co(t,e);return r>=0?t[r|1]=n:(r=~r,XE(t,r,e,n)),r}function ju(t,e){let n=co(t,e);if(n>=0)return t[n|1]}function co(t,e){return WA(t,e,1)}function WA(t,e,n){let r=0,i=t.length>>n;for(;i!==r;){let o=r+(i-r>>1),s=t[o<<n];if(e===s)return o<<n;s>e?i=o:r=o+1}return~(i<<n)}var ii={},Dn=[],oi=new z(""),ep=new z("",-1),tp=new z(""),Xs=class{get(e,n=Jr){if(n===Jr){let i=JE("",-201);throw i.name="\u0275NotFound",i}return n}};function np(t){return t[Yh]||null}function wr(t){return t[Wh]||null}function rp(t){return t[Kh]||null}function ew(t){return t[Qh]||null}function Gn(t){return{\u0275providers:t}}function tw(t){return Gn([{provide:oi,multi:!0,useValue:t}])}function nw(...t){return{\u0275providers:ip(!0,t),\u0275fromNgModule:!0}}function ip(t,...e){let n=[],r=new Set,i,o=s=>{n.push(s)};return Lu(e,s=>{let c=s;Ru(c,o,[],r)&&(i||=[],i.push(c))}),i!==void 0&&rw(i,o),n}function rw(t,e){for(let n=0;n<t.length;n++){let{ngModule:r,providers:i}=t[n];op(i,o=>{e(o,r)})}}function Ru(t,e,n,r){if(t=Ot(t),!t)return!1;let i=null,o=Mh(t),s=!o&&wr(t);if(!o&&!s){let u=t.ngModule;if(o=Mh(u),o)i=u;else return!1}else{if(s&&!s.standalone)return!1;i=t}let c=r.has(i);if(s){if(c)return!1;if(r.add(i),s.dependencies){let u=typeof s.dependencies=="function"?s.dependencies():s.dependencies;for(let l of u)Ru(l,e,n,r)}}else if(o){if(o.imports!=null&&!c){r.add(i);let l;try{Lu(o.imports,f=>{Ru(f,e,n,r)&&(l||=[],l.push(f))})}finally{}l!==void 0&&rw(l,e)}if(!c){let l=_r(i)||(()=>new i);e({provide:i,useFactory:l,deps:Dn},i),e({provide:tp,useValue:i,multi:!0},i),e({provide:oi,useValue:()=>K(i),multi:!0},i)}let u=o.providers;if(u!=null&&!c){let l=t;op(u,f=>{e(f,l)})}}else return!1;return i!==t&&t.providers!==void 0}function op(t,e){for(let n of t)Gh(n)&&(n=n.\u0275providers),Array.isArray(n)?op(n,e):e(n)}var KA=we({provide:String,useValue:we});function iw(t){return t!==null&&typeof t=="object"&&KA in t}function QA(t){return!!(t&&t.useExisting)}function YA(t){return!!(t&&t.useFactory)}function xu(t){return typeof t=="function"}var oa=new z(""),Su={},GE={},xh;function sa(){return xh===void 0&&(xh=new Xs),xh}var Ue=class{},Xr=class extends Ue{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,i){super(),this.parent=n,this.source=r,this.scopes=i,Fh(e,s=>this.processProvider(s)),this.records.set(ep,ao(void 0,this)),i.has("environment")&&this.records.set(Ue,ao(void 0,this));let o=this.records.get(oa);o!=null&&typeof o.value=="string"&&this.scopes.add(o.value),this.injectorDefTypes=new Set(this.get(tp,Dn,{self:!0}))}retrieve(e,n){let r=Zr(n)||0;try{return this.get(e,Jr,r)}catch(i){if(so(i))return i;throw i}}destroy(){Js(this),this._destroyed=!0;let e=Y(null);try{for(let r of this._ngOnDestroyHooks)r.ngOnDestroy();let n=this._onDestroyHooks;this._onDestroyHooks=[];for(let r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),Y(e)}}onDestroy(e){return Js(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){Js(this);let n=In(this),r=bt(void 0),i;try{return e()}finally{In(n),bt(r)}}get(e,n=Jr,r){if(Js(this),e.hasOwnProperty(qE))return e[qE](this);let i=Zr(r),o,s=In(this),c=bt(void 0);try{if(!(i&4)){let l=this.records.get(e);if(l===void 0){let f=t1(e)&&ra(e);f&&this.injectableDefInScope(f)?l=ao(kh(e),Su):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l,i)}let u=i&2?sa():this.parent;return n=i&8&&n===Jr?null:n,u.get(e,n)}catch(u){let l=UA(u);throw l===-200||l===-201?new $(l,null):u}finally{bt(c),In(s)}}resolveInjectorInitializers(){let e=Y(null),n=In(this),r=bt(void 0),i;try{let o=this.get(oi,Dn,{self:!0});for(let s of o)s()}finally{In(n),bt(r),Y(e)}}toString(){let e=[],n=this.records;for(let r of n.keys())e.push(zn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){e=Ot(e);let n=xu(e)?e:Ot(e&&e.provide),r=ZA(e);if(!xu(e)&&e.multi===!0){let i=this.records.get(n);i||(i=ao(void 0,Su,!0),i.factory=()=>Oh(i.multi),this.records.set(n,i)),n=e,i.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){let i=Y(null);try{if(n.value===GE)throw Jh(zn(e));return n.value===Su&&(n.value=GE,n.value=n.factory(void 0,r)),typeof n.value=="object"&&n.value&&e1(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{Y(i)}}injectableDefInScope(e){if(!e.providedIn)return!1;let n=Ot(e.providedIn);return typeof n=="string"?n==="any"||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){let n=this._onDestroyHooks.indexOf(e);n!==-1&&this._onDestroyHooks.splice(n,1)}};function kh(t){let e=ra(t),n=e!==null?e.factory:_r(t);if(n!==null)return n;if(t instanceof z)throw new $(204,!1);if(t instanceof Function)return JA(t);throw new $(204,!1)}function JA(t){if(t.length>0)throw new $(204,!1);let n=VA(t);return n!==null?()=>n.factory(t):()=>new t}function ZA(t){if(iw(t))return ao(void 0,t.useValue);{let e=ow(t);return ao(e,Su)}}function ow(t,e,n){let r;if(xu(t)){let i=Ot(t);return _r(i)||kh(i)}else if(iw(t))r=()=>Ot(t.useValue);else if(YA(t))r=()=>t.useFactory(...Oh(t.deps||[]));else if(QA(t))r=(i,o)=>K(Ot(t.useExisting),o!==void 0&&o&8?8:void 0);else{let i=Ot(t&&(t.useClass||t.provide));if(XA(t))r=()=>new i(...Oh(t.deps));else return _r(i)||kh(i)}return r}function Js(t){if(t.destroyed)throw new $(205,!1)}function ao(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function XA(t){return!!t.deps}function e1(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function t1(t){return typeof t=="function"||typeof t=="object"&&t.ngMetadataName==="InjectionToken"}function Fh(t,e){for(let n of t)Array.isArray(n)?Fh(n,e):n&&Gh(n)?Fh(n.\u0275providers,e):e(n)}function lt(t,e){let n;t instanceof Xr?(Js(t),n=t):n=new Ph(t);let r,i=In(n),o=bt(void 0);try{return e()}finally{In(i),bt(o)}}function sw(){return ZE()!==void 0||Cu()!=null}var an=0,J=1,ne=2,nt=3,Qt=4,Yt=5,uo=6,lo=7,Fe=8,Wn=9,Tn=10,Me=11,fo=12,sp=13,si=14,jt=15,ai=16,ci=17,ui=18,aa=19,ap=20,Hn=21,Bu=22,ca=23,Bt=24,Uu=25,li=26,Ye=27,aw=1,cp=6,Ir=7,ua=8,la=9,Le=10;function Cn(t){return Array.isArray(t)&&typeof t[aw]=="object"}function cn(t){return Array.isArray(t)&&t[aw]===!0}function up(t){return(t.flags&4)!==0}function Dr(t){return t.componentOffset>-1}function $u(t){return(t.flags&1)===1}function di(t){return!!t.template}function ho(t){return(t[ne]&512)!==0}function fi(t){return(t[ne]&256)===256}var lp="svg",cw="math";function Jt(t){for(;Array.isArray(t);)t=t[an];return t}function dp(t,e){return Jt(e[t])}function un(t,e){return Jt(e[t.index])}function da(t,e){return t.data[e]}function uw(t,e){return t[e]}function fp(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}function Zt(t,e){let n=e[t];return Cn(n)?n:n[an]}function Hu(t){return(t[ne]&128)===128}function lw(t){return cn(t[nt])}function Sn(t,e){return e==null?null:t[e]}function hp(t){t[ci]=0}function pp(t){t[ne]&1024||(t[ne]|=1024,Hu(t)&&ha(t))}function dw(t,e){for(;t>0;)e=e[si],t--;return e}function fa(t){return!!(t[ne]&9216||t[Bt]?.dirty)}function zu(t){t[Tn].changeDetectionScheduler?.notify(8),t[ne]&64&&(t[ne]|=1024),fa(t)&&ha(t)}function ha(t){t[Tn].changeDetectionScheduler?.notify(0);let e=Er(t);for(;e!==null&&!(e[ne]&8192||(e[ne]|=8192,!Hu(e)));)e=Er(e)}function gp(t,e){if(fi(t))throw new $(911,!1);t[Hn]===null&&(t[Hn]=[]),t[Hn].push(e)}function fw(t,e){if(t[Hn]===null)return;let n=t[Hn].indexOf(e);n!==-1&&t[Hn].splice(n,1)}function Er(t){let e=t[nt];return cn(e)?e[nt]:e}function hw(t){return t[lo]??=[]}function pw(t){return t.cleanup??=[]}var se={lFrame:Aw(null),bindingsEnabled:!0,skipHydrationRootTNode:null};var Lh=!1;function gw(){return se.lFrame.elementDepthCount}function mw(){se.lFrame.elementDepthCount++}function mp(){se.lFrame.elementDepthCount--}function yw(){return se.bindingsEnabled}function vw(){return se.skipHydrationRootTNode!==null}function yp(t){return se.skipHydrationRootTNode===t}function vp(){se.skipHydrationRootTNode=null}function he(){return se.lFrame.lView}function Ft(){return se.lFrame.tView}function Ct(t){return se.lFrame.contextLView=t,t[Fe]}function St(t){return se.lFrame.contextLView=null,t}function Xt(){let t=_p();for(;t!==null&&t.type===64;)t=t.parent;return t}function _p(){return se.lFrame.currentTNode}function _w(){let t=se.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function po(t,e){let n=se.lFrame;n.currentTNode=t,n.isParent=e}function Ep(){return se.lFrame.isParent}function Ew(){se.lFrame.isParent=!1}function wp(){return Lh}function Ip(t){let e=Lh;return Lh=t,e}function Dp(){let t=se.lFrame,e=t.bindingRootIndex;return e===-1&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function ww(){return se.lFrame.bindingIndex}function Iw(t){return se.lFrame.bindingIndex=t}function hi(){return se.lFrame.bindingIndex++}function qu(t){let e=se.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function Dw(){return se.lFrame.inI18n}function bw(t,e){let n=se.lFrame;n.bindingIndex=n.bindingRootIndex=t,Gu(e)}function Tw(){return se.lFrame.currentDirectiveIndex}function Gu(t){se.lFrame.currentDirectiveIndex=t}function Cw(t){let e=se.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function bp(t){se.lFrame.currentQueryIndex=t}function n1(t){let e=t[J];return e.type===2?e.declTNode:e.type===1?t[Yt]:null}function Tp(t,e,n){if(n&4){let i=e,o=t;for(;i=i.parent,i===null&&!(n&1);)if(i=n1(o),i===null||(o=o[si],i.type&10))break;if(i===null)return!1;e=i,t=o}let r=se.lFrame=Sw();return r.currentTNode=e,r.lView=t,!0}function Wu(t){let e=Sw(),n=t[J];se.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function Sw(){let t=se.lFrame,e=t===null?null:t.child;return e===null?Aw(t):e}function Aw(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Rw(){let t=se.lFrame;return se.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Cp=Rw;function Ku(){let t=Rw();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function xw(t){return(se.lFrame.contextLView=dw(t,se.lFrame.contextLView))[Fe]}function An(){return se.lFrame.selectedIndex}function br(t){se.lFrame.selectedIndex=t}function Qu(){let t=se.lFrame;return da(t.tView,t.selectedIndex)}function pi(){se.lFrame.currentNamespace=lp}function gi(){r1()}function r1(){se.lFrame.currentNamespace=null}function Mw(){return se.lFrame.currentNamespace}var Nw=!0;function Yu(){return Nw}function Ju(t){Nw=t}function Vh(t,e=null,n=null,r){let i=Sp(t,e,n,r);return i.resolveInjectorInitializers(),i}function Sp(t,e=null,n=null,r,i=new Set){let o=[n||Dn,nw(t)];return r=r||(typeof t=="object"?void 0:zn(t)),new Xr(o,e||sa(),r||null,i)}var bn=class t{static THROW_IF_NOT_FOUND=Jr;static NULL=new Xs;static create(e,n){if(Array.isArray(e))return Vh({name:""},n,e,"");{let r=e.name??"";return Vh({name:r},e.parent,e.providers,r)}}static \u0275prov=H({token:t,providedIn:"any",factory:()=>K(ep)});static __NG_ELEMENT_ID__=-1},$e=new z(""),Tr=(()=>{class t{static __NG_ELEMENT_ID__=i1;static __NG_ENV_ID__=n=>n}return t})(),jh=class extends Tr{_lView;constructor(e){super(),this._lView=e}get destroyed(){return fi(this._lView)}onDestroy(e){let n=this._lView;return gp(n,e),()=>fw(n,e)}};function i1(){return new jh(he())}var Pw=!1,Kn=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new Qe(!1);get hasPendingTasks(){return this.destroyed?!1:this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new le(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}return t})(),Bh=class extends ut{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,sw()&&(this.destroyRef=P(Tr,{optional:!0})??void 0,this.pendingTasks=P(Kn,{optional:!0})??void 0)}emit(e){let n=Y(null);try{super.next(e)}finally{Y(n)}}subscribe(e,n,r){let i=e,o=n||(()=>null),s=r;if(e&&typeof e=="object"){let u=e;i=u.next?.bind(u),o=u.error?.bind(u),s=u.complete?.bind(u)}this.__isAsync&&(o=this.wrapInTimeout(o),i&&(i=this.wrapInTimeout(i)),s&&(s=this.wrapInTimeout(s)));let c=super.subscribe({next:i,error:o,complete:s});return e instanceof ct&&e.add(c),c}wrapInTimeout(e){return n=>{let r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{r!==void 0&&this.pendingTasks?.remove(r)}})}}},Tt=Bh;function Mu(...t){}function Ap(t){let e,n;function r(){t=Mu;try{n!==void 0&&typeof cancelAnimationFrame=="function"&&cancelAnimationFrame(n),e!==void 0&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),typeof requestAnimationFrame=="function"&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function Rp(t){return queueMicrotask(()=>t()),()=>{t=Mu}}var xp="isAngularZone",ea=xp+"_ID",o1=0,kt=class t{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new Tt(!1);onMicrotaskEmpty=new Tt(!1);onStable=new Tt(!1);onError=new Tt(!1);constructor(e){let{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:i=!1,scheduleInRootZone:o=Pw}=e;if(typeof Zone>"u")throw new $(908,!1);Zone.assertZonePatched();let s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!i&&r,s.shouldCoalesceRunChangeDetection=i,s.callbackScheduled=!1,s.scheduleInRootZone=o,c1(s)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get(xp)===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new $(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new $(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,i){let o=this._inner,s=o.scheduleEventTask("NgZoneEvent: "+i,e,s1,Mu,Mu);try{return o.runTask(s,n,r)}finally{o.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}},s1={};function Mp(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function a1(t){if(t.isCheckStableRunning||t.callbackScheduled)return;t.callbackScheduled=!0;function e(){Ap(()=>{t.callbackScheduled=!1,Uh(t),t.isCheckStableRunning=!0,Mp(t),t.isCheckStableRunning=!1})}t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),Uh(t)}function c1(t){let e=()=>{a1(t)},n=o1++;t._inner=t._inner.fork({name:"angular",properties:{[xp]:!0,[ea]:n,[ea+n]:!0},onInvokeTask:(r,i,o,s,c,u)=>{if(u1(u))return r.invokeTask(o,s,c,u);try{return WE(t),r.invokeTask(o,s,c,u)}finally{(t.shouldCoalesceEventChangeDetection&&s.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),KE(t)}},onInvoke:(r,i,o,s,c,u,l)=>{try{return WE(t),r.invoke(o,s,c,u,l)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!l1(u)&&e(),KE(t)}},onHasTask:(r,i,o,s)=>{r.hasTask(o,s),i===o&&(s.change=="microTask"?(t._hasPendingMicrotasks=s.microTask,Uh(t),Mp(t)):s.change=="macroTask"&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,i,o,s)=>(r.handleError(o,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}function Uh(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.callbackScheduled===!0?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function WE(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function KE(t){t._nesting--,Mp(t)}var ta=class{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new Tt;onMicrotaskEmpty=new Tt;onStable=new Tt;onError=new Tt;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,i){return e.apply(n,r)}};function u1(t){return Ow(t,"__ignore_ng_zone__")}function l1(t){return Ow(t,"__scheduler_tick__")}function Ow(t,e){return!Array.isArray(t)||t.length!==1?!1:t[0]?.data?.[e]===!0}var qn=class{_console=console;handleError(e){this._console.error("ERROR",e)}},Lt=new z("",{factory:()=>{let t=P(kt),e=P(Ue),n;return r=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw r}):(n??=e.get(qn),n.handleError(r))})}}}),kw={provide:oi,useValue:()=>{let t=P(qn,{optional:!0})},multi:!0},d1=new z("",{factory:()=>{let t=P($e).defaultView;if(!t)return;let e=P(Lt),n=o=>{e(o.reason),o.preventDefault()},r=o=>{o.error?e(o.error):e(new Error(o.message,{cause:o})),o.preventDefault()},i=()=>{t.addEventListener("unhandledrejection",n),t.addEventListener("error",r)};typeof Zone<"u"?Zone.root.run(i):i(),P(Tr).onDestroy(()=>{t.removeEventListener("error",r),t.removeEventListener("unhandledrejection",n)})}});function Np(){return Gn([tw(()=>void P(d1))])}function Qn(t,e){let[n,r,i]=gh(t,e?.equal),o=n,s=o[Gt];return o.set=r,o.update=i,o.asReadonly=Fw.bind(o),o}function Fw(){let t=this[Gt];if(t.readonlyFn===void 0){let e=()=>this();e[Gt]=t,t.readonlyFn=e}return t.readonlyFn}var ei=class{},pa=new z("",{factory:()=>!0});var Pp=new z(""),Zu=(()=>{class t{internalPendingTasks=P(Kn);scheduler=P(ei);errorHandler=P(Lt);add(){let n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){let r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}return t})(),Op=(()=>{class t{static \u0275prov=H({token:t,providedIn:"root",factory:()=>new $h})}return t})(),$h=class{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){let n=e.zone,r=this.queues.get(n);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){let n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);let r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(let[n,r]of this.queues)n===null?e||=this.flushQueue(r):e||=n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(let r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}},Hh=class{[Gt];constructor(e){this[Gt]=e}destroy(){this[Gt].destroy()}};function Ut(t){return mh(t)}function El(t){return{toString:t}.toString()}function v1(t){return typeof t=="function"}function uI(t,e,n,r){e!==null?e.applyValueToInputSignal(e,r):t[n]=r}var il=class{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}},wo=(()=>{let t=()=>lI;return t.ngInherit=!0,t})();function lI(t){return t.type.prototype.ngOnChanges&&(t.setInput=E1),_1}function _1(){let t=fI(this),e=t?.current;if(e){let n=t.previous;if(n===ii)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function E1(t,e,n,r,i){let o=this.declaredInputs[r],s=fI(t)||w1(t,{previous:ii,current:null}),c=s.current||(s.current={}),u=s.previous,l=u[o];c[o]=new il(l&&l.currentValue,n,u===ii),uI(t,e,i,n)}var dI="__ngSimpleChanges__";function fI(t){return t[dI]||null}function w1(t,e){return t[dI]=e}var Lw=[];var be=function(t,e=null,n){for(let r=0;r<Lw.length;r++){let i=Lw[r];i(t,e,n)}},ye=(function(t){return t[t.TemplateCreateStart=0]="TemplateCreateStart",t[t.TemplateCreateEnd=1]="TemplateCreateEnd",t[t.TemplateUpdateStart=2]="TemplateUpdateStart",t[t.TemplateUpdateEnd=3]="TemplateUpdateEnd",t[t.LifecycleHookStart=4]="LifecycleHookStart",t[t.LifecycleHookEnd=5]="LifecycleHookEnd",t[t.OutputStart=6]="OutputStart",t[t.OutputEnd=7]="OutputEnd",t[t.BootstrapApplicationStart=8]="BootstrapApplicationStart",t[t.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",t[t.BootstrapComponentStart=10]="BootstrapComponentStart",t[t.BootstrapComponentEnd=11]="BootstrapComponentEnd",t[t.ChangeDetectionStart=12]="ChangeDetectionStart",t[t.ChangeDetectionEnd=13]="ChangeDetectionEnd",t[t.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",t[t.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",t[t.AfterRenderHooksStart=16]="AfterRenderHooksStart",t[t.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",t[t.ComponentStart=18]="ComponentStart",t[t.ComponentEnd=19]="ComponentEnd",t[t.DeferBlockStateStart=20]="DeferBlockStateStart",t[t.DeferBlockStateEnd=21]="DeferBlockStateEnd",t[t.DynamicComponentStart=22]="DynamicComponentStart",t[t.DynamicComponentEnd=23]="DynamicComponentEnd",t[t.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",t[t.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",t})(ye||{});function I1(t,e,n){let{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){let s=lI(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}i&&(n.preOrderHooks??=[]).push(0-t,i),o&&((n.preOrderHooks??=[]).push(t,o),(n.preOrderCheckHooks??=[]).push(t,o))}function D1(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){let o=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:c,ngAfterViewInit:u,ngAfterViewChecked:l,ngOnDestroy:f}=o;s&&(t.contentHooks??=[]).push(-n,s),c&&((t.contentHooks??=[]).push(n,c),(t.contentCheckHooks??=[]).push(n,c)),u&&(t.viewHooks??=[]).push(-n,u),l&&((t.viewHooks??=[]).push(n,l),(t.viewCheckHooks??=[]).push(n,l)),f!=null&&(t.destroyHooks??=[]).push(n,f)}}function tl(t,e,n){hI(t,e,3,n)}function nl(t,e,n,r){(t[ne]&3)===n&&hI(t,e,n,r)}function kp(t,e){let n=t[ne];(n&3)===e&&(n&=16383,n+=1,t[ne]=n)}function hI(t,e,n,r){let i=r!==void 0?t[ci]&65535:0,o=r??-1,s=e.length-1,c=0;for(let u=i;u<s;u++)if(typeof e[u+1]=="number"){if(c=e[u],r!=null&&c>=r)break}else e[u]<0&&(t[ci]+=65536),(c<o||o==-1)&&(b1(t,n,e,u),t[ci]=(t[ci]&4294901760)+u+2),u++}function Vw(t,e){be(ye.LifecycleHookStart,t,e);let n=Y(null);try{e.call(t)}finally{Y(n),be(ye.LifecycleHookEnd,t,e)}}function b1(t,e,n,r){let i=n[r]<0,o=n[r+1],s=i?-n[r]:n[r],c=t[s];i?t[ne]>>14<t[ci]>>16&&(t[ne]&3)===e&&(t[ne]+=16384,Vw(c,o)):Vw(c,o)}var mo=-1,ya=class{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,i){this.factory=e,this.name=i,this.canSeeViewProviders=n,this.injectImpl=r}};function T1(t){return(t.flags&8)!==0}function C1(t){return(t.flags&16)!==0}function S1(t,e,n){let r=0;for(;r<n.length;){let i=n[r];if(typeof i=="number"){if(i!==0)break;r++;let o=n[r++],s=n[r++],c=n[r++];t.setAttribute(e,s,c,o)}else{let o=i,s=n[++r];A1(o)?t.setProperty(e,o,s):t.setAttribute(e,o,s),r++}}return r}function pI(t){return t===3||t===4||t===6}function A1(t){return t.charCodeAt(0)===64}function wl(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){let i=e[r];typeof i=="number"?n=i:n===0||(n===-1||n===2?jw(t,n,i,null,e[++r]):jw(t,n,i,null,null))}}return t}function jw(t,e,n,r,i){let o=0,s=t.length;if(e===-1)s=-1;else for(;o<t.length;){let c=t[o++];if(typeof c=="number"){if(c===e){s=-1;break}else if(c>e){s=o-1;break}}}for(;o<t.length;){let c=t[o];if(typeof c=="number")break;if(c===n){i!==null&&(t[o+1]=i);return}o++,i!==null&&o++}s!==-1&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),i!==null&&t.splice(o++,0,i)}function gI(t){return t!==mo}function ol(t){return t&32767}function R1(t){return t>>16}function sl(t,e){let n=R1(t),r=e;for(;n>0;)r=r[si],n--;return r}var Hp=!0;function al(t){let e=Hp;return Hp=t,e}var x1=256,mI=x1-1,yI=5,M1=0,Rn={};function N1(t,e,n){let r;typeof n=="string"?r=n.charCodeAt(0)||0:n.hasOwnProperty(ni)&&(r=n[ni]),r==null&&(r=n[ni]=M1++);let i=r&mI,o=1<<i;e.data[t+(i>>yI)]|=o}function vI(t,e){let n=_I(t,e);if(n!==-1)return n;let r=e[J];r.firstCreatePass&&(t.injectorIndex=e.length,Fp(r.data,t),Fp(e,null),Fp(r.blueprint,null));let i=lg(t,e),o=t.injectorIndex;if(gI(i)){let s=ol(i),c=sl(i,e),u=c[J].data;for(let l=0;l<8;l++)e[o+l]=c[s+l]|u[s+l]}return e[o+8]=i,o}function Fp(t,e){t.push(0,0,0,0,0,0,0,0,e)}function _I(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function lg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;i!==null;){if(r=bI(i),r===null)return mo;if(n++,i=i[si],r.injectorIndex!==-1)return r.injectorIndex|n<<16}return mo}function P1(t,e,n){N1(t,e,n)}function O1(t,e){if(e==="class")return t.classes;if(e==="style")return t.styles;let n=t.attrs;if(n){let r=n.length,i=0;for(;i<r;){let o=n[i];if(pI(o))break;if(o===0)i=i+2;else if(typeof o=="number")for(i++;i<r&&typeof n[i]=="string";)i++;else{if(o===e)return n[i+1];i=i+2}}}return null}function EI(t,e,n){if(n&8||t!==void 0)return t;Fu(e,"NodeInjector")}function wI(t,e,n,r){if(n&8&&r===void 0&&(r=null),(n&3)===0){let i=t[Wn],o=bt(void 0);try{return i?i.get(e,r,n&8):Zh(e,r,n&8)}finally{bt(o)}}return EI(r,e,n)}function II(t,e,n,r=0,i){if(t!==null){if(e[ne]&2048&&!(r&2)){let s=j1(t,e,n,r,Rn);if(s!==Rn)return s}let o=DI(t,e,n,r,Rn);if(o!==Rn)return o}return wI(e,n,r,i)}function DI(t,e,n,r,i){let o=L1(n);if(typeof o=="function"){if(!Tp(e,t,r))return r&1?EI(i,n,r):wI(e,n,r,i);try{let s;if(s=o(r),s==null&&!(r&8))Fu(n);else return s}finally{Cp()}}else if(typeof o=="number"){let s=null,c=_I(t,e),u=mo,l=r&1?e[jt][Yt]:null;for((c===-1||r&4)&&(u=c===-1?lg(t,e):e[c+8],u===mo||!Uw(r,!1)?c=-1:(s=e[J],c=ol(u),e=sl(u,e)));c!==-1;){let f=e[J];if(Bw(o,c,f.data)){let p=k1(c,e,n,s,r,l);if(p!==Rn)return p}u=e[c+8],u!==mo&&Uw(r,e[J].data[c+8]===l)&&Bw(o,c,e)?(s=f,c=ol(u),e=sl(u,e)):c=-1}}return i}function k1(t,e,n,r,i,o){let s=e[J],c=s.data[t+8],u=r==null?Dr(c)&&Hp:r!=s&&(c.type&3)!==0,l=i&1&&o===c,f=F1(c,s,n,u,l);return f!==null?zp(e,s,f,c,i):Rn}function F1(t,e,n,r,i){let o=t.providerIndexes,s=e.data,c=o&1048575,u=t.directiveStart,l=t.directiveEnd,f=o>>20,p=r?c:c+f,m=i?c+f:l;for(let y=p;y<m;y++){let A=s[y];if(y<u&&n===A||y>=u&&A.type===n)return y}if(i){let y=s[u];if(y&&di(y)&&y.type===n)return u}return null}function zp(t,e,n,r,i){let o=t[n],s=e.data;if(o instanceof ya){let c=o;if(c.resolving){let y=QE(s[n]);throw Jh(y)}let u=al(c.canSeeViewProviders);c.resolving=!0;let l=s[n].type||s[n],f,p=c.injectImpl?bt(c.injectImpl):null,m=Tp(t,r,0);try{o=t[n]=c.factory(void 0,i,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&I1(n,s[n],e)}finally{p!==null&&bt(p),al(u),c.resolving=!1,Cp()}}return o}function L1(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(ni)?t[ni]:void 0;return typeof e=="number"?e>=0?e&mI:V1:e}function Bw(t,e,n){let r=1<<t;return!!(n[e+(t>>yI)]&r)}function Uw(t,e){return!(t&2)&&!(t&1&&e)}var mi=class{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return II(this._tNode,this._lView,e,Zr(r),n)}};function V1(){return new mi(Xt(),he())}function Da(t){return El(()=>{let e=t.prototype.constructor,n=e[Zs]||qp(e),r=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){let o=i[Zs]||qp(i);if(o&&o!==n)return o;i=Object.getPrototypeOf(i)}return o=>new o})}function qp(t){return zh(t)?()=>{let e=qp(Ot(t));return e&&e()}:_r(t)}function j1(t,e,n,r,i){let o=t,s=e;for(;o!==null&&s!==null&&s[ne]&2048&&!ho(s);){let c=DI(o,s,n,r|2,Rn);if(c!==Rn)return c;let u=o.parent;if(!u){let l=s[ap];if(l){let f=l.get(n,Rn,r);if(f!==Rn)return f}u=bI(s),s=s[si]}o=u}return i}function bI(t){let e=t[J],n=e.type;return n===2?e.declTNode:n===1?t[Yt]:null}function ba(t){return O1(Xt(),t)}function B1(){return dg(Xt(),he())}function dg(t,e){return new Ta(un(t,e))}var Ta=(()=>{class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=B1}return t})();function TI(t){return(t.flags&128)===128}var fg=(function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t})(fg||{}),CI=new Map,U1=0;function $1(){return U1++}function H1(t){CI.set(t[aa],t)}function Gp(t){CI.delete(t[aa])}var $w="__ngContext__";function yo(t,e){Cn(e)?(t[$w]=e[aa],H1(e)):t[$w]=e}function SI(t){return RI(t[fo])}function AI(t){return RI(t[Qt])}function RI(t){for(;t!==null&&!cn(t);)t=t[Qt];return t}var z1;function hg(t){z1=t}var Il=new z("",{factory:()=>q1}),q1="ng";var Dl=new z(""),Ca=new z("",{providedIn:"platform",factory:()=>"unknown"});var bl=new z("",{factory:()=>P($e).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var xI="r";var MI="di";var NI=!1,PI=new z("",{factory:()=>NI});var G1=(t,e,n,r)=>{};function W1(t,e,n,r){G1(t,e,n,r)}function pg(t){return(t.flags&32)===32}var K1=()=>null;function OI(t,e,n=!1){return K1(t,e,n)}function kI(t,e){let n=t.contentQueries;if(n!==null){let r=Y(null);try{for(let i=0;i<n.length;i+=2){let o=n[i],s=n[i+1];if(s!==-1){let c=t.data[s];bp(o),c.contentQueries(2,e[s],s)}}}finally{Y(r)}}}function Wp(t,e,n){bp(0);let r=Y(null);try{e(t,n)}finally{Y(r)}}function FI(t,e,n){if(up(e)){let r=Y(null);try{let i=e.directiveStart,o=e.directiveEnd;for(let s=i;s<o;s++){let c=t.data[s];if(c.contentQueries){let u=n[s];c.contentQueries(1,u,s)}}}finally{Y(r)}}}var fn=(function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t})(fn||{});var Xu;function Q1(){if(Xu===void 0&&(Xu=null,na.trustedTypes))try{Xu=na.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Xu}function Hw(t){return Q1()?.createScriptURL(t)||t}var cl=class{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${Nu})`}};function Sa(t){return t instanceof cl?t.changingThisBreaksApplicationSecurity:t}function gg(t,e){let n=LI(t);if(n!=null&&n!==e){if(n==="ResourceURL"&&e==="URL")return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${Nu})`)}return n===e}function LI(t){return t instanceof cl&&t.getTypeName()||null}var Y1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function VI(t){return t=String(t),t.match(Y1)?t:"unsafe:"+t}function J1(t,e){return t.createText(e)}function Z1(t,e,n){t.setValue(e,n)}function jI(t,e,n){return t.createElement(e,n)}function ul(t,e,n,r,i){t.insertBefore(e,n,r,i)}function BI(t,e,n){t.appendChild(e,n)}function zw(t,e,n,r,i){r!==null?ul(t,e,n,r,i):BI(t,e,n)}function UI(t,e,n,r){t.removeChild(null,e,n,r)}function X1(t,e,n){t.setAttribute(e,"style",n)}function eR(t,e,n){n===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}function $I(t,e,n){let{mergedAttrs:r,classes:i,styles:o}=n;r!==null&&S1(t,e,r),i!==null&&eR(t,e,i),o!==null&&X1(t,e,o)}var Tl=(function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t})(Tl||{});function Io(t){let e=zI();return e?e.sanitize(Tl.URL,t)||"":gg(t,"URL")?Sa(t):VI(ri(t))}function HI(t){let e=zI();if(e)return Hw(e.sanitize(Tl.RESOURCE_URL,t)||"");if(gg(t,"ResourceURL"))return Hw(Sa(t));throw new $(904,!1)}function tR(t,e){return e==="src"&&(t==="embed"||t==="frame"||t==="iframe"||t==="media"||t==="script")||e==="href"&&(t==="base"||t==="link")?HI:Io}function mg(t,e,n){return tR(e,n)(t)}function zI(){let t=he();return t&&t[Tn].sanitizer}function qI(t){return t instanceof Function?t():t}function nR(t,e,n){let r=t.length;for(;;){let i=t.indexOf(e,n);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let o=e.length;if(i+o===r||t.charCodeAt(i+o)<=32)return i}n=i+1}}var GI="ng-template";function rR(t,e,n,r){let i=0;if(r){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&nR(e[i+1].toLowerCase(),n,0)!==-1)return!0}else if(yg(t))return!1;if(i=e.indexOf(1,i),i>-1){let o;for(;++i<e.length&&typeof(o=e[i])=="string";)if(o.toLowerCase()===n)return!0}return!1}function yg(t){return t.type===4&&t.value!==GI}function iR(t,e,n){let r=t.type===4&&!n?GI:t.value;return e===r}function oR(t,e,n){let r=4,i=t.attrs,o=i!==null?cR(i):0,s=!1;for(let c=0;c<e.length;c++){let u=e[c];if(typeof u=="number"){if(!s&&!ln(r)&&!ln(u))return!1;if(s&&ln(u))continue;s=!1,r=u|r&1;continue}if(!s)if(r&4){if(r=2|r&1,u!==""&&!iR(t,u,n)||u===""&&e.length===1){if(ln(r))return!1;s=!0}}else if(r&8){if(i===null||!rR(t,i,u,n)){if(ln(r))return!1;s=!0}}else{let l=e[++c],f=sR(u,i,yg(t),n);if(f===-1){if(ln(r))return!1;s=!0;continue}if(l!==""){let p;if(f>o?p="":p=i[f+1].toLowerCase(),r&2&&l!==p){if(ln(r))return!1;s=!0}}}}return ln(r)||s}function ln(t){return(t&1)===0}function sR(t,e,n,r){if(e===null)return-1;let i=0;if(r||!n){let o=!1;for(;i<e.length;){let s=e[i];if(s===t)return i;if(s===3||s===6)o=!0;else if(s===1||s===2){let c=e[++i];for(;typeof c=="string";)c=e[++i];continue}else{if(s===4)break;if(s===0){i+=4;continue}}i+=o?1:2}return-1}else return uR(e,t)}function aR(t,e,n=!1){for(let r=0;r<e.length;r++)if(oR(t,e[r],n))return!0;return!1}function cR(t){for(let e=0;e<t.length;e++){let n=t[e];if(pI(n))return e}return t.length}function uR(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){let r=t[n];if(typeof r=="number")return-1;if(r===e)return n;n++}return-1}function qw(t,e){return t?":not("+e.trim()+")":e}function lR(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if(typeof s=="string")if(r&2){let c=t[++n];i+="["+s+(c.length>0?'="'+c+'"':"")+"]"}else r&8?i+="."+s:r&4&&(i+=" "+s);else i!==""&&!ln(s)&&(e+=qw(o,i),i=""),r=s,o=o||!ln(r);n++}return i!==""&&(e+=qw(o,i)),e}function dR(t){return t.map(lR).join(",")}function fR(t){let e=[],n=[],r=1,i=2;for(;r<t.length;){let o=t[r];if(typeof o=="string")i===2?o!==""&&e.push(o,t[++r]):i===8&&n.push(o);else{if(!ln(i))break;i=o}r++}return n.length&&e.push(1,...n),e}var At={};function vg(t,e,n,r,i,o,s,c,u,l,f){let p=Ye+r,m=p+i,y=hR(p,m),A=typeof l=="function"?l():l;return y[J]={type:t,blueprint:y,template:n,queries:null,viewQuery:c,declTNode:e,data:y.slice().fill(null,p),bindingStartIndex:p,expandoStartIndex:m,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof o=="function"?o():o,pipeRegistry:typeof s=="function"?s():s,firstChild:null,schemas:u,consts:A,incompleteFirstPass:!1,ssrId:f}}function hR(t,e){let n=[];for(let r=0;r<e;r++)n.push(r<t?null:At);return n}function pR(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=vg(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function _g(t,e,n,r,i,o,s,c,u,l,f){let p=e.blueprint.slice();return p[an]=i,p[ne]=r|4|128|8|64|1024,(l!==null||t&&t[ne]&2048)&&(p[ne]|=2048),hp(p),p[nt]=p[si]=t,p[Fe]=n,p[Tn]=s||t&&t[Tn],p[Me]=c||t&&t[Me],p[Wn]=u||t&&t[Wn]||null,p[Yt]=o,p[aa]=$1(),p[uo]=f,p[ap]=l,p[jt]=e.type==2?t[jt]:p,p}function gR(t,e,n){let r=un(e,t),i=pR(n),o=t[Tn].rendererFactory,s=Eg(t,_g(t,i,null,WI(n),r,e,null,o.createRenderer(r,n),null,null,null));return t[e.index]=s}function WI(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function KI(t,e,n,r){if(n===0)return-1;let i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Eg(t,e){return t[fo]?t[sp][Qt]=e:t[fo]=e,t[sp]=e,e}function L(t=1){QI(Ft(),he(),An()+t,!1)}function QI(t,e,n,r){if(!r)if((e[ne]&3)===3){let o=t.preOrderCheckHooks;o!==null&&tl(e,o,n)}else{let o=t.preOrderHooks;o!==null&&nl(e,o,0,n)}br(n)}var Cl=(function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t})(Cl||{});function Kp(t,e,n,r){let i=Y(null);try{let[o,s,c]=t.inputs[n],u=null;(s&Cl.SignalBased)!==0&&(u=e[o][Gt]),u!==null&&u.transformFn!==void 0?r=u.transformFn(r):c!==null&&(r=c.call(e,r)),t.setInput!==null?t.setInput(e,u,r,n,o):uI(e,u,o,r)}finally{Y(i)}}var xn=(function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t})(xn||{}),mR;function wg(t,e){return mR(t,e)}var yi=new Set,Ig=(function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t})(Ig||{}),Ii=new z(""),Gw=new Set;function Di(t){Gw.has(t)||(Gw.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}var YI=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=H({token:t,providedIn:"root",factory:()=>new t})}return t})();var JI=new z("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null})});function ZI(t,e,n){let r=t.get(JI);if(Array.isArray(e))for(let i of e)r.queue.add(i),n?.detachedLeaveAnimationFns?.push(i);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function yR(t,e){let n=t.get(JI);if(e.detachedLeaveAnimationFns){for(let r of e.detachedLeaveAnimationFns)n.queue.delete(r);e.detachedLeaveAnimationFns=void 0}}function vR(t,e){for(let[n,r]of e)ZI(t,r.animateFns)}function Ww(t,e,n,r){let i=t?.[li]?.enter;e!==null&&i&&i.has(n.index)&&vR(r,i)}function go(t,e,n,r,i,o,s,c){if(i!=null){let u,l=!1;cn(i)?u=i:Cn(i)&&(l=!0,i=i[an]);let f=Jt(i);t===0&&r!==null?(Ww(c,r,o,n),s==null?BI(e,r,f):ul(e,r,f,s||null,!0)):t===1&&r!==null?(Ww(c,r,o,n),ul(e,r,f,s||null,!0)):t===2?Kw(c,o,n,p=>{UI(e,f,l,p)}):t===3&&Kw(c,o,n,()=>{e.destroyNode(f)}),u!=null&&MR(e,t,n,u,o,r,s)}}function _R(t,e){XI(t,e),e[an]=null,e[Yt]=null}function ER(t,e,n,r,i,o){r[an]=i,r[Yt]=e,Al(t,r,n,1,i,o)}function XI(t,e){e[Tn].changeDetectionScheduler?.notify(9),Al(t,e,e[Me],2,null,null)}function wR(t){let e=t[fo];if(!e)return Lp(t[J],t);for(;e;){let n=null;if(Cn(e))n=e[fo];else{let r=e[Le];r&&(n=r)}if(!n){for(;e&&!e[Qt]&&e!==t;)Cn(e)&&Lp(e[J],e),e=e[nt];e===null&&(e=t),Cn(e)&&Lp(e[J],e),n=e&&e[Qt]}e=n}}function Dg(t,e){let n=t[la],r=n.indexOf(e);n.splice(r,1)}function Sl(t,e){if(fi(e))return;let n=e[Me];n.destroyNode&&Al(t,e,n,3,null,null),wR(e)}function Lp(t,e){if(fi(e))return;let n=Y(null);try{e[ne]&=-129,e[ne]|=256,e[Bt]&&Hs(e[Bt]),bR(t,e),DR(t,e),e[J].type===1&&e[Me].destroy();let r=e[ai];if(r!==null&&cn(e[nt])){r!==e[nt]&&Dg(r,e);let i=e[ui];i!==null&&i.detachView(t)}Gp(e)}finally{Y(n)}}function Kw(t,e,n,r){let i=t?.[li];if(i==null||i.leave==null||!i.leave.has(e.index))return r(!1);t&&yi.add(t),ZI(n,()=>{if(i.leave&&i.leave.has(e.index)){let s=i.leave.get(e.index),c=[];if(s){for(let u=0;u<s.animateFns.length;u++){let l=s.animateFns[u],{promise:f}=l();c.push(f)}i.detachedLeaveAnimationFns=void 0}i.running=Promise.allSettled(c),IR(t,r)}else t&&yi.delete(t),r(!1)},i)}function IR(t,e){let n=t[li]?.running;if(n){n.then(()=>{t[li].running=void 0,yi.delete(t),e(!0)});return}e(!1)}function DR(t,e){let n=t.cleanup,r=e[lo];if(n!==null)for(let s=0;s<n.length-1;s+=2)if(typeof n[s]=="string"){let c=n[s+3];c>=0?r[c]():r[-c].unsubscribe(),s+=2}else{let c=r[n[s+1]];n[s].call(c)}r!==null&&(e[lo]=null);let i=e[Hn];if(i!==null){e[Hn]=null;for(let s=0;s<i.length;s++){let c=i[s];c()}}let o=e[ca];if(o!==null){e[ca]=null;for(let s of o)s.destroy()}}function bR(t,e){let n;if(t!=null&&(n=t.destroyHooks)!=null)for(let r=0;r<n.length;r+=2){let i=e[n[r]];if(!(i instanceof ya)){let o=n[r+1];if(Array.isArray(o))for(let s=0;s<o.length;s+=2){let c=i[o[s]],u=o[s+1];be(ye.LifecycleHookStart,c,u);try{u.call(c)}finally{be(ye.LifecycleHookEnd,c,u)}}else{be(ye.LifecycleHookStart,i,o);try{o.call(i)}finally{be(ye.LifecycleHookEnd,i,o)}}}}}function TR(t,e,n){return CR(t,e.parent,n)}function CR(t,e,n){let r=e;for(;r!==null&&r.type&168;)e=r,r=e.parent;if(r===null)return n[an];if(Dr(r)){let{encapsulation:i}=t.data[r.directiveStart+r.componentOffset];if(i===fn.None||i===fn.Emulated)return null}return un(r,n)}function SR(t,e,n){return RR(t,e,n)}function AR(t,e,n){return t.type&40?un(t,n):null}var RR=AR,Qw;function bg(t,e,n,r){let i=TR(t,r,e),o=e[Me],s=r.parent||e[Yt],c=SR(s,r,e);if(i!=null)if(Array.isArray(n))for(let u=0;u<n.length;u++)zw(o,i,n[u],c,!1);else zw(o,i,n,c,!1);Qw!==void 0&&Qw(o,r,e,n,i)}function ga(t,e){if(e!==null){let n=e.type;if(n&3)return un(e,t);if(n&4)return Qp(-1,t[e.index]);if(n&8){let r=e.child;if(r!==null)return ga(t,r);{let i=t[e.index];return cn(i)?Qp(-1,i):Jt(i)}}else{if(n&128)return ga(t,e.next);if(n&32)return wg(e,t)()||Jt(t[e.index]);{let r=e0(t,e);if(r!==null){if(Array.isArray(r))return r[0];let i=Er(t[jt]);return ga(i,r)}else return ga(t,e.next)}}}return null}function e0(t,e){if(e!==null){let r=t[jt][Yt],i=e.projection;return r.projection[i]}return null}function Qp(t,e){let n=Le+t+1;if(n<e.length){let r=e[n],i=r[J].firstChild;if(i!==null)return ga(r,i)}return e[Ir]}function Tg(t,e,n,r,i,o,s){for(;n!=null;){let c=r[Wn];if(n.type===128){n=n.next;continue}let u=r[n.index],l=n.type;if(s&&e===0&&(u&&yo(Jt(u),r),n.flags|=2),!pg(n))if(l&8)Tg(t,e,n.child,r,i,o,!1),go(e,t,c,i,u,n,o,r);else if(l&32){let f=wg(n,r),p;for(;p=f();)go(e,t,c,i,p,n,o,r);go(e,t,c,i,u,n,o,r)}else l&16?xR(t,e,r,n,i,o):go(e,t,c,i,u,n,o,r);n=s?n.projectionNext:n.next}}function Al(t,e,n,r,i,o){Tg(n,r,t.firstChild,e,i,o,!1)}function xR(t,e,n,r,i,o){let s=n[jt],u=s[Yt].projection[r.projection];if(Array.isArray(u))for(let l=0;l<u.length;l++){let f=u[l];go(e,t,n[Wn],i,f,r,o,n)}else{let l=u,f=s[nt];TI(r)&&(l.flags|=128),Tg(t,e,l,f,i,o,!0)}}function MR(t,e,n,r,i,o,s){let c=r[Ir],u=Jt(r);c!==u&&go(e,t,n,o,c,i,s);for(let l=Le;l<r.length;l++){let f=r[l];Al(f[J],f,t,e,o,c)}}function NR(t,e,n,r,i){if(e)i?t.addClass(n,r):t.removeClass(n,r);else{let o=r.indexOf("-")===-1?void 0:xn.DashCase;i==null?t.removeStyle(n,r,o):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),o|=xn.Important),t.setStyle(n,r,i,o))}}function t0(t,e,n,r,i){let o=An(),s=r&2;try{br(-1),s&&e.length>Ye&&QI(t,e,Ye,!1);let c=s?ye.TemplateUpdateStart:ye.TemplateCreateStart;be(c,i,n),n(r,i)}finally{br(o);let c=s?ye.TemplateUpdateEnd:ye.TemplateCreateEnd;be(c,i,n)}}function n0(t,e,n){jR(t,e,n),(n.flags&64)===64&&BR(t,e,n)}function Cg(t,e,n=un){let r=e.localNames;if(r!==null){let i=e.index+1;for(let o=0;o<r.length;o+=2){let s=r[o+1],c=s===-1?n(e,t):t[s];t[i++]=c}}}function PR(t,e,n,r){let o=r.get(PI,NI)||n===fn.ShadowDom||n===fn.ExperimentalIsolatedShadowDom,s=t.selectRootElement(e,o);return OR(s),s}function OR(t){kR(t)}var kR=()=>null;function FR(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function LR(t,e,n,r,i,o){let s=e[J];if(Sg(t,s,e,n,r)){Dr(t)&&VR(e,t.index);return}t.type&3&&(n=FR(n)),r0(t,e,n,r,i,o)}function r0(t,e,n,r,i,o){if(t.type&3){let s=un(t,e);r=o!=null?o(r,t.value||"",n):r,i.setProperty(s,n,r)}else t.type&12}function VR(t,e){let n=Zt(e,t);n[ne]&16||(n[ne]|=64)}function jR(t,e,n){let r=n.directiveStart,i=n.directiveEnd;Dr(n)&&gR(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||vI(n,e);let o=n.initialInputs;for(let s=r;s<i;s++){let c=t.data[s],u=zp(e,t,s,n);if(yo(u,e),o!==null&&qR(e,s-r,u,c,n,o),di(c)){let l=Zt(n.index,e);l[Fe]=zp(e,t,s,n)}}}function BR(t,e,n){let r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Tw();try{br(o);for(let c=r;c<i;c++){let u=t.data[c],l=e[c];Gu(c),(u.hostBindings!==null||u.hostVars!==0||u.hostAttrs!==null)&&UR(u,l)}}finally{br(-1),Gu(s)}}function UR(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function $R(t,e){let n=t.directiveRegistry,r=null;if(n)for(let i=0;i<n.length;i++){let o=n[i];aR(e,o.selectors,!1)&&(r??=[],di(o)?r.unshift(o):r.push(o))}return r}function HR(t,e,n,r,i,o){let s=un(t,e);zR(e[Me],s,o,t.value,n,r,i)}function zR(t,e,n,r,i,o,s){if(o==null)t.removeAttribute(e,i,n);else{let c=s==null?ri(o):s(o,r||"",i);t.setAttribute(e,i,c,n)}}function qR(t,e,n,r,i,o){let s=o[e];if(s!==null)for(let c=0;c<s.length;c+=2){let u=s[c],l=s[c+1];Kp(r,n,u,l)}}function i0(t,e,n,r,i){let o=Ye+n,s=e[J],c=i(s,e,t,r,n);e[o]=c,po(t,!0);let u=t.type===2;return u?($I(e[Me],c,t),(gw()===0||$u(t))&&yo(c,e),mw()):yo(c,e),Yu()&&(!u||!pg(t))&&bg(s,e,c,t),t}function o0(t){let e=t;return Ep()?Ew():(e=e.parent,po(e,!1)),e}function GR(t,e){let n=t[Wn];if(!n)return;let r;try{r=n.get(Lt,null)}catch{r=null}r?.(e)}function Sg(t,e,n,r,i){let o=t.inputs?.[r],s=t.hostDirectiveInputs?.[r],c=!1;if(s)for(let u=0;u<s.length;u+=2){let l=s[u],f=s[u+1],p=e.data[l];Kp(p,n[l],f,i),c=!0}if(o)for(let u of o){let l=n[u],f=e.data[u];Kp(f,l,r,i),c=!0}return c}function WR(t,e){let n=Zt(e,t),r=n[J];KR(r,n);let i=n[an];i!==null&&n[uo]===null&&(n[uo]=OI(i,n[Wn])),be(ye.ComponentStart);try{Ag(r,n,n[Fe])}finally{be(ye.ComponentEnd,n[Fe])}}function KR(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}function Ag(t,e,n){Wu(e);try{let r=t.viewQuery;r!==null&&Wp(1,r,n);let i=t.template;i!==null&&t0(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[ui]?.finishViewCreation(t),t.staticContentQueries&&kI(t,e),t.staticViewQueries&&Wp(2,t.viewQuery,n);let o=t.components;o!==null&&QR(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[ne]&=-5,Ku()}}function QR(t,e){for(let n=0;n<e.length;n++)WR(t,e[n])}function Rg(t,e,n,r){let i=Y(null);try{let o=e.tView,c=t[ne]&4096?4096:16,u=_g(t,o,n,c,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null),l=t[e.index];u[ai]=l;let f=t[ui];return f!==null&&(u[ui]=f.createEmbeddedView(o)),Ag(o,u,n),u}finally{Y(i)}}function va(t,e){return!e||e.firstChild===null||TI(t)}function _a(t,e,n,r,i=!1){for(;n!==null;){if(n.type===128){n=i?n.projectionNext:n.next;continue}let o=e[n.index];o!==null&&r.push(Jt(o)),cn(o)&&s0(o,r);let s=n.type;if(s&8)_a(t,e,n.child,r);else if(s&32){let c=wg(n,e),u;for(;u=c();)r.push(u)}else if(s&16){let c=e0(e,n);if(Array.isArray(c))r.push(...c);else{let u=Er(e[jt]);_a(u[J],u,c,r,!0)}}n=i?n.projectionNext:n.next}return r}function s0(t,e){for(let n=Le;n<t.length;n++){let r=t[n],i=r[J].firstChild;i!==null&&_a(r[J],r,i,e)}t[Ir]!==t[an]&&e.push(t[Ir])}function a0(t){if(t[Uu]!==null){for(let e of t[Uu])e.impl.addSequence(e);t[Uu].length=0}}var c0=[];function YR(t){return t[Bt]??JR(t)}function JR(t){let e=c0.pop()??Object.create(XR);return e.lView=t,e}function ZR(t){t.lView[Bt]!==t&&(t.lView=null,c0.push(t))}var XR=De(j({},Zc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{ha(t.lView)},consumerOnSignalRead(){this.lView[Bt]=this}});function ex(t){let e=t[Bt]??Object.create(tx);return e.lView=t,e}var tx=De(j({},Zc),{consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=Er(t.lView);for(;e&&!u0(e[J]);)e=Er(e);e&&pp(e)},consumerOnSignalRead(){this.lView[Bt]=this}});function u0(t){return t.type!==2}function l0(t){if(t[ca]===null)return;let e=!0;for(;e;){let n=!1;for(let r of t[ca])r.dirty&&(n=!0,r.zone===null||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(t[ne]&8192)}}var nx=100;function d0(t,e=0){let r=t[Tn].rendererFactory,i=!1;i||r.begin?.();try{rx(t,e)}finally{i||r.end?.()}}function rx(t,e){let n=wp();try{Ip(!0),Yp(t,e);let r=0;for(;fa(t);){if(r===nx)throw new $(103,!1);r++,Yp(t,1)}}finally{Ip(n)}}function ix(t,e,n,r){if(fi(e))return;let i=e[ne],o=!1,s=!1;Wu(e);let c=!0,u=null,l=null;o||(u0(t)?(l=YR(e),u=eu(l)):Jc()===null?(c=!1,l=ex(e),u=eu(l)):e[Bt]&&(Hs(e[Bt]),e[Bt]=null));try{hp(e),Iw(t.bindingStartIndex),n!==null&&t0(t,e,n,2,r);let f=(i&3)===3;if(!o)if(f){let y=t.preOrderCheckHooks;y!==null&&tl(e,y,null)}else{let y=t.preOrderHooks;y!==null&&nl(e,y,0,null),kp(e,0)}if(s||ox(e),l0(e),f0(e,0),t.contentQueries!==null&&kI(t,e),!o)if(f){let y=t.contentCheckHooks;y!==null&&tl(e,y)}else{let y=t.contentHooks;y!==null&&nl(e,y,1),kp(e,1)}ax(t,e);let p=t.components;p!==null&&p0(e,p,0);let m=t.viewQuery;if(m!==null&&Wp(2,m,r),!o)if(f){let y=t.viewCheckHooks;y!==null&&tl(e,y)}else{let y=t.viewHooks;y!==null&&nl(e,y,2),kp(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[Bu]){for(let y of e[Bu])y();e[Bu]=null}o||(a0(e),e[ne]&=-73)}catch(f){throw o||ha(e),f}finally{l!==null&&(fh(l,u),c&&ZR(l)),Ku()}}function f0(t,e){for(let n=SI(t);n!==null;n=AI(n))for(let r=Le;r<n.length;r++){let i=n[r];h0(i,e)}}function ox(t){for(let e=SI(t);e!==null;e=AI(e)){if(!(e[ne]&2))continue;let n=e[la];for(let r=0;r<n.length;r++){let i=n[r];pp(i)}}}function sx(t,e,n){be(ye.ComponentStart);let r=Zt(e,t);try{h0(r,n)}finally{be(ye.ComponentEnd,r[Fe])}}function h0(t,e){Hu(t)&&Yp(t,e)}function Yp(t,e){let r=t[J],i=t[ne],o=t[Bt],s=!!(e===0&&i&16);if(s||=!!(i&64&&e===0),s||=!!(i&1024),s||=!!(o?.dirty&&tu(o)),s||=!1,o&&(o.dirty=!1),t[ne]&=-9217,s)ix(r,t,r.template,t[Fe]);else if(i&8192){let c=Y(null);try{l0(t),f0(t,1);let u=r.components;u!==null&&p0(t,u,1),a0(t)}finally{Y(c)}}}function p0(t,e,n){for(let r=0;r<e.length;r++)sx(t,e[r],n)}function ax(t,e){let n=t.hostBindingOpCodes;if(n!==null)try{for(let r=0;r<n.length;r++){let i=n[r];if(i<0)br(~i);else{let o=i,s=n[++r],c=n[++r];bw(s,o);let u=e[o];be(ye.HostBindingsUpdateStart,u);try{c(2,u)}finally{be(ye.HostBindingsUpdateEnd,u)}}}}finally{br(-1)}}function xg(t,e){let n=wp()?64:1088;for(t[Tn].changeDetectionScheduler?.notify(e);t;){t[ne]|=n;let r=Er(t);if(ho(t)&&!r)return t;t=r}return null}function g0(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function m0(t,e){let n=Le+e;if(n<t.length)return t[n]}function Rl(t,e,n,r=!0){let i=e[J];if(cx(i,e,t,n),r){let s=Qp(n,t),c=e[Me],u=c.parentNode(t[Ir]);u!==null&&ER(i,t[Yt],c,e,u,s)}let o=e[uo];o!==null&&o.firstChild!==null&&(o.firstChild=null)}function y0(t,e){let n=Ea(t,e);return n!==void 0&&Sl(n[J],n),n}function Ea(t,e){if(t.length<=Le)return;let n=Le+e,r=t[n];if(r){let i=r[ai];i!==null&&i!==t&&Dg(i,r),e>0&&(t[n-1][Qt]=r[Qt]);let o=ia(t,Le+e);_R(r[J],r);let s=o[ui];s!==null&&s.detachView(o[J]),r[nt]=null,r[Qt]=null,r[ne]&=-129}return r}function cx(t,e,n,r){let i=Le+r,o=n.length;r>0&&(n[i-1][Qt]=e),r<o-Le?(e[Qt]=n[i],Xh(n,Le+r,e)):(n.push(e),e[Qt]=null),e[nt]=n;let s=e[ai];s!==null&&n!==s&&v0(s,e);let c=e[ui];c!==null&&c.insertView(t),zu(e),e[ne]|=128}function v0(t,e){let n=t[la],r=e[nt];if(Cn(r))t[ne]|=2;else{let i=r[nt][jt];e[jt]!==i&&(t[ne]|=2)}n===null?t[la]=[e]:n.push(e)}var vi=class{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){let e=this._lView,n=e[J];return _a(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[Fe]}set context(e){this._lView[Fe]=e}get destroyed(){return fi(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[nt];if(cn(e)){let n=e[ua],r=n?n.indexOf(this):-1;r>-1&&(Ea(e,r),ia(n,r))}this._attachedToViewContainer=!1}Sl(this._lView[J],this._lView)}onDestroy(e){gp(this._lView,e)}markForCheck(){xg(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[ne]&=-129}reattach(){zu(this._lView),this._lView[ne]|=128}detectChanges(){this._lView[ne]|=1024,d0(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new $(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;let e=ho(this._lView),n=this._lView[ai];n!==null&&!e&&Dg(n,this._lView),XI(this._lView[J],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new $(902,!1);this._appRef=e;let n=ho(this._lView),r=this._lView[ai];r!==null&&!n&&v0(r,this._lView),zu(this._lView)}};function xl(t,e,n,r,i){let o=t.data[e];if(o===null)o=ux(t,e,n,r,i),Dw()&&(o.flags|=32);else if(o.type&64){o.type=n,o.value=r,o.attrs=i;let s=_w();o.injectorIndex=s===null?-1:s.injectorIndex}return po(o,!0),o}function ux(t,e,n,r,i){let o=_p(),s=Ep(),c=s?o:o&&o.parent,u=t.data[e]=dx(t,c,n,e,r,i);return lx(t,u,o,s),u}function lx(t,e,n,r){t.firstChild===null&&(t.firstChild=e),n!==null&&(r?n.child==null&&e.parent!==null&&(n.child=e):n.next===null&&(n.next=e,e.prev=n))}function dx(t,e,n,r,i,o){let s=e?e.injectorIndex:-1,c=0;return vw()&&(c|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:c,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function fx(t){let e=t[cp]??[],r=t[nt][Me],i=[];for(let o of e)o.data[MI]!==void 0?i.push(o):hx(o,r);t[cp]=i}function hx(t,e){let n=0,r=t.firstChild;if(r){let i=t.data[xI];for(;n<i;){let o=r.nextSibling;UI(e,r,!1),r=o,n++}}}var px=()=>null,gx=()=>null;function Jp(t,e){return px(t,e)}function _0(t,e,n){return gx(t,e,n)}var E0=class{},Ml=class{},Zp=class{resolveComponentFactory(e){throw new $(917,!1)}},Aa=class{static NULL=new Zp},_i=class{},Nl=(()=>{class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>mx()}return t})();function mx(){let t=he(),e=Xt(),n=Zt(e.index,t);return(Cn(n)?n:t)[Me]}var w0=(()=>{class t{static \u0275prov=H({token:t,providedIn:"root",factory:()=>null})}return t})();var rl={},Xp=class{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){let i=this.injector.get(e,rl,r);return i!==rl||n===rl?i:this.parentInjector.get(e,n,r)}};function ll(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(e!==null)for(let s=0;s<e.length;s++){let c=e[s];if(typeof c=="number")o=c;else if(o==1)i=Pu(i,c);else if(o==2){let u=c,l=e[++s];r=Pu(r,u+": "+l+";")}}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}function $t(t,e=0){let n=he();if(n===null)return K(t,e);let r=Xt();return II(r,n,Ot(t),e)}function yx(t,e,n,r,i){let o=r===null?null:{"":-1},s=i(t,n);if(s!==null){let c=s,u=null,l=null;for(let f of s)if(f.resolveHostDirectives!==null){[c,u,l]=f.resolveHostDirectives(s);break}Ex(t,e,n,c,o,u,l)}o!==null&&r!==null&&vx(n,r,o)}function vx(t,e,n){let r=t.localNames=[];for(let i=0;i<e.length;i+=2){let o=n[e[i+1]];if(o==null)throw new $(-301,!1);r.push(e[i],o)}}function _x(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function Ex(t,e,n,r,i,o,s){let c=r.length,u=!1;for(let m=0;m<c;m++){let y=r[m];!u&&di(y)&&(u=!0,_x(t,n,m)),P1(vI(n,e),t,y.type)}Cx(n,t.data.length,c);for(let m=0;m<c;m++){let y=r[m];y.providersResolver&&y.providersResolver(y)}let l=!1,f=!1,p=KI(t,e,c,null);c>0&&(n.directiveToIndex=new Map);for(let m=0;m<c;m++){let y=r[m];if(n.mergedAttrs=wl(n.mergedAttrs,y.hostAttrs),Ix(t,n,e,p,y),Tx(p,y,i),s!==null&&s.has(y)){let[x,S]=s.get(y);n.directiveToIndex.set(y.type,[p,x+n.directiveStart,S+n.directiveStart])}else(o===null||!o.has(y))&&n.directiveToIndex.set(y.type,p);y.contentQueries!==null&&(n.flags|=4),(y.hostBindings!==null||y.hostAttrs!==null||y.hostVars!==0)&&(n.flags|=64);let A=y.type.prototype;!l&&(A.ngOnChanges||A.ngOnInit||A.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),l=!0),!f&&(A.ngOnChanges||A.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),f=!0),p++}wx(t,n,o)}function wx(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){let i=t.data[r];if(n===null||!n.has(i))Yw(0,e,i,r),Yw(1,e,i,r),Zw(e,r,!1);else{let o=n.get(i);Jw(0,e,o,r),Jw(1,e,o,r),Zw(e,r,!0)}}}function Yw(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s;t===0?s=e.inputs??={}:s=e.outputs??={},s[o]??=[],s[o].push(r),I0(e,o)}}function Jw(t,e,n,r){let i=t===0?n.inputs:n.outputs;for(let o in i)if(i.hasOwnProperty(o)){let s=i[o],c;t===0?c=e.hostDirectiveInputs??={}:c=e.hostDirectiveOutputs??={},c[s]??=[],c[s].push(r,o),I0(e,s)}}function I0(t,e){e==="class"?t.flags|=8:e==="style"&&(t.flags|=16)}function Zw(t,e,n){let{attrs:r,inputs:i,hostDirectiveInputs:o}=t;if(r===null||!n&&i===null||n&&o===null||yg(t)){t.initialInputs??=[],t.initialInputs.push(null);return}let s=null,c=0;for(;c<r.length;){let u=r[c];if(u===0){c+=4;continue}else if(u===5){c+=2;continue}else if(typeof u=="number")break;if(!n&&i.hasOwnProperty(u)){let l=i[u];for(let f of l)if(f===e){s??=[],s.push(u,r[c+1]);break}}else if(n&&o.hasOwnProperty(u)){let l=o[u];for(let f=0;f<l.length;f+=2)if(l[f]===e){s??=[],s.push(l[f+1],r[c+1]);break}}c+=2}t.initialInputs??=[],t.initialInputs.push(s)}function Ix(t,e,n,r,i){t.data[r]=i;let o=i.factory||(i.factory=_r(i.type,!0)),s=new ya(o,di(i),$t,null);t.blueprint[r]=s,n[r]=s,Dx(t,e,r,KI(t,n,i.hostVars,At),i)}function Dx(t,e,n,r,i){let o=i.hostBindings;if(o){let s=t.hostBindingOpCodes;s===null&&(s=t.hostBindingOpCodes=[]);let c=~e.index;bx(s)!=c&&s.push(c),s.push(n,r,o)}}function bx(t){let e=t.length;for(;e>0;){let n=t[--e];if(typeof n=="number"&&n<0)return n}return 0}function Tx(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;di(e)&&(n[""]=t)}}function Cx(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function D0(t,e,n,r,i,o,s,c){let u=e[J],l=u.consts,f=Sn(l,s),p=xl(u,t,n,r,f);return o&&yx(u,e,p,Sn(l,c),i),p.mergedAttrs=wl(p.mergedAttrs,p.attrs),p.attrs!==null&&ll(p,p.attrs,!1),p.mergedAttrs!==null&&ll(p,p.mergedAttrs,!0),u.queries!==null&&u.queries.elementStart(u,p),p}function b0(t,e){D1(t,e),up(e)&&t.queries.elementEnd(e)}function Sx(t,e,n,r,i,o){let s=e.consts,c=Sn(s,i),u=xl(e,t,n,r,c);if(u.mergedAttrs=wl(u.mergedAttrs,u.attrs),o!=null){let l=Sn(s,o);u.localNames=[];for(let f=0;f<l.length;f+=2)u.localNames.push(l[f],-1)}return u.attrs!==null&&ll(u,u.attrs,!1),u.mergedAttrs!==null&&ll(u,u.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,u),u}function T0(t,e,n){return t[e]=n}function Ax(t,e){return t[e]}function hn(t,e,n){if(n===At)return!1;let r=t[e];return Object.is(r,n)?!1:(t[e]=n,!0)}function Rx(t,e,n,r){let i=hn(t,e,n);return hn(t,e+1,r)||i}function Vp(t,e,n){return function r(i){let o=Dr(t)?Zt(t.index,e):e;xg(o,5);let s=e[Fe],c=Xw(e,s,n,i),u=r.__ngNextListenerFn__;for(;u;)c=Xw(e,s,u,i)&&c,u=u.__ngNextListenerFn__;return c}}function Xw(t,e,n,r){let i=Y(null);try{return be(ye.OutputStart,e,n),n(r)!==!1}catch(o){return GR(t,o),!1}finally{be(ye.OutputEnd,e,n),Y(i)}}function xx(t,e,n,r,i,o,s,c){let u=$u(t),l=!1,f=null;if(!r&&u&&(f=Nx(e,n,o,t.index)),f!==null){let p=f.__ngLastListenerFn__||f;p.__ngNextListenerFn__=s,f.__ngLastListenerFn__=s,l=!0}else{let p=un(t,n),m=r?r(p):p;W1(n,m,o,c);let y=i.listen(m,o,c);if(!Mx(o)){let A=r?x=>r(Jt(x[t.index])):t.index;C0(A,e,n,o,c,y,!1)}}return l}function Mx(t){return t.startsWith("animation")||t.startsWith("transition")}function Nx(t,e,n,r){let i=t.cleanup;if(i!=null)for(let o=0;o<i.length-1;o+=2){let s=i[o];if(s===n&&i[o+1]===r){let c=e[lo],u=i[o+2];return c&&c.length>u?c[u]:null}typeof s=="string"&&(o+=2)}return null}function C0(t,e,n,r,i,o,s){let c=e.firstCreatePass?pw(e):null,u=hw(n),l=u.length;u.push(i,o),c&&c.push(r,t,l,(l+1)*(s?-1:1))}function eI(t,e,n,r,i,o){let s=e[n],c=e[J],l=c.data[n].outputs[r],p=s[l].subscribe(o);C0(t.index,c,e,i,o,p,!0)}var eg=Symbol("BINDING");var dl=class extends Aa{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let n=wr(e);return new vo(n,this.ngModule)}};function Px(t){return Object.keys(t).map(e=>{let[n,r,i]=t[e],o={propName:n,templateName:e,isSignal:(r&Cl.SignalBased)!==0};return i&&(o.transform=i),o})}function Ox(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}function kx(t,e,n){let r=e instanceof Ue?e:e?.injector;return r&&t.getStandaloneInjector!==null&&(r=t.getStandaloneInjector(r)||r),r?new Xp(n,r):n}function Fx(t){let e=t.get(_i,null);if(e===null)throw new $(407,!1);let n=t.get(w0,null),r=t.get(ei,null);return{rendererFactory:e,sanitizer:n,changeDetectionScheduler:r,ngReflect:!1}}function Lx(t,e){let n=S0(t);return jI(e,n,n==="svg"?lp:n==="math"?cw:null)}function S0(t){return(t.selectors[0][0]||"div").toLowerCase()}var vo=class extends Ml{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=Px(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=Ox(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=dR(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,i,o,s){be(ye.DynamicComponentStart);let c=Y(null);try{let u=this.componentDef,l=Vx(r,u,s,o),f=kx(u,i||this.ngModule,e),p=Fx(f),m=p.rendererFactory.createRenderer(null,u),y=r?PR(m,r,u.encapsulation,f):Lx(u,m),A=s?.some(tI)||o?.some(k=>typeof k!="function"&&k.bindings.some(tI)),x=_g(null,l,null,512|WI(u),null,null,p,m,f,null,OI(y,f,!0));x[Ye]=y,Wu(x);let S=null;try{let k=D0(Ye,x,2,"#host",()=>l.directiveRegistry,!0,0);$I(m,y,k),yo(y,x),n0(l,x,k),FI(l,k,x),b0(l,k),n!==void 0&&Bx(k,this.ngContentSelectors,n),S=Zt(k.index,x),x[Fe]=S[Fe],Ag(l,x,null)}catch(k){throw S!==null&&Gp(S),Gp(x),k}finally{be(ye.DynamicComponentEnd),Ku()}return new fl(this.componentType,x,!!A)}finally{Y(c)}}};function Vx(t,e,n,r){let i=t?["ng-version","21.0.2"]:fR(e.selectors[0]),o=null,s=null,c=0;if(n)for(let f of n)c+=f[eg].requiredVars,f.create&&(f.targetIdx=0,(o??=[]).push(f)),f.update&&(f.targetIdx=0,(s??=[]).push(f));if(r)for(let f=0;f<r.length;f++){let p=r[f];if(typeof p!="function")for(let m of p.bindings){c+=m[eg].requiredVars;let y=f+1;m.create&&(m.targetIdx=y,(o??=[]).push(m)),m.update&&(m.targetIdx=y,(s??=[]).push(m))}}let u=[e];if(r)for(let f of r){let p=typeof f=="function"?f:f.type,m=rp(p);u.push(m)}return vg(0,null,jx(o,s),1,c,u,null,null,null,[i],null)}function jx(t,e){return!t&&!e?null:n=>{if(n&1&&t)for(let r of t)r.create();if(n&2&&e)for(let r of e)r.update()}}function tI(t){let e=t[eg].kind;return e==="input"||e==="twoWay"}var fl=class extends E0{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=da(n[J],Ye),this.location=dg(this._tNode,n),this.instance=Zt(this._tNode.index,n)[Fe],this.hostView=this.changeDetectorRef=new vi(n,void 0),this.componentType=e}setInput(e,n){this._hasInputBindings;let r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;let i=this._rootLView,o=Sg(r,i[J],i,e,n);this.previousInputValues.set(e,n);let s=Zt(r.index,i);xg(s,1)}get injector(){return new mi(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function Bx(t,e,n){let r=t.projection=[];for(let i=0;i<e.length;i++){let o=n[i];r.push(o!=null&&o.length?Array.from(o):null)}}var Ra=(()=>{class t{static __NG_ELEMENT_ID__=Ux}return t})();function Ux(){let t=Xt();return Hx(t,he())}var $x=Ra,A0=class extends $x{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return dg(this._hostTNode,this._hostLView)}get injector(){return new mi(this._hostTNode,this._hostLView)}get parentInjector(){let e=lg(this._hostTNode,this._hostLView);if(gI(e)){let n=sl(e,this._hostLView),r=ol(e),i=n[J].data[r+8];return new mi(i,n)}else return new mi(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let n=nI(this._lContainer);return n!==null&&n[e]||null}get length(){return this._lContainer.length-Le}createEmbeddedView(e,n,r){let i,o;typeof r=="number"?i=r:r!=null&&(i=r.index,o=r.injector);let s=Jp(this._lContainer,e.ssrId),c=e.createEmbeddedViewImpl(n||{},o,s);return this.insertImpl(c,i,va(this._hostTNode,s)),c}createComponent(e,n,r,i,o,s,c){let u=e&&!v1(e),l;if(u)l=n;else{let S=n||{};l=S.index,r=S.injector,i=S.projectableNodes,o=S.environmentInjector||S.ngModuleRef,s=S.directives,c=S.bindings}let f=u?e:new vo(wr(e)),p=r||this.parentInjector;if(!o&&f.ngModule==null){let k=(u?p:this.parentInjector).get(Ue,null);k&&(o=k)}let m=wr(f.componentType??{}),y=Jp(this._lContainer,m?.id??null),A=y?.firstChild??null,x=f.create(p,i,A,o,s,c);return this.insertImpl(x.hostView,l,va(this._hostTNode,y)),x}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){let i=e._lView;if(lw(i)){let c=this.indexOf(e);if(c!==-1)this.detach(c);else{let u=i[nt],l=new A0(u,u[Yt],u[nt]);l.detach(l.indexOf(e))}}let o=this._adjustIndex(n),s=this._lContainer;return Rl(s,i,o,r),e.attachToViewContainerRef(),Xh(jp(s),o,e),e}move(e,n){return this.insert(e,n)}indexOf(e){let n=nI(this._lContainer);return n!==null?n.indexOf(e):-1}remove(e){let n=this._adjustIndex(e,-1),r=Ea(this._lContainer,n);r&&(ia(jp(this._lContainer),n),Sl(r[J],r))}detach(e){let n=this._adjustIndex(e,-1),r=Ea(this._lContainer,n);return r&&ia(jp(this._lContainer),n)!=null?new vi(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function nI(t){return t[ua]}function jp(t){return t[ua]||(t[ua]=[])}function Hx(t,e){let n,r=e[t.index];return cn(r)?n=r:(n=g0(r,e,null,t),e[t.index]=n,Eg(e,n)),qx(n,e,t,r),new A0(n,t,e)}function zx(t,e){let n=t[Me],r=n.createComment(""),i=un(e,t),o=n.parentNode(i);return ul(n,o,r,n.nextSibling(i),!1),r}var qx=Kx,Gx=()=>!1;function Wx(t,e,n){return Gx(t,e,n)}function Kx(t,e,n,r){if(t[Ir])return;let i;n.type&8?i=Jt(r):i=zx(e,n),t[Ir]=i}var Ei=class{},Pl=class{};var hl=class extends Ei{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new dl(this);constructor(e,n,r,i=!0){super(),this.ngModuleType=e,this._parent=n;let o=np(e);this._bootstrapComponents=qI(o.bootstrap),this._r3Injector=Sp(e,n,[{provide:Ei,useValue:this},{provide:Aa,useValue:this.componentFactoryResolver},...r],zn(e),new Set(["environment"])),i&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){let e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}},pl=class extends Pl{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new hl(this.moduleType,e,[])}};var wa=class extends Ei{injector;componentFactoryResolver=new dl(this);instance=null;constructor(e){super();let n=new Xr([...e.providers,{provide:Ei,useValue:this},{provide:Aa,useValue:this.componentFactoryResolver}],e.parent||sa(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function xa(t,e,n=null){return new wa({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}var Qx=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let r=ip(!1,n.type),i=r.length>0?xa([r],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,i)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=H({token:t,providedIn:"environment",factory:()=>new t(K(Ue))})}return t})();function Se(t){return El(()=>{let e=R0(t),n=De(j({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===fg.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?i=>i.get(Qx).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||fn.Emulated,styles:t.styles||Dn,_:null,schemas:t.schemas||null,tView:null,id:""});e.standalone&&Di("NgStandalone"),x0(n);let r=t.dependencies;return n.directiveDefs=rI(r,Yx),n.pipeDefs=rI(r,ew),n.id=Xx(n),n})}function Yx(t){return wr(t)||rp(t)}function Jx(t,e){if(t==null)return ii;let n={};for(let r in t)if(t.hasOwnProperty(r)){let i=t[r],o,s,c,u;Array.isArray(i)?(c=i[0],o=i[1],s=i[2]??o,u=i[3]||null):(o=i,s=i,c=Cl.None,u=null),n[o]=[r,c,u],e[o]=s}return n}function Zx(t){if(t==null)return ii;let e={};for(let n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function Do(t){return El(()=>{let e=R0(t);return x0(e),e})}function Mg(t){return{type:t.type,name:t.name,factory:null,pure:t.pure!==!1,standalone:t.standalone??!0,onDestroy:t.type.prototype.ngOnDestroy||null}}function R0(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||ii,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:t.signals===!0,selectors:t.selectors||Dn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Jx(t.inputs,e),outputs:Zx(t.outputs),debugInfo:null}}function x0(t){t.features?.forEach(e=>e(t))}function rI(t,e){return t?()=>{let n=typeof t=="function"?t():t,r=[];for(let i of n){let o=e(i);o!==null&&r.push(o)}return r}:null}function Xx(t){let e=0,n=typeof t.consts=="function"?"":t.consts,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,n,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(let o of r.join("|"))e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function eM(t,e,n,r,i,o,s,c){if(n.firstCreatePass){t.mergedAttrs=wl(t.mergedAttrs,t.attrs);let f=t.tView=vg(2,t,i,o,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);n.queries!==null&&(n.queries.template(n,t),f.queries=n.queries.embeddedTView(t))}c&&(t.flags|=c),po(t,!1);let u=tM(n,e,t,r);Yu()&&bg(n,e,u,t),yo(u,e);let l=g0(u,e,u,t);e[r+Ye]=l,Eg(e,l),Wx(l,t,e)}function gl(t,e,n,r,i,o,s,c,u,l,f){let p=n+Ye,m;if(e.firstCreatePass){if(m=xl(e,p,4,s||null,c||null),l!=null){let y=Sn(e.consts,l);m.localNames=[];for(let A=0;A<y.length;A+=2)m.localNames.push(y[A],-1)}}else m=e.data[p];return eM(m,t,e,n,r,i,o,u),l!=null&&Cg(t,m,f),m}var tM=nM;function nM(t,e,n,r){return Ju(!0),e[Me].createComment("")}var Ng=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();var Pg=new z("");function bi(t){return!!t&&typeof t.then=="function"}function Ol(t){return!!t&&typeof t.subscribe=="function"}var M0=new z("");var Og=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=P(M0,{optional:!0})??[];injector=P(bn);constructor(){}runInitializers(){if(this.initialized)return;let n=[];for(let i of this.appInits){let o=lt(this.injector,i);if(bi(o))n.push(o);else if(Ol(o)){let s=new Promise((c,u)=>{o.subscribe({complete:c,error:u})});n.push(s)}}let r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(i=>{this.reject(i)}),n.length===0&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),kl=new z("");function N0(){ph(()=>{let t="";throw new $(600,t)})}function P0(t){return t.isBoundToModule}var rM=10;var bo=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=P(Lt);afterRenderManager=P(YI);zonelessEnabled=P(pa);rootEffectScheduler=P(Op);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new ut;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=P(Kn);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(fe(n=>!n))}constructor(){P(Ii,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:i=>{i&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=P(Ue);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,i=bn.NULL){return this._injector.get(kt).run(()=>{be(ye.BootstrapComponentStart);let s=n instanceof Ml;if(!this._injector.get(Og).done){let A="";throw new $(405,A)}let u;s?u=n:u=this._injector.get(Aa).resolveComponentFactory(n),this.componentTypes.push(u.componentType);let l=P0(u)?void 0:this._injector.get(Ei),f=r||u.selector,p=u.create(i,[],f,l),m=p.location.nativeElement,y=p.injector.get(Pg,null);return y?.registerApplication(m),p.onDestroy(()=>{this.detachView(p.hostView),ma(this.components,p),y?.unregisterApplication(m)}),this._loadComponent(p),be(ye.BootstrapComponentEnd,p),p})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){be(ye.ChangeDetectionStart),this.tracingSnapshot!==null?this.tracingSnapshot.run(Ig.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw be(ye.ChangeDetectionEnd),new $(101,!1);let n=Y(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,Y(n),this.afterTick.next(),be(ye.ChangeDetectionEnd)}};synchronize(){this._rendererFactory===null&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(_i,null,{optional:!0}));let n=0;for(;this.dirtyFlags!==0&&n++<rM;){be(ye.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{be(ye.ChangeDetectionSyncEnd)}}}synchronizeOnce(){this.dirtyFlags&16&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(this.dirtyFlags&7){let r=!!(this.dirtyFlags&1);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:i}of this.allViews){if(!r&&!fa(i))continue;let o=r&&!this.zonelessEnabled?0:1;d0(i,o),n=!0}if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),this.dirtyFlags&23)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),this.dirtyFlags&8&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){if(this.allViews.some(({_lView:n})=>fa(n))){this.dirtyFlags|=2;return}else this.dirtyFlags&=-8}attachView(n){let r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){let r=n;ma(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(i){this.internalErrorHandler(i)}this.components.push(n),this._injector.get(kl,[]).forEach(i=>i(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>ma(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new $(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ma(t,e){let n=t.indexOf(e);n>-1&&t.splice(n,1)}function To(t,e,n,r){let i=he(),o=hi();if(hn(i,o,e)){let s=Ft(),c=Qu();HR(c,i,t,e,n,r)}return To}var i$=typeof document<"u"&&typeof document?.documentElement?.getAnimations=="function";var tg=class{destroy(e){}updateValue(e,n){}swap(e,n){let r=Math.min(e,n),i=Math.max(e,n),o=this.detach(i);if(i-r>1){let s=this.detach(r);this.attach(r,o),this.attach(i,s)}else this.attach(r,o)}move(e,n){this.attach(n,this.detach(e))}};function Bp(t,e,n,r,i){return t===n&&Object.is(e,r)?1:Object.is(i(t,e),i(n,r))?-1:0}function iM(t,e,n,r){let i,o,s=0,c=t.length-1,u=void 0;if(Array.isArray(e)){Y(r);let l=e.length-1;for(Y(null);s<=c&&s<=l;){let f=t.at(s),p=e[s],m=Bp(s,f,s,p,n);if(m!==0){m<0&&t.updateValue(s,p),s++;continue}let y=t.at(c),A=e[l],x=Bp(c,y,l,A,n);if(x!==0){x<0&&t.updateValue(c,A),c--,l--;continue}let S=n(s,f),k=n(c,y),q=n(s,p);if(Object.is(q,k)){let ee=n(l,A);Object.is(ee,S)?(t.swap(s,c),t.updateValue(c,A),l--,c--):t.move(c,s),t.updateValue(s,p),s++;continue}if(i??=new ml,o??=oI(t,s,c,n),ng(t,i,s,q))t.updateValue(s,p),s++,c++;else if(o.has(q))i.set(S,t.detach(s)),c--;else{let ee=t.create(s,e[s]);t.attach(s,ee),s++,c++}}for(;s<=l;)iI(t,i,n,s,e[s]),s++}else if(e!=null){Y(r);let l=e[Symbol.iterator]();Y(null);let f=l.next();for(;!f.done&&s<=c;){let p=t.at(s),m=f.value,y=Bp(s,p,s,m,n);if(y!==0)y<0&&t.updateValue(s,m),s++,f=l.next();else{i??=new ml,o??=oI(t,s,c,n);let A=n(s,m);if(ng(t,i,s,A))t.updateValue(s,m),s++,c++,f=l.next();else if(!o.has(A))t.attach(s,t.create(s,m)),s++,c++,f=l.next();else{let x=n(s,p);i.set(x,t.detach(s)),c--}}}for(;!f.done;)iI(t,i,n,t.length,f.value),f=l.next()}for(;s<=c;)t.destroy(t.detach(c--));i?.forEach(l=>{t.destroy(l)})}function ng(t,e,n,r){return e!==void 0&&e.has(r)?(t.attach(n,e.get(r)),e.delete(r),!0):!1}function iI(t,e,n,r,i){if(ng(t,e,r,n(r,i)))t.updateValue(r,i);else{let o=t.create(r,i);t.attach(r,o)}}function oI(t,e,n,r){let i=new Set;for(let o=e;o<=n;o++)i.add(r(o,t.at(o)));return i}var ml=class{kvMap=new Map;_vMap=void 0;has(e){return this.kvMap.has(e)}delete(e){if(!this.has(e))return!1;let n=this.kvMap.get(e);return this._vMap!==void 0&&this._vMap.has(n)?(this.kvMap.set(e,this._vMap.get(n)),this._vMap.delete(n)):this.kvMap.delete(e),!0}get(e){return this.kvMap.get(e)}set(e,n){if(this.kvMap.has(e)){let r=this.kvMap.get(e);this._vMap===void 0&&(this._vMap=new Map);let i=this._vMap;for(;i.has(r);)r=i.get(r);i.set(r,n)}else this.kvMap.set(e,n)}forEach(e){for(let[n,r]of this.kvMap)if(e(r,n),this._vMap!==void 0){let i=this._vMap;for(;i.has(r);)r=i.get(r),e(r,n)}}};function dt(t,e,n,r,i,o,s,c){Di("NgControlFlow");let u=he(),l=Ft(),f=Sn(l.consts,o);return gl(u,l,t,e,n,r,i,f,256,s,c),Cr}function Cr(t,e,n,r,i,o,s,c){Di("NgControlFlow");let u=he(),l=Ft(),f=Sn(l.consts,o);return gl(u,l,t,e,n,r,i,f,512,s,c),Cr}function ft(t,e){Di("NgControlFlow");let n=he(),r=hi(),i=n[r]!==At?n[r]:-1,o=i!==-1?yl(n,Ye+i):void 0,s=0;if(hn(n,r,t)){let c=Y(null);try{if(o!==void 0&&y0(o,s),t!==-1){let u=Ye+t,l=yl(n,u),f=sg(n[J],u),p=_0(l,f,n),m=Rg(n,f,e,{dehydratedView:p});Rl(l,m,s,va(f,p))}}finally{Y(c)}}else if(o!==void 0){let c=m0(o,s);c!==void 0&&(c[Fe]=e)}}var rg=class{lContainer;$implicit;$index;constructor(e,n,r){this.lContainer=e,this.$implicit=n,this.$index=r}get $count(){return this.lContainer.length-Le}};function Yn(t){return t}function Fl(t,e){return e}var ig=class{hasEmptyBlock;trackByFn;liveCollection;constructor(e,n,r){this.hasEmptyBlock=e,this.trackByFn=n,this.liveCollection=r}};function Je(t,e,n,r,i,o,s,c,u,l,f,p,m){Di("NgControlFlow");let y=he(),A=Ft(),x=u!==void 0,S=he(),k=c?s.bind(S[jt][Fe]):s,q=new ig(x,k);S[Ye+t]=q,gl(y,A,t+1,e,n,r,i,Sn(A.consts,o),256),x&&gl(y,A,t+2,u,l,f,p,Sn(A.consts,m),512)}var og=class extends tg{lContainer;hostLView;templateTNode;operationsCounter=void 0;needsIndexUpdate=!1;constructor(e,n,r){super(),this.lContainer=e,this.hostLView=n,this.templateTNode=r}get length(){return this.lContainer.length-Le}at(e){return this.getLView(e)[Fe].$implicit}attach(e,n){let r=n[uo];this.needsIndexUpdate||=e!==this.length,Rl(this.lContainer,n,e,va(this.templateTNode,r)),oM(this.lContainer,e)}detach(e){return this.needsIndexUpdate||=e!==this.length-1,sM(this.lContainer,e),aM(this.lContainer,e)}create(e,n){let r=Jp(this.lContainer,this.templateTNode.tView.ssrId),i=Rg(this.hostLView,this.templateTNode,new rg(this.lContainer,n,e),{dehydratedView:r});return this.operationsCounter?.recordCreate(),i}destroy(e){Sl(e[J],e),this.operationsCounter?.recordDestroy()}updateValue(e,n){this.getLView(e)[Fe].$implicit=n}reset(){this.needsIndexUpdate=!1,this.operationsCounter?.reset()}updateIndexes(){if(this.needsIndexUpdate)for(let e=0;e<this.length;e++)this.getLView(e)[Fe].$index=e}getLView(e){return cM(this.lContainer,e)}};function Ze(t){let e=Y(null),n=An();try{let r=he(),i=r[J],o=r[n],s=n+1,c=yl(r,s);if(o.liveCollection===void 0){let l=sg(i,s);o.liveCollection=new og(c,r,l)}else o.liveCollection.reset();let u=o.liveCollection;if(iM(u,t,o.trackByFn,e),u.updateIndexes(),o.hasEmptyBlock){let l=hi(),f=u.length===0;if(hn(r,l,f)){let p=n+2,m=yl(r,p);if(f){let y=sg(i,p),A=_0(m,y,r),x=Rg(r,y,void 0,{dehydratedView:A});Rl(m,x,0,va(y,A))}else i.firstUpdatePass&&fx(m),y0(m,0)}}}finally{Y(e)}}function yl(t,e){return t[e]}function oM(t,e){if(t.length<=Le)return;let n=Le+e,r=t[n],i=r?r[li]:void 0;if(r&&i&&i.detachedLeaveAnimationFns&&i.detachedLeaveAnimationFns.length>0){let o=r[Wn];yR(o,i),yi.delete(r),i.detachedLeaveAnimationFns=void 0}}function sM(t,e){if(t.length<=Le)return;let n=Le+e,r=t[n],i=r?r[li]:void 0;i&&i.leave&&i.leave.size>0&&(i.detachedLeaveAnimationFns=[])}function aM(t,e){return Ea(t,e)}function cM(t,e){return m0(t,e)}function sg(t,e){return da(t,e)}function me(t,e,n){let r=he(),i=hi();if(hn(r,i,e)){let o=Ft(),s=Qu();LR(s,r,t,e,r[Me],n)}return me}function ag(t,e,n,r,i){Sg(e,t,n,i?"class":"style",r)}function R(t,e,n,r){let i=he(),o=i[J],s=t+Ye,c=o.firstCreatePass?D0(s,i,2,e,$R,yw(),n,r):o.data[s];if(i0(c,i,t,e,O0),$u(c)){let u=i[J];n0(u,i,c),FI(u,c,i)}return r!=null&&Cg(i,c),R}function M(){let t=Ft(),e=Xt(),n=o0(e);return t.firstCreatePass&&b0(t,n),yp(n)&&vp(),mp(),n.classesWithoutHost!=null&&T1(n)&&ag(t,n,he(),n.classesWithoutHost,!0),n.stylesWithoutHost!=null&&C1(n)&&ag(t,n,he(),n.stylesWithoutHost,!1),M}function Q(t,e,n,r){return R(t,e,n,r),M(),Q}function rt(t,e,n,r){let i=he(),o=i[J],s=t+Ye,c=o.firstCreatePass?Sx(s,o,2,e,n,r):o.data[s];return i0(c,i,t,e,O0),r!=null&&Cg(i,c),rt}function it(){let t=Xt(),e=o0(t);return yp(e)&&vp(),mp(),it}function Co(t,e,n,r){return rt(t,e,n,r),it(),Co}var O0=(t,e,n,r,i)=>(Ju(!0),jI(e[Me],r,Mw()));function Sr(){return he()}function So(t,e,n){let r=he(),i=hi();if(hn(r,i,e)){let o=Ft(),s=Qu();r0(s,r,t,e,r[Me],n)}return So}var Ma="en-US";var uM=Ma;function k0(t){typeof t=="string"&&(uM=t.toLowerCase().replace(/_/g,"-"))}function ht(t,e,n){let r=he(),i=Ft(),o=Xt();return lM(i,r,r[Me],o,t,e,n),ht}function lM(t,e,n,r,i,o,s){let c=!0,u=null;if((r.type&3||s)&&(u??=Vp(r,e,o),xx(r,t,e,s,n,i,o,u)&&(c=!1)),c){let l=r.outputs?.[i],f=r.hostDirectiveOutputs?.[i];if(f&&f.length)for(let p=0;p<f.length;p+=2){let m=f[p],y=f[p+1];u??=Vp(r,e,o),eI(r,e,m,y,i,u)}if(l&&l.length)for(let p of l)u??=Vp(r,e,o),eI(r,e,p,i,i,u)}}function ie(t=1){return xw(t)}function el(t,e){return t<<17|e<<2}function wi(t){return t>>17&32767}function dM(t){return(t&2)==2}function fM(t,e){return t&131071|e<<17}function cg(t){return t|2}function _o(t){return(t&131068)>>2}function Up(t,e){return t&-131069|e<<2}function hM(t){return(t&1)===1}function ug(t){return t|1}function pM(t,e,n,r,i,o){let s=o?e.classBindings:e.styleBindings,c=wi(s),u=_o(s);t[r]=n;let l=!1,f;if(Array.isArray(n)){let p=n;f=p[1],(f===null||co(p,f)>0)&&(l=!0)}else f=n;if(i)if(u!==0){let m=wi(t[c+1]);t[r+1]=el(m,c),m!==0&&(t[m+1]=Up(t[m+1],r)),t[c+1]=fM(t[c+1],r)}else t[r+1]=el(c,0),c!==0&&(t[c+1]=Up(t[c+1],r)),c=r;else t[r+1]=el(u,0),c===0?c=r:t[u+1]=Up(t[u+1],r),u=r;l&&(t[r+1]=cg(t[r+1])),sI(t,f,r,!0),sI(t,f,r,!1),gM(e,f,t,r,o),s=el(c,u),o?e.classBindings=s:e.styleBindings=s}function gM(t,e,n,r,i){let o=i?t.residualClasses:t.residualStyles;o!=null&&typeof e=="string"&&co(o,e)>=0&&(n[r+1]=ug(n[r+1]))}function sI(t,e,n,r){let i=t[n+1],o=e===null,s=r?wi(i):_o(i),c=!1;for(;s!==0&&(c===!1||o);){let u=t[s],l=t[s+1];mM(u,e)&&(c=!0,t[s+1]=r?ug(l):cg(l)),s=r?wi(l):_o(l)}c&&(t[n+1]=r?cg(i):ug(i))}function mM(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?co(t,e)>=0:!1}var dn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function yM(t){return t.substring(dn.key,dn.keyEnd)}function vM(t){return _M(t),F0(t,L0(t,0,dn.textEnd))}function F0(t,e){let n=dn.textEnd;return n===e?-1:(e=dn.keyEnd=EM(t,dn.key=e,n),L0(t,e,n))}function _M(t){dn.key=0,dn.keyEnd=0,dn.value=0,dn.valueEnd=0,dn.textEnd=t.length}function L0(t,e,n){for(;e<n&&t.charCodeAt(e)<=32;)e++;return e}function EM(t,e,n){for(;e<n&&t.charCodeAt(e)>32;)e++;return e}function Ao(t,e,n){return V0(t,e,n,!1),Ao}function vt(t,e){return V0(t,e,null,!0),vt}function Ti(t){IM(AM,wM,t,!0)}function wM(t,e){for(let n=vM(e);n>=0;n=F0(e,n))Vu(t,yM(e),!0)}function V0(t,e,n,r){let i=he(),o=Ft(),s=qu(2);if(o.firstUpdatePass&&B0(o,t,s,r),e!==At&&hn(i,s,e)){let c=o.data[An()];U0(o,c,i,i[Me],t,i[s+1]=xM(e,n),r,s)}}function IM(t,e,n,r){let i=Ft(),o=qu(2);i.firstUpdatePass&&B0(i,null,o,r);let s=he();if(n!==At&&hn(s,o,n)){let c=i.data[An()];if($0(c,r)&&!j0(i,o)){let u=r?c.classesWithoutHost:c.stylesWithoutHost;u!==null&&(n=Pu(u,n||"")),ag(i,c,s,n,r)}else RM(i,c,s,s[Me],s[o+1],s[o+1]=SM(t,e,n),r,o)}}function j0(t,e){return e>=t.expandoStartIndex}function B0(t,e,n,r){let i=t.data;if(i[n+1]===null){let o=i[An()],s=j0(t,n);$0(o,r)&&e===null&&!s&&(e=!1),e=DM(i,o,e,r),pM(i,o,e,n,s,r)}}function DM(t,e,n,r){let i=Cw(t),o=r?e.residualClasses:e.residualStyles;if(i===null)(r?e.classBindings:e.styleBindings)===0&&(n=$p(null,t,e,n,r),n=Ia(n,e.attrs,r),o=null);else{let s=e.directiveStylingLast;if(s===-1||t[s]!==i)if(n=$p(i,t,e,n,r),o===null){let u=bM(t,e,r);u!==void 0&&Array.isArray(u)&&(u=$p(null,t,e,u[1],r),u=Ia(u,e.attrs,r),TM(t,e,r,u))}else o=CM(t,e,r)}return o!==void 0&&(r?e.residualClasses=o:e.residualStyles=o),n}function bM(t,e,n){let r=n?e.classBindings:e.styleBindings;if(_o(r)!==0)return t[wi(r)]}function TM(t,e,n,r){let i=n?e.classBindings:e.styleBindings;t[wi(i)]=r}function CM(t,e,n){let r,i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++){let s=t[o].hostAttrs;r=Ia(r,s,n)}return Ia(r,e.attrs,n)}function $p(t,e,n,r,i){let o=null,s=n.directiveEnd,c=n.directiveStylingLast;for(c===-1?c=n.directiveStart:c++;c<s&&(o=e[c],r=Ia(r,o.hostAttrs,i),o!==t);)c++;return t!==null&&(n.directiveStylingLast=c),r}function Ia(t,e,n){let r=n?1:2,i=-1;if(e!==null)for(let o=0;o<e.length;o++){let s=e[o];typeof s=="number"?i=s:i===r&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),Vu(t,s,n?!0:e[++o]))}return t===void 0?null:t}function SM(t,e,n){if(n==null||n==="")return Dn;let r=[],i=Sa(n);if(Array.isArray(i))for(let o=0;o<i.length;o++)t(r,i[o],!0);else if(typeof i=="object")for(let o in i)i.hasOwnProperty(o)&&t(r,o,i[o]);else typeof i=="string"&&e(r,i);return r}function AM(t,e,n){let r=String(e);r!==""&&!r.includes(" ")&&Vu(t,r,n)}function RM(t,e,n,r,i,o,s,c){i===At&&(i=Dn);let u=0,l=0,f=0<i.length?i[0]:null,p=0<o.length?o[0]:null;for(;f!==null||p!==null;){let m=u<i.length?i[u+1]:void 0,y=l<o.length?o[l+1]:void 0,A=null,x;f===p?(u+=2,l+=2,m!==y&&(A=p,x=y)):p===null||f!==null&&f<p?(u+=2,A=f):(l+=2,A=p,x=y),A!==null&&U0(t,e,n,r,A,x,s,c),f=u<i.length?i[u]:null,p=l<o.length?o[l]:null}}function U0(t,e,n,r,i,o,s,c){if(!(e.type&3))return;let u=t.data,l=u[c+1],f=hM(l)?aI(u,e,n,i,_o(l),s):void 0;if(!vl(f)){vl(o)||dM(l)&&(o=aI(u,null,n,i,c,s));let p=dp(An(),n);NR(r,s,p,i,o)}}function aI(t,e,n,r,i,o){let s=e===null,c;for(;i>0;){let u=t[i],l=Array.isArray(u),f=l?u[1]:u,p=f===null,m=n[i+1];m===At&&(m=p?Dn:void 0);let y=p?ju(m,r):f===r?m:void 0;if(l&&!vl(y)&&(y=ju(u,r)),vl(y)&&(c=y,s))return c;let A=t[i+1];i=s?wi(A):_o(A)}if(e!==null){let u=o?e.residualClasses:e.residualStyles;u!=null&&(c=ju(u,r))}return c}function vl(t){return t!==void 0}function xM(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=zn(Sa(t)))),t}function $0(t,e){return(t.flags&(e?8:16))!==0}function F(t,e=""){let n=he(),r=Ft(),i=t+Ye,o=r.firstCreatePass?xl(r,i,1,e,null):r.data[i],s=MM(r,n,o,e,t);n[i]=s,Yu()&&bg(r,n,s,o),po(o,!1)}var MM=(t,e,n,r,i)=>(Ju(!0),J1(e[Me],r));function NM(t,e,n,r=""){return hn(t,hi(),n)?e+ri(n)+r:At}function PM(t,e,n,r,i,o=""){let s=ww(),c=Rx(t,s,n,i);return qu(2),c?e+ri(n)+r+ri(i)+o:At}function He(t){return Te("",t),He}function Te(t,e,n){let r=he(),i=NM(r,t,e,n);return i!==At&&H0(r,An(),i),Te}function Ll(t,e,n,r,i){let o=he(),s=PM(o,t,e,n,r,i);return s!==At&&H0(o,An(),s),Ll}function H0(t,e,n){let r=dp(e,t);Z1(t[Me],r,n)}function Vl(t,e,n){let r=Dp()+t,i=he();return i[r]===At?T0(i,r,n?e.call(n):e()):Ax(i,r)}function OM(t,e){let n=t[e];return n===At?void 0:n}function kM(t,e,n,r,i,o){let s=e+n;return hn(t,s,i)?T0(t,s+1,o?r.call(o,i):r(i)):OM(t,s+1)}function pt(t,e){let n=Ft(),r,i=t+Ye;n.firstCreatePass?(r=FM(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks??=[]).push(i,r.onDestroy)):r=n.data[i];let o=r.factory||(r.factory=_r(r.type,!0)),s,c=bt($t);try{let u=al(!1),l=o();return al(u),fp(n,he(),i,l),l}finally{bt(c)}}function FM(t,e){if(e)for(let n=e.length-1;n>=0;n--){let r=e[n];if(t===r.name)return r}}function gt(t,e,n){let r=t+Ye,i=he(),o=uw(i,r);return LM(i,r)?kM(i,Dp(),e,o.transform,n,o):o.transform(n)}function LM(t,e){return t[J].data[e].pure}var _l=class{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}},kg=(()=>{class t{compileModuleSync(n){return new pl(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){let r=this.compileModuleSync(n),i=np(n),o=qI(i.declarations).reduce((s,c)=>{let u=wr(c);return u&&s.push(new vo(u)),s},[]);return new _l(r,o)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var z0=(()=>{class t{applicationErrorHandler=P(Lt);appRef=P(bo);taskService=P(Kn);ngZone=P(kt);zonelessEnabled=P(pa);tracing=P(Ii,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new ct;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ea):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(P(Pp,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{this.runningTick||this.cleanup()})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}notify(n){if(!this.zonelessEnabled&&n===5)return;switch(n){case 0:{this.appRef.dirtyFlags|=2;break}case 3:case 2:case 4:case 5:case 1:{this.appRef.dirtyFlags|=4;break}case 6:{this.appRef.dirtyFlags|=2;break}case 12:{this.appRef.dirtyFlags|=16;break}case 13:{this.appRef.dirtyFlags|=2;break}case 11:break;case 9:case 8:case 7:case 10:default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;let r=this.useMicrotaskScheduler?Rp:Ap;this.pendingRenderTaskId=this.taskService.add(),this.scheduleInRootZone?this.cancelScheduledCallback=Zone.root.run(()=>r(()=>this.tick())):this.cancelScheduledCallback=this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||this.pendingRenderTaskId!==null||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ea+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(this.appRef.dirtyFlags===0){this.cleanup();return}!this.zonelessEnabled&&this.appRef.dirtyFlags&7&&(this.appRef.dirtyFlags|=1);let n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.taskService.remove(n),this.applicationErrorHandler(r)}finally{this.cleanup()}this.useMicrotaskScheduler=!0,Rp(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,this.pendingRenderTaskId!==null){let n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function q0(){return[{provide:ei,useExisting:z0},{provide:kt,useClass:ta},{provide:pa,useValue:!0}]}function VM(){return typeof $localize<"u"&&$localize.locale||Ma}var jl=new z("",{factory:()=>P(jl,{optional:!0,skipSelf:!0})||VM()});var W0=Symbol("InputSignalNode#UNSET"),iN=De(j({},nu),{transformFn:void 0,applyValueToInputSignal(t,e){zs(t,e)}});function K0(t,e){let n=Object.create(iN);n.value=t,n.transformFn=e?.transform;function r(){if(Xc(n),n.value===W0){let i=null;throw new $(-950,i)}return n.value}return r[Gt]=n,r}var Ul=class{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>ba(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}};function G0(t,e){return K0(t,e)}function oN(t){return K0(W0,t)}var Q0=(G0.required=oN,G0);var Fg=new z(""),sN=new z("");function Na(t){return!t.moduleRef}function aN(t){let e=Na(t)?t.r3Injector:t.moduleRef.injector,n=e.get(kt);return n.run(()=>{Na(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();let r=e.get(Lt),i;if(n.runOutsideAngular(()=>{i=n.onError.subscribe({next:r})}),Na(t)){let o=()=>e.destroy(),s=t.platformInjector.get(Fg);s.add(o),e.onDestroy(()=>{i.unsubscribe(),s.delete(o)})}else{let o=()=>t.moduleRef.destroy(),s=t.platformInjector.get(Fg);s.add(o),t.moduleRef.onDestroy(()=>{ma(t.allPlatformModules,t.moduleRef),i.unsubscribe(),s.delete(o)})}return uN(r,n,()=>{let o=e.get(Kn),s=o.add(),c=e.get(Og);return c.runInitializers(),c.donePromise.then(()=>{let u=e.get(jl,Ma);if(k0(u||Ma),!e.get(sN,!0))return Na(t)?e.get(bo):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Na(t)){let f=e.get(bo);return t.rootComponent!==void 0&&f.bootstrap(t.rootComponent),f}else return cN?.(t.moduleRef,t.allPlatformModules),t.moduleRef}).finally(()=>void o.remove(s))})})}var cN;function uN(t,e,n){try{let r=n();return bi(r)?r.catch(i=>{throw e.runOutsideAngular(()=>t(i)),i}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}var Bl=null;function lN(t=[],e){return bn.create({name:e,providers:[{provide:oa,useValue:"platform"},{provide:Fg,useValue:new Set([()=>Bl=null])},...t]})}function dN(t=[]){if(Bl)return Bl;let e=lN(t);return Bl=e,N0(),fN(e),e}function fN(t){let e=t.get(Dl,null);lt(t,()=>{e?.forEach(n=>n())})}var Jn=(()=>{class t{static __NG_ELEMENT_ID__=hN}return t})();function hN(t){return pN(Xt(),he(),(t&16)===16)}function pN(t,e,n){if(Dr(t)&&!n){let r=Zt(t.index,e);return new vi(r,r)}else if(t.type&175){let r=e[jt];return new vi(r,e)}return null}function Y0(t){let{rootComponent:e,appProviders:n,platformProviders:r,platformRef:i}=t;be(ye.BootstrapApplicationStart);try{let o=i?.injector??dN(r),s=[q0(),kw,...n||[]],c=new wa({providers:s,parent:o,debugName:"",runEnvironmentInitializers:!1});return aN({r3Injector:c.injector,platformInjector:o,rootComponent:e})}catch(o){return Promise.reject(o)}finally{be(ye.BootstrapApplicationEnd)}}function $l(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var X0=null;function Zn(){return X0}function Lg(t){X0??=t}var Oa=class{},Vg=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>P(eD),providedIn:"platform"})}return t})();var eD=(()=>{class t extends Vg{_location;_history;_doc=P($e);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Zn().getBaseHref(this._doc)}onPopState(n){let r=Zn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){let r=Zn().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,i){this._history.pushState(n,r,i)}replaceState(n,r,i){this._history.replaceState(n,r,i)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function tD(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function J0(t){let e=t.search(/#|\?|$/);return t[e-1]==="/"?t.slice(0,e-1)+t.slice(e):t}function Ar(t){return t&&t[0]!=="?"?`?${t}`:t}var Ro=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>P(rD),providedIn:"root"})}return t})(),nD=new z(""),rD=(()=>{class t extends Ro{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??P($e).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return tD(this._baseHref,n)}path(n=!1){let r=this._platformLocation.pathname+Ar(this._platformLocation.search),i=this._platformLocation.hash;return i&&n?`${r}${i}`:r}pushState(n,r,i,o){let s=this.prepareExternalUrl(i+Ar(o));this._platformLocation.pushState(n,r,s)}replaceState(n,r,i,o){let s=this.prepareExternalUrl(i+Ar(o));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(K(Vg),K(nD,8))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),xo=(()=>{class t{_subject=new ut;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;let r=this._locationStrategy.getBaseHref();this._basePath=yN(J0(Z0(r))),this._locationStrategy.onPopState(i=>{this._subject.next({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Ar(r))}normalize(n){return t.stripTrailingSlash(mN(this._basePath,Z0(n)))}prepareExternalUrl(n){return n&&n[0]!=="/"&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",i=null){this._locationStrategy.pushState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ar(r)),i)}replaceState(n,r="",i=null){this._locationStrategy.replaceState(i,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ar(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{let r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),this._urlChangeListeners.length===0&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(i=>i(n,r))}subscribe(n,r,i){return this._subject.subscribe({next:n,error:r??void 0,complete:i??void 0})}static normalizeQueryParams=Ar;static joinWithSlash=tD;static stripTrailingSlash=J0;static \u0275fac=function(r){return new(r||t)(K(Ro))};static \u0275prov=H({token:t,factory:()=>gN(),providedIn:"root"})}return t})();function gN(){return new xo(K(Ro))}function mN(t,e){if(!t||!e.startsWith(t))return e;let n=e.substring(t.length);return n===""||["/",";","?","#"].includes(n[0])?n:e}function Z0(t){return t.replace(/\/index.html$/,"")}function yN(t){if(new RegExp("^(https?:)?//").test(t)){let[,n]=t.split(/\/\/[^\/]+/);return n}return t}function vN(t,e){return new $(2100,!1)}var jg=class{createSubscription(e,n,r){return Ut(()=>e.subscribe({next:n,error:r}))}dispose(e){Ut(()=>e.unsubscribe())}},Bg=class{createSubscription(e,n,r){return e.then(i=>n?.(i),i=>r?.(i)),{unsubscribe:()=>{n=null,r=null}}}dispose(e){e.unsubscribe()}},_N=new Bg,EN=new jg,ka=(()=>{class t{_ref;_latestValue=null;markForCheckOnValueUpdate=!0;_subscription=null;_obj=null;_strategy=null;applicationErrorHandler=P(Lt);constructor(n){this._ref=n}ngOnDestroy(){this._subscription&&this._dispose(),this._ref=null}transform(n){if(!this._obj){if(n)try{this.markForCheckOnValueUpdate=!1,this._subscribe(n)}finally{this.markForCheckOnValueUpdate=!0}return this._latestValue}return n!==this._obj?(this._dispose(),this.transform(n)):this._latestValue}_subscribe(n){this._obj=n,this._strategy=this._selectStrategy(n),this._subscription=this._strategy.createSubscription(n,r=>this._updateLatestValue(n,r),r=>this.applicationErrorHandler(r))}_selectStrategy(n){if(bi(n))return _N;if(Ol(n))return EN;throw vN(t,n)}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(n,r){n===this._obj&&(this._latestValue=r,this.markForCheckOnValueUpdate&&this._ref?.markForCheck())}static \u0275fac=function(r){return new(r||t)($t(Jn,16))};static \u0275pipe=Mg({name:"async",type:t,pure:!1})}return t})();function Fa(t,e){e=encodeURIComponent(e);for(let n of t.split(";")){let r=n.indexOf("="),[i,o]=r==-1?[n,""]:[n.slice(0,r),n.slice(r+1)];if(i.trim()===e)return decodeURIComponent(o)}return null}var Ci=class{};var iD="browser";var La=class{_doc;constructor(e){this._doc=e}manager},Hl=(()=>{class t extends La{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,i,o){return n.addEventListener(r,i,o),()=>this.removeEventListener(n,r,i,o)}removeEventListener(n,r,i,o){return n.removeEventListener(r,i,o)}static \u0275fac=function(r){return new(r||t)(K($e))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),Gl=new z(""),zg=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});let i=n.filter(s=>!(s instanceof Hl));this._plugins=i.slice().reverse();let o=n.find(s=>s instanceof Hl);o&&this._plugins.push(o)}addEventListener(n,r,i,o){return this._findPluginFor(r).addEventListener(n,r,i,o)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(o=>o.supports(n)),!r)throw new $(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(K(Gl),K(kt))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),Ug="ng-app-id";function oD(t){for(let e of t)e.remove()}function sD(t,e){let n=e.createElement("style");return n.textContent=t,n}function bN(t,e,n,r){let i=t.head?.querySelectorAll(`style[${Ug}="${e}"],link[${Ug}="${e}"]`);if(i)for(let o of i)o.removeAttribute(Ug),o instanceof HTMLLinkElement?r.set(o.href.slice(o.href.lastIndexOf("/")+1),{usage:0,elements:[o]}):o.textContent&&n.set(o.textContent,{usage:0,elements:[o]})}function Hg(t,e){let n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}var qg=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,i,o={}){this.doc=n,this.appId=r,this.nonce=i,bN(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(let i of n)this.addUsage(i,this.inline,sD);r?.forEach(i=>this.addUsage(i,this.external,Hg))}removeStyles(n,r){for(let i of n)this.removeUsage(i,this.inline);r?.forEach(i=>this.removeUsage(i,this.external))}addUsage(n,r,i){let o=r.get(n);o?o.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,i(n,this.doc)))})}removeUsage(n,r){let i=r.get(n);i&&(i.usage--,i.usage<=0&&(oD(i.elements),r.delete(n)))}ngOnDestroy(){for(let[,{elements:n}]of[...this.inline,...this.external])oD(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(let[r,{elements:i}]of this.inline)i.push(this.addElement(n,sD(r,this.doc)));for(let[r,{elements:i}]of this.external)i.push(this.addElement(n,Hg(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(K($e),K(Il),K(bl,8),K(Ca))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),$g={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},Gg=/%COMP%/g;var cD="%COMP%",TN=`_nghost-${cD}`,CN=`_ngcontent-${cD}`,SN=!0,AN=new z("",{factory:()=>SN});function RN(t){return CN.replace(Gg,t)}function xN(t){return TN.replace(Gg,t)}function uD(t,e){return e.map(n=>n.replace(Gg,t))}var Wg=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;platformIsServer;constructor(n,r,i,o,s,c,u=null,l=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestroy=o,this.doc=s,this.ngZone=c,this.nonce=u,this.tracingService=l,this.platformIsServer=!1,this.defaultRenderer=new Va(n,s,c,this.platformIsServer,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;let i=this.getOrCreateRenderer(n,r);return i instanceof ql?i.applyToHost(n):i instanceof ja&&i.applyStyles(),i}getOrCreateRenderer(n,r){let i=this.rendererByCompId,o=i.get(r.id);if(!o){let s=this.doc,c=this.ngZone,u=this.eventManager,l=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,p=this.platformIsServer,m=this.tracingService;switch(r.encapsulation){case fn.Emulated:o=new ql(u,l,r,this.appId,f,s,c,p,m);break;case fn.ShadowDom:return new zl(u,n,r,s,c,this.nonce,p,m,l);case fn.ExperimentalIsolatedShadowDom:return new zl(u,n,r,s,c,this.nonce,p,m);default:o=new ja(u,l,r,f,s,c,p,m);break}i.set(r.id,o)}return o}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(K(zg),K(qg),K(Il),K(AN),K($e),K(kt),K(bl),K(Ii,8))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),Va=class{eventManager;doc;ngZone;platformIsServer;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,i,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.platformIsServer=i,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS($g[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(aD(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(aD(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r=typeof e=="string"?this.doc.querySelector(e):e;if(!r)throw new $(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,i){if(i){n=i+":"+n;let o=$g[i];o?e.setAttributeNS(o,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){let i=$g[r];i?e.removeAttributeNS(i,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,i){i&(xn.DashCase|xn.Important)?e.style.setProperty(n,r,i&xn.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&xn.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){e!=null&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,i){if(typeof e=="string"&&(e=Zn().getGlobalEventTarget(this.doc,e),!e))throw new $(5102,!1);let o=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(o=this.tracingService.wrapEventListener(e,n,o)),this.eventManager.addEventListener(e,n,o,i)}decoratePreventDefault(e){return n=>{if(n==="__ngUnwrap__")return e;e(n)===!1&&n.preventDefault()}}};function aD(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var zl=class extends Va{hostEl;sharedStylesHost;shadowRoot;constructor(e,n,r,i,o,s,c,u,l){super(e,i,o,c,u),this.hostEl=n,this.sharedStylesHost=l,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let f=r.styles;f=uD(r.id,f);for(let m of f){let y=document.createElement("style");s&&y.setAttribute("nonce",s),y.textContent=m,this.shadowRoot.appendChild(y)}let p=r.getExternalStyles?.();if(p)for(let m of p){let y=Hg(m,i);s&&y.setAttribute("nonce",s),this.shadowRoot.appendChild(y)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}},ja=class extends Va{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,i,o,s,c,u,l){super(e,o,s,c,u),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=i;let f=r.styles;this.styles=l?uD(l,f):f,this.styleUrls=r.getExternalStyles?.(l)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&yi.size===0&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}},ql=class extends ja{contentAttr;hostAttr;constructor(e,n,r,i,o,s,c,u,l){let f=i+"-"+r.id;super(e,n,r,o,s,c,u,l,f),this.contentAttr=RN(f),this.hostAttr=xN(f)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){let r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}};var Wl=class t extends Oa{supportsDOMEvents=!0;static makeCurrent(){Lg(new t)}onAndCancel(e,n,r,i){return e.addEventListener(n,r,i),()=>{e.removeEventListener(n,r,i)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return n=n||this.getDefaultDocument(),n.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return n==="window"?window:n==="document"?e:n==="body"?e.body:null}getBaseHref(e){let n=MN();return n==null?null:NN(n)}resetBaseElement(){Ba=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return Fa(document.cookie,e)}},Ba=null;function MN(){return Ba=Ba||document.head.querySelector("base"),Ba?Ba.getAttribute("href"):null}function NN(t){return new URL(t,document.baseURI).pathname}var PN=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})(),lD=["alt","control","meta","shift"],ON={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},kN={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},dD=(()=>{class t extends La{constructor(n){super(n)}supports(n){return t.parseEventName(n)!=null}addEventListener(n,r,i,o){let s=t.parseEventName(r),c=t.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Zn().onAndCancel(n,s.domEventName,c,o))}static parseEventName(n){let r=n.toLowerCase().split("."),i=r.shift();if(r.length===0||!(i==="keydown"||i==="keyup"))return null;let o=t._normalizeKey(r.pop()),s="",c=r.indexOf("code");if(c>-1&&(r.splice(c,1),s="code."),lD.forEach(l=>{let f=r.indexOf(l);f>-1&&(r.splice(f,1),s+=l+".")}),s+=o,r.length!=0||o.length===0)return null;let u={};return u.domEventName=i,u.fullKey=s,u}static matchEventFullKeyCode(n,r){let i=ON[n.key]||n.key,o="";return r.indexOf("code.")>-1&&(i=n.code,o="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),lD.forEach(s=>{if(s!==i){let c=kN[s];c(n)&&(o+=s+".")}}),o+=i,o===r)}static eventCallback(n,r,i){return o=>{t.matchEventFullKeyCode(o,n)&&i.runGuarded(()=>r(o))}}static _normalizeKey(n){return n==="esc"?"escape":n}static \u0275fac=function(r){return new(r||t)(K($e))};static \u0275prov=H({token:t,factory:t.\u0275fac})}return t})();function Kg(t,e,n){let r=j({rootComponent:t,platformRef:n?.platformRef},FN(e));return Y0(r)}function FN(t){return{appProviders:[...UN,...t?.providers??[]],platformProviders:BN}}function LN(){Wl.makeCurrent()}function VN(){return new qn}function jN(){return hg(document),document}var BN=[{provide:Ca,useValue:iD},{provide:Dl,useValue:LN,multi:!0},{provide:$e,useFactory:jN}];var UN=[{provide:oa,useValue:"root"},{provide:qn,useFactory:VN},{provide:Gl,useClass:Hl,multi:!0},{provide:Gl,useClass:dD,multi:!0},Wg,qg,zg,{provide:_i,useExisting:Wg},{provide:Ci,useClass:PN},[]];var Si=class t{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?typeof e=="string"?this.lazyInit=()=>{this.headers=new Map,e.split(`
`).forEach(n=>{let r=n.indexOf(":");if(r>0){let i=n.slice(0,r),o=n.slice(r+1).trim();this.addHeaderEntry(i,o)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();let n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof t?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){let n=new t;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof t?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){let n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if(typeof r=="string"&&(r=[r]),r.length===0)return;this.maybeSetNormalizedName(e.name,n);let i=(e.op==="a"?this.headers.get(n):void 0)||[];i.push(...r),this.headers.set(n,i);break;case"d":let o=e.value;if(!o)this.headers.delete(n),this.normalizedNames.delete(n);else{let s=this.headers.get(n);if(!s)return;s=s.filter(c=>o.indexOf(c)===-1),s.length===0?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}break}}addHeaderEntry(e,n){let r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(e,n){let r=(Array.isArray(n)?n:[n]).map(o=>o.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}};var Ql=class{map=new Map;set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}},Yl=class{encodeKey(e){return fD(e)}encodeValue(e){return fD(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}};function $N(t,e){let n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(i=>{let o=i.indexOf("="),[s,c]=o==-1?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,o)),e.decodeValue(i.slice(o+1))],u=n.get(s)||[];u.push(c),n.set(s,u)}),n}var HN=/%(\d[a-f0-9])/gi,zN={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function fD(t){return encodeURIComponent(t).replace(HN,(e,n)=>zN[n]??e)}function Kl(t){return`${t}`}var Rr=class t{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new Yl,e.fromString){if(e.fromObject)throw new $(2805,!1);this.map=$N(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{let r=e.fromObject[n],i=Array.isArray(r)?r.map(Kl):[Kl(r)];this.map.set(n,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();let n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){let n=[];return Object.keys(e).forEach(r=>{let i=e[r];Array.isArray(i)?i.forEach(o=>{n.push({param:r,value:o,op:"a"})}):n.push({param:r,value:i,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{let n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>e!=="").join("&")}clone(e){let n=new t({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":let n=(e.op==="a"?this.map.get(e.param):void 0)||[];n.push(Kl(e.value)),this.map.set(e.param,n);break;case"d":if(e.value!==void 0){let r=this.map.get(e.param)||[],i=r.indexOf(Kl(e.value));i!==-1&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}else{this.map.delete(e.param);break}}}),this.cloneFrom=this.updates=null)}};function qN(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function hD(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function pD(t){return typeof Blob<"u"&&t instanceof Blob}function gD(t){return typeof FormData<"u"&&t instanceof FormData}function GN(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}var mD="Content-Type",yD="Accept",vD="text/plain",_D="application/json",WN=`${_D}, ${vD}, */*`,Ua=class t{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,n,r,i){this.url=n,this.method=e.toUpperCase();let o;if(qN(this.method)||i?(this.body=r!==void 0?r:null,o=i):o=r,o){if(this.reportProgress=!!o.reportProgress,this.withCredentials=!!o.withCredentials,this.keepalive=!!o.keepalive,o.responseType&&(this.responseType=o.responseType),o.headers&&(this.headers=o.headers),o.context&&(this.context=o.context),o.params&&(this.params=o.params),o.priority&&(this.priority=o.priority),o.cache&&(this.cache=o.cache),o.credentials&&(this.credentials=o.credentials),typeof o.timeout=="number"){if(o.timeout<1||!Number.isInteger(o.timeout))throw new $(2822,"");this.timeout=o.timeout}o.mode&&(this.mode=o.mode),o.redirect&&(this.redirect=o.redirect),o.integrity&&(this.integrity=o.integrity),o.referrer&&(this.referrer=o.referrer),o.referrerPolicy&&(this.referrerPolicy=o.referrerPolicy),this.transferCache=o.transferCache}if(this.headers??=new Si,this.context??=new Ql,!this.params)this.params=new Rr,this.urlWithParams=n;else{let s=this.params.toString();if(s.length===0)this.urlWithParams=n;else{let c=n.indexOf("?"),u=c===-1?"?":c<n.length-1?"&":"";this.urlWithParams=n+u+s}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||hD(this.body)||pD(this.body)||gD(this.body)||GN(this.body)?this.body:this.body instanceof Rr?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||gD(this.body)?null:pD(this.body)?this.body.type||null:hD(this.body)?null:typeof this.body=="string"?vD:this.body instanceof Rr?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?_D:null}clone(e={}){let n=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,o=e.keepalive??this.keepalive,s=e.priority||this.priority,c=e.cache||this.cache,u=e.mode||this.mode,l=e.redirect||this.redirect,f=e.credentials||this.credentials,p=e.referrer||this.referrer,m=e.integrity||this.integrity,y=e.referrerPolicy||this.referrerPolicy,A=e.transferCache??this.transferCache,x=e.timeout??this.timeout,S=e.body!==void 0?e.body:this.body,k=e.withCredentials??this.withCredentials,q=e.reportProgress??this.reportProgress,ee=e.headers||this.headers,de=e.params||this.params,je=e.context??this.context;return e.setHeaders!==void 0&&(ee=Object.keys(e.setHeaders).reduce((Re,w)=>Re.set(w,e.setHeaders[w]),ee)),e.setParams&&(de=Object.keys(e.setParams).reduce((Re,w)=>Re.set(w,e.setParams[w]),de)),new t(n,r,S,{params:de,headers:ee,context:je,reportProgress:q,responseType:i,withCredentials:k,transferCache:A,keepalive:o,cache:c,priority:s,timeout:x,mode:u,redirect:l,credentials:f,referrer:p,integrity:m,referrerPolicy:y})}},Mo=(function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t})(Mo||{}),No=class{headers;status;statusText;url;ok;type;redirected;responseType;constructor(e,n=200,r="OK"){this.headers=e.headers||new Si,this.status=e.status!==void 0?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.responseType=e.responseType,this.ok=this.status>=200&&this.status<300}},Jl=class t extends No{constructor(e={}){super(e)}type=Mo.ResponseHeader;clone(e={}){return new t({headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}},Zl=class t extends No{body;constructor(e={}){super(e),this.body=e.body!==void 0?e.body:null}type=Mo.Response;clone(e={}){return new t({body:e.body!==void 0?e.body:this.body,headers:e.headers||this.headers,status:e.status!==void 0?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected,responseType:e.responseType??this.responseType})}},$a=class extends No{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${e.url||"(unknown url)"}`:this.message=`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}},KN=200,QN=204;var YN=new z("");var JN=/^\)\]\}',?\n/;var Yg=(()=>{class t{xhrFactory;tracingService=P(Ii,{optional:!0});constructor(n){this.xhrFactory=n}maybePropagateTrace(n){return this.tracingService?.propagate?this.tracingService.propagate(n):n}handle(n){if(n.method==="JSONP")throw new $(-2800,!1);let r=this.xhrFactory;return ae(null).pipe(Kt(()=>new le(o=>{let s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((S,k)=>s.setRequestHeader(S,k.join(","))),n.headers.has(yD)||s.setRequestHeader(yD,WN),!n.headers.has(mD)){let S=n.detectContentTypeHeader();S!==null&&s.setRequestHeader(mD,S)}if(n.timeout&&(s.timeout=n.timeout),n.responseType){let S=n.responseType.toLowerCase();s.responseType=S!=="json"?S:"text"}let c=n.serializeBody(),u=null,l=()=>{if(u!==null)return u;let S=s.statusText||"OK",k=new Si(s.getAllResponseHeaders()),q=s.responseURL||n.url;return u=new Jl({headers:k,status:s.status,statusText:S,url:q}),u},f=this.maybePropagateTrace(()=>{let{headers:S,status:k,statusText:q,url:ee}=l(),de=null;k!==QN&&(de=typeof s.response>"u"?s.responseText:s.response),k===0&&(k=de?KN:0);let je=k>=200&&k<300;if(n.responseType==="json"&&typeof de=="string"){let Re=de;de=de.replace(JN,"");try{de=de!==""?JSON.parse(de):null}catch(w){de=Re,je&&(je=!1,de={error:w,text:de})}}je?(o.next(new Zl({body:de,headers:S,status:k,statusText:q,url:ee||void 0})),o.complete()):o.error(new $a({error:de,headers:S,status:k,statusText:q,url:ee||void 0}))}),p=this.maybePropagateTrace(S=>{let{url:k}=l(),q=new $a({error:S,status:s.status||0,statusText:s.statusText||"Unknown Error",url:k||void 0});o.error(q)}),m=p;n.timeout&&(m=this.maybePropagateTrace(S=>{let{url:k}=l(),q=new $a({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:k||void 0});o.error(q)}));let y=!1,A=this.maybePropagateTrace(S=>{y||(o.next(l()),y=!0);let k={type:Mo.DownloadProgress,loaded:S.loaded};S.lengthComputable&&(k.total=S.total),n.responseType==="text"&&s.responseText&&(k.partialText=s.responseText),o.next(k)}),x=this.maybePropagateTrace(S=>{let k={type:Mo.UploadProgress,loaded:S.loaded};S.lengthComputable&&(k.total=S.total),o.next(k)});return s.addEventListener("load",f),s.addEventListener("error",p),s.addEventListener("timeout",m),s.addEventListener("abort",p),n.reportProgress&&(s.addEventListener("progress",A),c!==null&&s.upload&&s.upload.addEventListener("progress",x)),s.send(c),o.next({type:Mo.Sent}),()=>{s.removeEventListener("error",p),s.removeEventListener("abort",p),s.removeEventListener("load",f),s.removeEventListener("timeout",m),n.reportProgress&&(s.removeEventListener("progress",A),c!==null&&s.upload&&s.upload.removeEventListener("progress",x)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||t)(K(Ci))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function ZN(t,e){return e(t)}function XN(t,e,n){return(r,i)=>lt(n,()=>e(r,o=>t(o,i)))}var ED=new z("",{factory:()=>[]}),eP=new z(""),wD=new z("",{providedIn:"root",factory:()=>!0});var Jg=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:function(r){let i=null;return r?i=new(r||t):i=K(Yg),i},providedIn:"root"})}return t})();var Xl=(()=>{class t{backend;injector;chain=null;pendingTasks=P(Zu);contributeToStability=P(wD);constructor(n,r){this.backend=n,this.injector=r}handle(n){if(this.chain===null){let r=Array.from(new Set([...this.injector.get(ED),...this.injector.get(eP,[])]));this.chain=r.reduceRight((i,o)=>XN(i,o,this.injector),ZN)}if(this.contributeToStability){let r=this.pendingTasks.add();return this.chain(n,i=>this.backend.handle(i)).pipe(sn(r))}else return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||t)(K(Jg),K(Ue))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Zg=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:function(r){let i=null;return r?i=new(r||t):i=K(Xl),i},providedIn:"root"})}return t})();function Qg(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,credentials:t.credentials,transferCache:t.transferCache,timeout:t.timeout,keepalive:t.keepalive,priority:t.priority,cache:t.cache,mode:t.mode,redirect:t.redirect,integrity:t.integrity,referrer:t.referrer,referrerPolicy:t.referrerPolicy}}var tP=(()=>{class t{handler;constructor(n){this.handler=n}request(n,r,i={}){let o;if(n instanceof Ua)o=n;else{let u;i.headers instanceof Si?u=i.headers:u=new Si(i.headers);let l;i.params&&(i.params instanceof Rr?l=i.params:l=new Rr({fromObject:i.params})),o=new Ua(n,r,i.body!==void 0?i.body:null,{headers:u,context:i.context,params:l,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache,keepalive:i.keepalive,priority:i.priority,cache:i.cache,mode:i.mode,redirect:i.redirect,credentials:i.credentials,referrer:i.referrer,referrerPolicy:i.referrerPolicy,integrity:i.integrity,timeout:i.timeout})}let s=ae(o).pipe(oo(u=>this.handler.handle(u)));if(n instanceof Ua||i.observe==="events")return s;let c=s.pipe(Wt(u=>u instanceof Zl));switch(i.observe||"body"){case"body":switch(o.responseType){case"arraybuffer":return c.pipe(fe(u=>{if(u.body!==null&&!(u.body instanceof ArrayBuffer))throw new $(2806,!1);return u.body}));case"blob":return c.pipe(fe(u=>{if(u.body!==null&&!(u.body instanceof Blob))throw new $(2807,!1);return u.body}));case"text":return c.pipe(fe(u=>{if(u.body!==null&&typeof u.body!="string")throw new $(2808,!1);return u.body}));case"json":default:return c.pipe(fe(u=>u.body))}case"response":return c;default:throw new $(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:new Rr().append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,i={}){return this.request("PATCH",n,Qg(i,r))}post(n,r,i={}){return this.request("POST",n,Qg(i,r))}put(n,r,i={}){return this.request("PUT",n,Qg(i,r))}static \u0275fac=function(r){return new(r||t)(K(Zg))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var nP=new z("",{factory:()=>!0}),rP="XSRF-TOKEN",iP=new z("",{providedIn:"root",factory:()=>rP}),oP="X-XSRF-TOKEN",sP=new z("",{providedIn:"root",factory:()=>oP}),aP=(()=>{class t{cookieName=P(iP);doc=P($e);lastCookieString="";lastToken=null;parseCount=0;getToken(){let n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=Fa(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),ID=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:function(r){let i=null;return r?i=new(r||t):i=K(aP),i},providedIn:"root"})}return t})(),cP=/^(?:https?:)?\/\//i;function uP(t,e){if(!P(nP)||t.method==="GET"||t.method==="HEAD"||cP.test(t.url))return e(t);let n=P(ID).getToken(),r=P(sP);return n!=null&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,n)})),e(t)}function Xg(...t){let e=[tP,Xl,{provide:Zg,useExisting:Xl},{provide:Jg,useFactory:()=>P(YN,{optional:!0})??P(Yg)},{provide:ED,useValue:uP,multi:!0}];for(let n of t)e.push(...n.\u0275providers);return Gn(e)}var DD=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(K($e))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();var bD=()=>{};var SD=function(t){let e=[],n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},dP=function(t){let e=[],n=0,r=0;for(;n<t.length;){let i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=t[n++],s=t[n++],c=t[n++],u=((i&7)<<18|(o&63)<<12|(s&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{let o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},AD={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();let n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){let o=t[i],s=i+1<t.length,c=s?t[i+1]:0,u=i+2<t.length,l=u?t[i+2]:0,f=o>>2,p=(o&3)<<4|c>>4,m=(c&15)<<2|l>>6,y=l&63;u||(y=64,s||(m=64)),r.push(n[f],n[p],n[m],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(SD(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):dP(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();let n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){let o=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;let l=i<t.length?n[t.charAt(i)]:64;++i;let p=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||c==null||l==null||p==null)throw new em;let m=o<<2|c>>4;if(r.push(m),l!==64){let y=c<<4&240|l>>2;if(r.push(y),p!==64){let A=l<<6&192|p;r.push(A)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},em=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},fP=function(t){let e=SD(t);return AD.encodeByteArray(e,!0)},za=function(t){return fP(t).replace(/\./g,"")},RD=function(t){try{return AD.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function xD(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var hP=()=>xD().__FIREBASE_DEFAULTS__,pP=()=>{if(typeof process>"u"||typeof process.env>"u")return;let t=process.env.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},gP=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=t&&RD(t[1]);return e&&JSON.parse(e)},tm=()=>{try{return bD()||hP()||pP()||gP()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},mP=t=>tm()?.emulatorHosts?.[t],MD=t=>{let e=mP(t);if(!e)return;let n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},nm=()=>tm()?.config;var ed=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}};function td(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function ND(t){return(await fetch(t,{credentials:"include"})).ok}function PD(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let s=j({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[za(JSON.stringify(n)),za(JSON.stringify(s)),""].join(".")}var Ha={};function yP(){let t={prod:[],emulator:[]};for(let e of Object.keys(Ha))Ha[e]?t.emulator.push(e):t.prod.push(e);return t}function vP(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}var TD=!1;function OD(t,e){if(typeof window>"u"||typeof document>"u"||!td(window.location.host)||Ha[t]===e||Ha[t]||TD)return;Ha[t]=e;function n(m){return`__firebase__banner__${m}`}let r="__firebase__banner",o=yP().prod.length>0;function s(){let m=document.getElementById(r);m&&m.remove()}function c(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,y){m.setAttribute("width","24"),m.setAttribute("id",y),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function l(){let m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{TD=!0,s()},m}function f(m,y){m.setAttribute("id",y),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){let m=vP(r),y=n("text"),A=document.getElementById(y)||document.createElement("span"),x=n("learnmore"),S=document.getElementById(x)||document.createElement("a"),k=n("preprendIcon"),q=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){let ee=m.element;c(ee),f(S,x);let de=l();u(q,k),ee.append(q,A,S,de),document.body.appendChild(ee)}o?(A.innerText="Preview backend disconnected.",q.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(q.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,A.innerText="Preview backend running in this workspace."),A.setAttribute("id",y)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}function kD(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function _P(){let t=tm()?.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function FD(){return!_P()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function rm(){try{return typeof indexedDB=="object"}catch{return!1}}function LD(){return new Promise((t,e)=>{try{let n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{e(i.error?.message||"")}}catch(n){e(n)}})}var EP="FirebaseError",Xn=class t extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=EP,Object.setPrototypeOf(this,t.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qa.prototype.create)}},qa=class{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){let r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?wP(o,r):"Error",c=`${this.serviceName}: ${s} (${i}).`;return new Xn(i,c,r)}};function wP(t,e){return t.replace(IP,(n,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var IP=/\{\$([^}]+)}/g;function Po(t,e){if(t===e)return!0;let n=Object.keys(t),r=Object.keys(e);for(let i of n){if(!r.includes(i))return!1;let o=t[i],s=e[i];if(CD(o)&&CD(s)){if(!Po(o,s))return!1}else if(o!==s)return!1}for(let i of r)if(!n.includes(i))return!1;return!0}function CD(t){return t!==null&&typeof t=="object"}var cW=14400*1e3;function Oo(t){return t&&t._delegate?t._delegate:t}var er=class{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ai="[DEFAULT]";var im=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){let r=new ed;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){let n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(bP(e))try{this.getOrInitializeService({instanceIdentifier:Ai})}catch{}for(let[n,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(n);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ai){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){let e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ai){return this.instances.has(e)}getOptions(e=Ai){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(let[o,s]of this.instancesDeferred.entries()){let c=this.normalizeInstanceIdentifier(o);r===c&&s.resolve(i)}return i}onInit(e,n){let r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);let o=this.instances.get(r);return o&&e(o,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){let r=this.onInitCallbacks.get(n);if(r)for(let i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:DP(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ai){return this.component?this.component.multipleInstances?e:Ai:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function DP(t){return t===Ai?void 0:t}function bP(t){return t.instantiationMode==="EAGER"}var nd=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let n=new im(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}};var TP=[],pe=(function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t})(pe||{}),CP={debug:pe.DEBUG,verbose:pe.VERBOSE,info:pe.INFO,warn:pe.WARN,error:pe.ERROR,silent:pe.SILENT},SP=pe.INFO,AP={[pe.DEBUG]:"log",[pe.VERBOSE]:"log",[pe.INFO]:"info",[pe.WARN]:"warn",[pe.ERROR]:"error"},RP=(t,e,...n)=>{if(e<t.logLevel)return;let r=new Date().toISOString(),i=AP[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},ko=class{constructor(e){this.name=e,this._logLevel=SP,this._logHandler=RP,this._userLogHandler=null,TP.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in pe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?CP[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,pe.DEBUG,...e),this._logHandler(this,pe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,pe.VERBOSE,...e),this._logHandler(this,pe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,pe.INFO,...e),this._logHandler(this,pe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,pe.WARN,...e),this._logHandler(this,pe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,pe.ERROR,...e),this._logHandler(this,pe.ERROR,...e)}};var xP=(t,e)=>e.some(n=>t instanceof n),VD,jD;function MP(){return VD||(VD=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function NP(){return jD||(jD=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var BD=new WeakMap,sm=new WeakMap,UD=new WeakMap,om=new WeakMap,cm=new WeakMap;function PP(t){let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Mn(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&BD.set(n,t)}).catch(()=>{}),cm.set(e,t),e}function OP(t){if(sm.has(t))return;let e=new Promise((n,r)=>{let i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});sm.set(t,e)}var am={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return sm.get(t);if(e==="objectStoreNames")return t.objectStoreNames||UD.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Mn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $D(t){am=t(am)}function kP(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){let r=t.call(rd(this),e,...n);return UD.set(r,e.sort?e.sort():[e]),Mn(r)}:NP().includes(t)?function(...e){return t.apply(rd(this),e),Mn(BD.get(this))}:function(...e){return Mn(t.apply(rd(this),e))}}function FP(t){return typeof t=="function"?kP(t):(t instanceof IDBTransaction&&OP(t),xP(t,MP())?new Proxy(t,am):t)}function Mn(t){if(t instanceof IDBRequest)return PP(t);if(om.has(t))return om.get(t);let e=FP(t);return e!==t&&(om.set(t,e),cm.set(e,t)),e}var rd=t=>cm.get(t);function zD(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){let s=indexedDB.open(t,e),c=Mn(s);return r&&s.addEventListener("upgradeneeded",u=>{r(Mn(s.result),u.oldVersion,u.newVersion,Mn(s.transaction),u)}),n&&s.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),c.then(u=>{o&&u.addEventListener("close",()=>o()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),c}var LP=["get","getKey","getAll","getAllKeys","count"],VP=["put","add","delete","clear"],um=new Map;function HD(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(um.get(e))return um.get(e);let n=e.replace(/FromIndex$/,""),r=e!==n,i=VP.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||LP.includes(n)))return;let o=async function(s,...c){let u=this.transaction(s,i?"readwrite":"readonly"),l=u.store;return r&&(l=l.index(c.shift())),(await Promise.all([l[n](...c),i&&u.done]))[0]};return um.set(e,o),o}$D(t=>De(j({},t),{get:(e,n,r)=>HD(e,n)||t.get(e,n,r),has:(e,n)=>!!HD(e,n)||t.has(e,n)}));var dm=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(jP(n)){let r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}};function jP(t){return t.getComponent()?.type==="VERSION"}var fm="@firebase/app",qD="0.14.6";var tr=new ko("@firebase/app"),BP="@firebase/app-compat",UP="@firebase/analytics-compat",$P="@firebase/analytics",HP="@firebase/app-check-compat",zP="@firebase/app-check",qP="@firebase/auth",GP="@firebase/auth-compat",WP="@firebase/database",KP="@firebase/data-connect",QP="@firebase/database-compat",YP="@firebase/functions",JP="@firebase/functions-compat",ZP="@firebase/installations",XP="@firebase/installations-compat",eO="@firebase/messaging",tO="@firebase/messaging-compat",nO="@firebase/performance",rO="@firebase/performance-compat",iO="@firebase/remote-config",oO="@firebase/remote-config-compat",sO="@firebase/storage",aO="@firebase/storage-compat",cO="@firebase/firestore",uO="@firebase/ai",lO="@firebase/firestore-compat",dO="firebase",fO="12.6.0";var hm="[DEFAULT]",hO={[fm]:"fire-core",[BP]:"fire-core-compat",[$P]:"fire-analytics",[UP]:"fire-analytics-compat",[zP]:"fire-app-check",[HP]:"fire-app-check-compat",[qP]:"fire-auth",[GP]:"fire-auth-compat",[WP]:"fire-rtdb",[KP]:"fire-data-connect",[QP]:"fire-rtdb-compat",[YP]:"fire-fn",[JP]:"fire-fn-compat",[ZP]:"fire-iid",[XP]:"fire-iid-compat",[eO]:"fire-fcm",[tO]:"fire-fcm-compat",[nO]:"fire-perf",[rO]:"fire-perf-compat",[iO]:"fire-rc",[oO]:"fire-rc-compat",[sO]:"fire-gcs",[aO]:"fire-gcs-compat",[cO]:"fire-fst",[lO]:"fire-fst-compat",[uO]:"fire-vertex","fire-js":"fire-js",[dO]:"fire-js-all"};var id=new Map,pO=new Map,pm=new Map;function GD(t,e){try{t.container.addComponent(e)}catch(n){tr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ga(t){let e=t.name;if(pm.has(e))return tr.debug(`There were multiple attempts to register component ${e}.`),!1;pm.set(e,t);for(let n of id.values())GD(n,t);for(let n of pO.values())GD(n,t);return!0}function YD(t,e){let n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function JD(t){return t==null?!1:t.settings!==void 0}var gO={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},xr=new qa("app","Firebase",gO);var gm=class{constructor(e,n,r){this._isDeleted=!1,this._options=j({},e),this._config=j({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new er("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw xr.create("app-deleted",{appName:this._name})}};var ZD=fO;function vm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});let r=j({name:hm,automaticDataCollectionEnabled:!0},e),i=r.name;if(typeof i!="string"||!i)throw xr.create("bad-app-name",{appName:String(i)});if(n||(n=nm()),!n)throw xr.create("no-options");let o=id.get(i);if(o){if(Po(n,o.options)&&Po(r,o.config))return o;throw xr.create("duplicate-app",{appName:i})}let s=new nd(i);for(let u of pm.values())s.addComponent(u);let c=new gm(n,r,s);return id.set(i,c),c}function XD(t=hm){let e=id.get(t);if(!e&&t===hm&&nm())return vm();if(!e)throw xr.create("no-app",{appName:t});return e}function Mr(t,e,n){let r=hO[t]??t;n&&(r+=`-${n}`);let i=r.match(/\s|\//),o=e.match(/\s|\//);if(i||o){let s=[`Unable to register library "${r}" with version "${e}":`];i&&s.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&o&&s.push("and"),o&&s.push(`version name "${e}" contains illegal characters (whitespace or "/")`),tr.warn(s.join(" "));return}Ga(new er(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}var mO="firebase-heartbeat-database",yO=1,Wa="firebase-heartbeat-store",lm=null;function eb(){return lm||(lm=zD(mO,yO,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Wa)}catch(n){console.warn(n)}}}}).catch(t=>{throw xr.create("idb-open",{originalErrorMessage:t.message})})),lm}async function vO(t){try{let n=(await eb()).transaction(Wa),r=await n.objectStore(Wa).get(tb(t));return await n.done,r}catch(e){if(e instanceof Xn)tr.warn(e.message);else{let n=xr.create("idb-get",{originalErrorMessage:e?.message});tr.warn(n.message)}}}async function WD(t,e){try{let r=(await eb()).transaction(Wa,"readwrite");await r.objectStore(Wa).put(e,tb(t)),await r.done}catch(n){if(n instanceof Xn)tr.warn(n.message);else{let r=xr.create("idb-set",{originalErrorMessage:n?.message});tr.warn(r.message)}}}function tb(t){return`${t.name}!${t.options.appId}`}var _O=1024,EO=30,mm=class{constructor(e){this.container=e,this._heartbeatsCache=null;let n=this.container.getProvider("app").getImmediate();this._storage=new ym(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{let n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=KD();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>EO){let i=IO(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){tr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";let e=KD(),{heartbeatsToSend:n,unsentEntries:r}=wO(this._heartbeatsCache.heartbeats),i=za(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(e){return tr.warn(e),""}}};function KD(){return new Date().toISOString().substring(0,10)}function wO(t,e=_O){let n=[],r=t.slice();for(let i of t){let o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),QD(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),QD(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}var ym=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return rm()?LD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){let n=await vO(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return WD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){let r=await this.read();return WD(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}};function QD(t){return za(JSON.stringify({version:2,heartbeats:t})).length}function IO(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function DO(t){Ga(new er("platform-logger",e=>new dm(e),"PRIVATE")),Ga(new er("heartbeat",e=>new mm(e),"PRIVATE")),Mr(fm,qD,t),Mr(fm,qD,"esm2020"),Mr("fire-js","")}DO("");var bO="firebase",TO="12.6.0";Mr(bO,TO,"app");var Z="primary",sc=Symbol("RouteTitle"),Dm=class{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){let n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}};function Ni(t){return new Dm(t)}function lb(t,e,n){let r=n.path.split("/");if(r.length>t.length||n.pathMatch==="full"&&(e.hasChildren()||r.length<t.length))return null;let i={};for(let o=0;o<r.length;o++){let s=r[o],c=t[o];if(s[0]===":")i[s.substring(1)]=c;else if(s!==c.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function ld(t){return new Promise((e,n)=>{t.pipe($n()).subscribe({next:r=>e(r),error:r=>n(r)})})}function CO(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Nn(t[n],e[n]))return!1;return!0}function Nn(t,e){let n=t?bm(t):void 0,r=e?bm(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!db(t[i],e[i]))return!1;return!0}function bm(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function db(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;let n=[...t].sort(),r=[...e].sort();return n.every((i,o)=>r[o]===i)}else return t===e}function fb(t){return t.length>0?t[t.length-1]:null}function Oi(t){return wu(t)?t:bi(t)?Oe(Promise.resolve(t)):ae(t)}function hb(t){return wu(t)?ld(t):Promise.resolve(t)}var SO={exact:gb,subset:mb},pb={exact:AO,subset:RO,ignored:()=>!0};function nb(t,e,n){return SO[n.paths](t.root,e.root,n.matrixParams)&&pb[n.queryParams](t.queryParams,e.queryParams)&&!(n.fragment==="exact"&&t.fragment!==e.fragment)}function AO(t,e){return Nn(t,e)}function gb(t,e,n){if(!xi(t.segments,e.segments)||!ad(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!t.children[r]||!gb(t.children[r],e.children[r],n))return!1;return!0}function RO(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>db(t[n],e[n]))}function mb(t,e,n){return yb(t,e,e.segments,n)}function yb(t,e,n,r){if(t.segments.length>n.length){let i=t.segments.slice(0,n.length);return!(!xi(i,n)||e.hasChildren()||!ad(i,n,r))}else if(t.segments.length===n.length){if(!xi(t.segments,n)||!ad(t.segments,n,r))return!1;for(let i in e.children)if(!t.children[i]||!mb(t.children[i],e.children[i],r))return!1;return!0}else{let i=n.slice(0,t.segments.length),o=n.slice(t.segments.length);return!xi(t.segments,i)||!ad(t.segments,i,r)||!t.children[Z]?!1:yb(t.children[Z],e,o,r)}}function ad(t,e,n){return e.every((r,i)=>pb[n](t[i].parameters,r.parameters))}var gn=class{root;queryParams;fragment;_queryParamMap;constructor(e=new ve([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ni(this.queryParams),this._queryParamMap}toString(){return NO.serialize(this)}},ve=class{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return cd(this)}},Nr=class{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Ni(this.parameters),this._parameterMap}toString(){return _b(this)}};function xO(t,e){return xi(t,e)&&t.every((n,r)=>Nn(n.parameters,e[r].parameters))}function xi(t,e){return t.length!==e.length?!1:t.every((n,r)=>n.path===e[r].path)}function MO(t,e){let n=[];return Object.entries(t.children).forEach(([r,i])=>{r===Z&&(n=n.concat(e(i,r)))}),Object.entries(t.children).forEach(([r,i])=>{r!==Z&&(n=n.concat(e(i,r)))}),n}var ac=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>new Pr,providedIn:"root"})}return t})(),Pr=class{parse(e){let n=new Cm(e);return new gn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){let n=`/${Ka(e.root,!0)}`,r=kO(e.queryParams),i=typeof e.fragment=="string"?`#${PO(e.fragment)}`:"";return`${n}${r}${i}`}},NO=new Pr;function cd(t){return t.segments.map(e=>_b(e)).join("/")}function Ka(t,e){if(!t.hasChildren())return cd(t);if(e){let n=t.children[Z]?Ka(t.children[Z],!1):"",r=[];return Object.entries(t.children).forEach(([i,o])=>{i!==Z&&r.push(`${i}:${Ka(o,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}else{let n=MO(t,(r,i)=>i===Z?[Ka(t.children[Z],!1)]:[`${i}:${Ka(r,!1)}`]);return Object.keys(t.children).length===1&&t.children[Z]!=null?`${cd(t)}/${n[0]}`:`${cd(t)}/(${n.join("//")})`}}function vb(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function od(t){return vb(t).replace(/%3B/gi,";")}function PO(t){return encodeURI(t)}function Tm(t){return vb(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function ud(t){return decodeURIComponent(t)}function rb(t){return ud(t.replace(/\+/g,"%20"))}function _b(t){return`${Tm(t.path)}${OO(t.parameters)}`}function OO(t){return Object.entries(t).map(([e,n])=>`;${Tm(e)}=${Tm(n)}`).join("")}function kO(t){let e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(i=>`${od(n)}=${od(i)}`).join("&"):`${od(n)}=${od(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}var FO=/^[^\/()?;#]+/;function _m(t){let e=t.match(FO);return e?e[0]:""}var LO=/^[^\/()?;=#]+/;function VO(t){let e=t.match(LO);return e?e[0]:""}var jO=/^[^=?&#]+/;function BO(t){let e=t.match(jO);return e?e[0]:""}var UO=/^[^&#]+/;function $O(t){let e=t.match(UO);return e?e[0]:""}var Cm=class{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new ve([],{}):new ve([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[Z]=new ve(e,n)),r}parseSegment(){let e=_m(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new $(4009,!1);return this.capture(e),new Nr(ud(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let n=VO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let i=_m(this.remaining);i&&(r=i,this.capture(r))}e[ud(n)]=ud(r)}parseQueryParam(e){let n=BO(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){let s=$O(this.remaining);s&&(r=s,this.capture(r))}let i=rb(n),o=rb(r);if(e.hasOwnProperty(i)){let s=e[i];Array.isArray(s)||(s=[s],e[i]=s),s.push(o)}else e[i]=o}parseParens(e){let n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=_m(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new $(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=Z);let s=this.parseChildren();n[o??Z]=Object.keys(s).length===1&&s[Z]?s[Z]:new ve([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new $(4011,!1)}};function Eb(t){return t.segments.length>0?new ve([],{[Z]:t}):t}function wb(t){let e={};for(let[r,i]of Object.entries(t.children)){let o=wb(i);if(r===Z&&o.segments.length===0&&o.hasChildren())for(let[s,c]of Object.entries(o.children))e[s]=c;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let n=new ve(t.segments,e);return HO(n)}function HO(t){if(t.numberOfChildren===1&&t.children[Z]){let e=t.children[Z];return new ve(t.segments.concat(e.segments),e.children)}return t}function Or(t){return t instanceof gn}function Ib(t,e,n=null,r=null,i=new Pr){let o=Db(t);return bb(o,e,n,r,i)}function Db(t){let e;function n(o){let s={};for(let u of o.children){let l=n(u);s[u.outlet]=l}let c=new ve(o.url,s);return o===t&&(e=c),c}let r=n(t.root),i=Eb(r);return e??i}function bb(t,e,n,r,i){let o=t;for(;o.parent;)o=o.parent;if(e.length===0)return Em(o,o,o,n,r,i);let s=zO(e);if(s.toRoot())return Em(o,o,new ve([],{}),n,r,i);let c=qO(s,o,t),u=c.processChildren?Ya(c.segmentGroup,c.index,s.commands):Cb(c.segmentGroup,c.index,s.commands);return Em(o,c.segmentGroup,u,n,r,i)}function dd(t){return typeof t=="object"&&t!=null&&!t.outlets&&!t.segmentPath}function Xa(t){return typeof t=="object"&&t!=null&&t.outlets}function ib(t,e,n){t||="\u0275";let r=new gn;return r.queryParams={[t]:e},n.parse(n.serialize(r)).queryParams[t]}function Em(t,e,n,r,i,o){let s={};for(let[l,f]of Object.entries(r??{}))s[l]=Array.isArray(f)?f.map(p=>ib(l,p,o)):ib(l,f,o);let c;t===e?c=n:c=Tb(t,e,n);let u=Eb(wb(c));return new gn(u,s,i)}function Tb(t,e,n){let r={};return Object.entries(t.children).forEach(([i,o])=>{o===e?r[i]=n:r[i]=Tb(o,e,n)}),new ve(t.segments,r)}var fd=class{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&dd(r[0]))throw new $(4003,!1);let i=r.find(Xa);if(i&&i!==fb(r))throw new $(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function zO(t){if(typeof t[0]=="string"&&t.length===1&&t[0]==="/")return new fd(!0,0,t);let e=0,n=!1,r=t.reduce((i,o,s)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let c={};return Object.entries(o.outlets).forEach(([u,l])=>{c[u]=typeof l=="string"?l.split("/"):l}),[...i,{outlets:c}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:s===0?(o.split("/").forEach((c,u)=>{u==0&&c==="."||(u==0&&c===""?n=!0:c===".."?e++:c!=""&&i.push(c))}),i):[...i,o]},[]);return new fd(n,e,r)}var Lo=class{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}};function qO(t,e,n){if(t.isAbsolute)return new Lo(e,!0,0);if(!n)return new Lo(e,!1,NaN);if(n.parent===null)return new Lo(n,!0,0);let r=dd(t.commands[0])?0:1,i=n.segments.length-1+r;return GO(n,i,t.numberOfDoubleDots)}function GO(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new $(4005,!1);i=r.segments.length}return new Lo(r,!1,i-o)}function WO(t){return Xa(t[0])?t[0].outlets:{[Z]:t}}function Cb(t,e,n){if(t??=new ve([],{}),t.segments.length===0&&t.hasChildren())return Ya(t,e,n);let r=KO(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){let o=new ve(t.segments.slice(0,r.pathIndex),{});return o.children[Z]=new ve(t.segments.slice(r.pathIndex),t.children),Ya(o,0,i)}else return r.match&&i.length===0?new ve(t.segments,{}):r.match&&!t.hasChildren()?Sm(t,e,n):r.match?Ya(t,0,i):Sm(t,e,n)}function Ya(t,e,n){if(n.length===0)return new ve(t.segments,{});{let r=WO(n),i={};if(Object.keys(r).some(o=>o!==Z)&&t.children[Z]&&t.numberOfChildren===1&&t.children[Z].segments.length===0){let o=Ya(t.children[Z],e,n);return new ve(t.segments,o.children)}return Object.entries(r).forEach(([o,s])=>{typeof s=="string"&&(s=[s]),s!==null&&(i[o]=Cb(t.children[o],e,s))}),Object.entries(t.children).forEach(([o,s])=>{r[o]===void 0&&(i[o]=s)}),new ve(t.segments,i)}}function KO(t,e,n){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;let s=t.segments[i],c=n[r];if(Xa(c))break;let u=`${c}`,l=r<n.length-1?n[r+1]:null;if(i>0&&u===void 0)break;if(u&&l&&typeof l=="object"&&l.outlets===void 0){if(!sb(u,l,s))return o;r+=2}else{if(!sb(u,{},s))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function Sm(t,e,n){let r=t.segments.slice(0,e),i=0;for(;i<n.length;){let o=n[i];if(Xa(o)){let u=QO(o.outlets);return new ve(r,u)}if(i===0&&dd(n[0])){let u=t.segments[e];r.push(new Nr(u.path,ob(n[0]))),i++;continue}let s=Xa(o)?o.outlets[Z]:`${o}`,c=i<n.length-1?n[i+1]:null;s&&c&&dd(c)?(r.push(new Nr(s,ob(c))),i+=2):(r.push(new Nr(s,{})),i++)}return new ve(r,{})}function QO(t){let e={};return Object.entries(t).forEach(([n,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[n]=Sm(new ve([],{}),0,r))}),e}function ob(t){let e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function sb(t,e,n){return t==n.path&&Nn(e,n.parameters)}var Ja="imperative",ot=(function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t})(ot||{}),zt=class{id;url;constructor(e,n){this.id=e,this.url=n}},Pi=class extends zt{type=ot.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",i=null){super(e,n),this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},On=class extends zt{urlAfterRedirects;type=ot.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},Rt=(function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t})(Rt||{}),ec=(function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t})(ec||{}),Pn=class extends zt{reason;code;type=ot.NavigationCancel;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},nr=class extends zt{reason;code;type=ot.NavigationSkipped;constructor(e,n,r,i){super(e,n),this.reason=r,this.code=i}},jo=class extends zt{error;target;type=ot.NavigationError;constructor(e,n,r,i){super(e,n),this.error=r,this.target=i}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},tc=class extends zt{urlAfterRedirects;state;type=ot.RoutesRecognized;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},hd=class extends zt{urlAfterRedirects;state;type=ot.GuardsCheckStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},pd=class extends zt{urlAfterRedirects;state;shouldActivate;type=ot.GuardsCheckEnd;constructor(e,n,r,i,o){super(e,n),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},gd=class extends zt{urlAfterRedirects;state;type=ot.ResolveStart;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},md=class extends zt{urlAfterRedirects;state;type=ot.ResolveEnd;constructor(e,n,r,i){super(e,n),this.urlAfterRedirects=r,this.state=i}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},yd=class{route;type=ot.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},vd=class{route;type=ot.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},_d=class{snapshot;type=ot.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Ed=class{snapshot;type=ot.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wd=class{snapshot;type=ot.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Id=class{snapshot;type=ot.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}};var nc=class{},Bo=class{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}};function YO(t){return!(t instanceof nc)&&!(t instanceof Bo)}function JO(t,e){return t.providers&&!t._injector&&(t._injector=xa(t.providers,e,`Route: ${t.path}`)),t._injector??e}function pn(t){return t.outlet||Z}function ZO(t,e){let n=t.filter(r=>pn(r)===e);return n.push(...t.filter(r=>pn(r)!==e)),n}function Ho(t){if(!t)return null;if(t.routeConfig?._injector)return t.routeConfig._injector;for(let e=t.parent;e;e=e.parent){let n=e.routeConfig;if(n?._loadedInjector)return n._loadedInjector;if(n?._injector)return n._injector}return null}var Dd=class{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return Ho(this.route?.snapshot)??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new zo(this.rootInjector)}},zo=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){let i=this.getOrCreateContext(n);i.outlet=r,this.contexts.set(n,i)}onChildOutletDestroyed(n){let r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new Dd(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(K(Ue))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),bd=class{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){let n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){let n=Am(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){let n=Am(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){let n=Rm(e,this._root);return n.length<2?[]:n[n.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return Rm(e,this._root).map(n=>n.value)}};function Am(t,e){if(t===e.value)return e;for(let n of e.children){let r=Am(t,n);if(r)return r}return null}function Rm(t,e){if(t===e.value)return[e];for(let n of e.children){let r=Rm(t,n);if(r.length)return r.unshift(e),r}return[]}var Ht=class{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}};function Fo(t){let e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}var rc=class extends bd{snapshot;constructor(e,n){super(e),this.snapshot=n,km(this,e)}toString(){return this.snapshot.toString()}};function Sb(t){let e=XO(t),n=new Qe([new Nr("",{})]),r=new Qe({}),i=new Qe({}),o=new Qe({}),s=new Qe(""),c=new mn(n,r,o,s,i,Z,t,e.root);return c.snapshot=e.root,new rc(new Ht(c,[]),e)}function XO(t){let e={},n={},r={},o=new Mi([],e,r,"",n,Z,t,null,{});return new ic("",new Ht(o,[]))}var mn=class{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,i,o,s,c,u){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=s,this.component=c,this._futureSnapshot=u,this.title=this.dataSubject?.pipe(fe(l=>l[sc]))??ae(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(fe(e=>Ni(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(fe(e=>Ni(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function Td(t,e,n="emptyOnly"){let r,{routeConfig:i}=t;return e!==null&&(n==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:j(j({},e.params),t.params),data:j(j({},e.data),t.data),resolve:j(j(j(j({},t.data),e.data),i?.data),t._resolvedData)}:r={params:j({},t.params),data:j({},t.data),resolve:j(j({},t.data),t._resolvedData??{})},i&&Rb(i)&&(r.resolve[sc]=i.title),r}var Mi=class{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;get title(){return this.data?.[sc]}constructor(e,n,r,i,o,s,c,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=s,this.component=c,this.routeConfig=u,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ni(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ni(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),n=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${n}')`}},ic=class extends bd{url;constructor(e,n){super(n),this.url=e,km(this,n)}toString(){return Ab(this._root)}};function km(t,e){e.value._routerState=t,e.children.forEach(n=>km(t,n))}function Ab(t){let e=t.children.length>0?` { ${t.children.map(Ab).join(", ")} } `:"";return`${t.value}${e}`}function wm(t){if(t.snapshot){let e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Nn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Nn(e.params,n.params)||t.paramsSubject.next(n.params),CO(e.url,n.url)||t.urlSubject.next(n.url),Nn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function xm(t,e){let n=Nn(t.params,e.params)&&xO(t.url,e.url),r=!t.parent!=!e.parent;return n&&!r&&(!t.parent||xm(t.parent,e.parent))}function Rb(t){return typeof t.title=="string"||t.title===null}var xb=new z(""),cc=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=Z;activateEvents=new Tt;deactivateEvents=new Tt;attachEvents=new Tt;detachEvents=new Tt;routerOutletData=Q0(void 0,{});parentContexts=P(zo);location=P(Ra);changeDetector=P(Jn);inputBinder=P(Rd,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){let{firstChange:r,previousValue:i}=n.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new $(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new $(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new $(4012,!1);this.location.detach();let n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){let n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new $(4013,!1);this._activatedRoute=n;let i=this.location,s=n.snapshot.component,c=this.parentContexts.getOrCreateContext(this.name).children,u=new Mm(n,c,i.injector,this.routerOutletData);this.activated=i.createComponent(s,{index:i.length,injector:u,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=Do({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[wo]})}return t})(),Mm=class{route;childContexts;parent;outletData;constructor(e,n,r,i){this.route=e,this.childContexts=n,this.parent=r,this.outletData=i}get(e,n){return e===mn?this.route:e===zo?this.childContexts:e===xb?this.outletData:this.parent.get(e,n)}},Rd=new z("");var Fm=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=Se({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,i){r&1&&Q(0,"router-outlet")},dependencies:[cc],encapsulation:2})}return t})();function Lm(t){let e=t.children&&t.children.map(Lm),n=e?De(j({},t),{children:e}):j({},t);return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Z&&(n.component=Fm),n}function ek(t,e,n){let r=oc(t,e._root,n?n._root:void 0);return new rc(r,e)}function oc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){let r=n.value;r._futureSnapshot=e.value;let i=tk(t,e,n);return new Ht(r,i)}else{if(t.shouldAttach(e.value)){let o=t.retrieve(e.value);if(o!==null){let s=o.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(c=>oc(t,c)),s}}let r=nk(e.value),i=e.children.map(o=>oc(t,o));return new Ht(r,i)}}function tk(t,e,n){return e.children.map(r=>{for(let i of n.children)if(t.shouldReuseRoute(r.value,i.value.snapshot))return oc(t,r,i);return oc(t,r)})}function nk(t){return new mn(new Qe(t.url),new Qe(t.params),new Qe(t.queryParams),new Qe(t.fragment),new Qe(t.data),t.outlet,t.component,t)}var Uo=class{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}},Mb="ngNavigationCancelingError";function Cd(t,e){let{redirectTo:n,navigationBehaviorOptions:r}=Or(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Nb(!1,Rt.Redirect);return i.url=n,i.navigationBehaviorOptions=r,i}function Nb(t,e){let n=new Error(`NavigationCancelingError: ${t||""}`);return n[Mb]=!0,n.cancellationCode=e,n}function rk(t){return Pb(t)&&Or(t.url)}function Pb(t){return!!t&&t[Mb]}var ik=(t,e,n,r)=>fe(i=>(new Nm(e,i.targetRouterState,i.currentRouterState,n,r).activate(t),i)),Nm=class{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,i,o){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),wm(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){let i=Fo(n);e.children.forEach(o=>{let s=o.value.outlet;this.deactivateRoutes(o,i[s],r),delete i[s]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(i===o)if(i.component){let s=r.getContext(i.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else o&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Fo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);if(r&&r.outlet){let s=r.outlet.detach(),c=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:c})}}deactivateRouteAndOutlet(e,n){let r=n.getContext(e.value.outlet),i=r&&e.value.component?r.children:n,o=Fo(e);for(let s of Object.values(o))this.deactivateRouteAndItsChildren(s,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){let i=Fo(n);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new Id(o.value.snapshot))}),e.children.length&&this.forwardEvent(new Ed(e.value.snapshot))}activateRoutes(e,n,r){let i=e.value,o=n?n.value:null;if(wm(i),i===o)if(i.component){let s=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(i.component){let s=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let c=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),s.children.onOutletReAttached(c.contexts),s.attachRef=c.componentRef,s.route=c.route.value,s.outlet&&s.outlet.attach(c.componentRef,c.route.value),wm(c.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=i,s.outlet&&s.outlet.activateWith(i,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}},Sd=class{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Vo=class{component;route;constructor(e,n){this.component=e,this.route=n}};function ok(t,e,n){let r=t._root,i=e?e._root:null;return Qa(r,i,n,[r.value])}function sk(t){let e=t.routeConfig?t.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:t,guards:e}}function qo(t,e){let n=Symbol(),r=e.get(t,n);return r===n?typeof t=="function"&&!qh(t)?t:e.get(t):r}function Qa(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=Fo(e);return t.children.forEach(s=>{ak(s,o[s.value.outlet],n,r.concat([s.value]),i),delete o[s.value.outlet]}),Object.entries(o).forEach(([s,c])=>Za(c,n.getContext(s),i)),i}function ak(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=t.value,s=e?e.value:null,c=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){let u=ck(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new Sd(r)):(o.data=s.data,o._resolvedData=s._resolvedData),o.component?Qa(t,e,c?c.children:null,r,i):Qa(t,e,n,r,i),u&&c&&c.outlet&&c.outlet.isActivated&&i.canDeactivateChecks.push(new Vo(c.outlet.component,s))}else s&&Za(e,c,i),i.canActivateChecks.push(new Sd(r)),o.component?Qa(t,null,c?c.children:null,r,i):Qa(t,null,n,r,i);return i}function ck(t,e,n){if(typeof n=="function")return n(t,e);switch(n){case"pathParamsChange":return!xi(t.url,e.url);case"pathParamsOrQueryParamsChange":return!xi(t.url,e.url)||!Nn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!xm(t,e)||!Nn(t.queryParams,e.queryParams);case"paramsChange":default:return!xm(t,e)}}function Za(t,e,n){let r=Fo(t),i=t.value;Object.entries(r).forEach(([o,s])=>{i.component?e?Za(s,e.children.getContext(o),n):Za(s,null,n):Za(s,e,n)}),i.component?e&&e.outlet&&e.outlet.isActivated?n.canDeactivateChecks.push(new Vo(e.outlet.component,i)):n.canDeactivateChecks.push(new Vo(null,i)):n.canDeactivateChecks.push(new Vo(null,i))}function uc(t){return typeof t=="function"}function uk(t){return typeof t=="boolean"}function lk(t){return t&&uc(t.canLoad)}function dk(t){return t&&uc(t.canActivate)}function fk(t){return t&&uc(t.canActivateChild)}function hk(t){return t&&uc(t.canDeactivate)}function pk(t){return t&&uc(t.canMatch)}function Ob(t){return t instanceof Yr||t?.name==="EmptyError"}var sd=Symbol("INITIAL_VALUE");function $o(){return Kt(t=>Ws(t.map(e=>e.pipe(Un(1),Ah(sd)))).pipe(fe(e=>{for(let n of e)if(n!==!0){if(n===sd)return sd;if(n===!1||gk(n))return n}return!0}),Wt(e=>e!==sd),Un(1)))}function gk(t){return Or(t)||t instanceof Uo}function kb(t){return t.aborted?ae(void 0).pipe(Un(1)):new le(e=>{let n=()=>{e.next(),e.complete()};return t.addEventListener("abort",n),()=>t.removeEventListener("abort",n)})}function Fb(t){return Ys(kb(t))}function mk(t,e){return tt(n=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return s.length===0&&o.length===0?ae(De(j({},n),{guardsResult:!0})):yk(s,r,i,t).pipe(tt(c=>c&&uk(c)?vk(r,o,t,e):ae(c)),fe(c=>De(j({},n),{guardsResult:c})))})}function yk(t,e,n,r){return Oe(t).pipe(tt(i=>Dk(i.component,i.route,n,e,r)),$n(i=>i!==!0,!0))}function vk(t,e,n,r){return Oe(e).pipe(oo(i=>io(Ek(i.route.parent,r),_k(i.route,r),Ik(t,i.path,n),wk(t,i.route,n))),$n(i=>i!==!0,!0))}function _k(t,e){return t!==null&&e&&e(new wd(t)),ae(!0)}function Ek(t,e){return t!==null&&e&&e(new _d(t)),ae(!0)}function wk(t,e,n){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return ae(!0);let i=r.map(o=>Ks(()=>{let s=Ho(e)??n,c=qo(o,s),u=dk(c)?c.canActivate(e,t):lt(s,()=>c(e,t));return Oi(u).pipe($n())}));return ae(i).pipe($o())}function Ik(t,e,n){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(s=>sk(s)).filter(s=>s!==null).map(s=>Ks(()=>{let c=s.guards.map(u=>{let l=Ho(s.node)??n,f=qo(u,l),p=fk(f)?f.canActivateChild(r,t):lt(l,()=>f(r,t));return Oi(p).pipe($n())});return ae(c).pipe($o())}));return ae(o).pipe($o())}function Dk(t,e,n,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return ae(!0);let s=o.map(c=>{let u=Ho(e)??i,l=qo(c,u),f=hk(l)?l.canDeactivate(t,e,n,r):lt(u,()=>l(t,e,n,r));return Oi(f).pipe($n())});return ae(s).pipe($o())}function bk(t,e,n,r,i){let o=e.canLoad;if(o===void 0||o.length===0)return ae(!0);let s=o.map(c=>{let u=qo(c,t),l=lk(u)?u.canLoad(e,n):lt(t,()=>u(e,n)),f=Oi(l);return i?f.pipe(Fb(i)):f});return ae(s).pipe($o(),Lb(r))}function Lb(t){return Ih(Dt(e=>{if(typeof e!="boolean")throw Cd(t,e)}),fe(e=>e===!0))}function Tk(t,e,n,r,i){let o=e.canMatch;if(!o||o.length===0)return ae(!0);let s=o.map(c=>{let u=qo(c,t),l=pk(u)?u.canMatch(e,n):lt(t,()=>u(e,n)),f=Oi(l);return i?f.pipe(Fb(i)):f});return ae(s).pipe($o(),Lb(r))}var Ri=class Vb extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,Vb.prototype)}},Pm=class jb extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,jb.prototype)}};function Ck(t){throw new $(4e3,!1)}function Sk(t){throw Nb(!1,Rt.GuardRejected)}var Ak=class{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}async lineralizeSegments(e,n){let r=[],i=n.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return r;if(i.numberOfChildren>1||!i.children[Z])throw Ck(`${e.redirectTo}`);i=i.children[Z]}}async applyRedirectCommands(e,n,r,i,o){let s=await Rk(n,i,o);if(s instanceof gn)throw new Pm(s);let c=this.applyRedirectCreateUrlTree(s,this.urlSerializer.parse(s),e,r);if(s[0]==="/")throw new Pm(c);return c}applyRedirectCreateUrlTree(e,n,r,i){let o=this.createSegmentGroup(e,n.root,r,i);return new gn(o,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let c=o.substring(1);r[i]=n[c]}else r[i]=o}),r}createSegmentGroup(e,n,r,i){let o=this.createSegments(e,n.segments,r,i),s={};return Object.entries(n.children).forEach(([c,u])=>{s[c]=this.createSegmentGroup(e,u,r,i)}),new ve(o,s)}createSegments(e,n,r,i){return n.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,n,r){let i=r[n.path.substring(1)];if(!i)throw new $(4001,!1);return i}findOrReturn(e,n){let r=0;for(let i of n){if(i.path===e.path)return n.splice(r),i;r++}return e}};function Rk(t,e,n){if(typeof t=="string")return Promise.resolve(t);let r=t,{queryParams:i,fragment:o,routeConfig:s,url:c,outlet:u,params:l,data:f,title:p}=e;return ld(Oi(lt(n,()=>r({params:l,data:f,queryParams:i,fragment:o,routeConfig:s,url:c,outlet:u,title:p}))))}var Om={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function xk(t,e,n,r,i,o){let s=Bb(t,e,n);return s.matched?(r=JO(e,r),Tk(r,e,n,i,o).pipe(fe(c=>c===!0?s:j({},Om)))):ae(s)}function Bb(t,e,n){if(e.path==="**")return Mk(n);if(e.path==="")return e.pathMatch==="full"&&(t.hasChildren()||n.length>0)?j({},Om):{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};let i=(e.matcher||lb)(n,t,e);if(!i)return j({},Om);let o={};Object.entries(i.posParams??{}).forEach(([c,u])=>{o[c]=u.path});let s=i.consumed.length>0?j(j({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:n.slice(i.consumed.length),parameters:s,positionalParamSegments:i.posParams??{}}}function Mk(t){return{matched:!0,parameters:t.length>0?fb(t).parameters:{},consumedSegments:t,remainingSegments:[],positionalParamSegments:{}}}function ab(t,e,n,r){return n.length>0&&Ok(t,n,r)?{segmentGroup:new ve(e,Pk(r,new ve(n,t.children))),slicedSegments:[]}:n.length===0&&kk(t,n,r)?{segmentGroup:new ve(t.segments,Nk(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new ve(t.segments,t.children),slicedSegments:n}}function Nk(t,e,n,r){let i={};for(let o of n)if(xd(t,e,o)&&!r[pn(o)]){let s=new ve([],{});i[pn(o)]=s}return j(j({},r),i)}function Pk(t,e){let n={};n[Z]=e;for(let r of t)if(r.path===""&&pn(r)!==Z){let i=new ve([],{});n[pn(r)]=i}return n}function Ok(t,e,n){return n.some(r=>xd(t,e,r)&&pn(r)!==Z)}function kk(t,e,n){return n.some(r=>xd(t,e,r))}function xd(t,e,n){return(t.hasChildren()||e.length>0)&&n.pathMatch==="full"?!1:n.path===""}function Fk(t,e,n){return e.length===0&&!t.children[n]}var Lk=class{};async function Vk(t,e,n,r,i,o,s="emptyOnly",c){return new Bk(t,e,n,r,i,s,o,c).recognize()}var jk=31,Bk=class{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,i,o,s,c,u){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=s,this.urlSerializer=c,this.abortSignal=u,this.applyRedirects=new Ak(this.urlSerializer,this.urlTree)}noMatchError(e){return new $(4002,`'${e.segmentGroup}'`)}async recognize(){let e=ab(this.urlTree.root,[],[],this.config).segmentGroup,{children:n,rootSnapshot:r}=await this.match(e),i=new Ht(r,n),o=new ic("",i),s=Ib(r,[],this.urlTree.queryParams,this.urlTree.fragment);return s.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(s),{state:o,tree:s}}async match(e){let n=new Mi([],Object.freeze({}),Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),Z,this.rootComponentType,null,{});try{return{children:await this.processSegmentGroup(this.injector,this.config,e,Z,n),rootSnapshot:n}}catch(r){if(r instanceof Pm)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Ri?this.noMatchError(r):r}}async processSegmentGroup(e,n,r,i,o){if(r.segments.length===0&&r.hasChildren())return this.processChildren(e,n,r,o);let s=await this.processSegment(e,n,r,r.segments,i,!0,o);return s instanceof Ht?[s]:[]}async processChildren(e,n,r,i){let o=[];for(let u of Object.keys(r.children))u==="primary"?o.unshift(u):o.push(u);let s=[];for(let u of o){let l=r.children[u],f=ZO(n,u),p=await this.processSegmentGroup(e,f,l,u,i);s.push(...p)}let c=Ub(s);return Uk(c),c}async processSegment(e,n,r,i,o,s,c){for(let u of n)try{return await this.processSegmentAgainstRoute(u._injector??e,n,u,r,i,o,s,c)}catch(l){if(l instanceof Ri||Ob(l))continue;throw l}if(Fk(r,i,o))return new Lk;throw new Ri(r)}async processSegmentAgainstRoute(e,n,r,i,o,s,c,u){if(pn(r)!==s&&(s===Z||!xd(i,o,r)))throw new Ri(i);if(r.redirectTo===void 0)return this.matchSegmentAgainstRoute(e,i,r,o,s,u);if(this.allowRedirects&&c)return this.expandSegmentAgainstRouteUsingRedirect(e,i,n,r,o,s,u);throw new Ri(i)}async expandSegmentAgainstRouteUsingRedirect(e,n,r,i,o,s,c){let{matched:u,parameters:l,consumedSegments:f,positionalParamSegments:p,remainingSegments:m}=Bb(n,i,o);if(!u)throw new Ri(n);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>jk&&(this.allowRedirects=!1));let y=new Mi(o,l,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,cb(i),pn(i),i.component??i._loadedComponent??null,i,ub(i)),A=Td(y,c,this.paramsInheritanceStrategy);if(y.params=Object.freeze(A.params),y.data=Object.freeze(A.data),this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let x=await this.applyRedirects.applyRedirectCommands(f,i.redirectTo,p,y,e),S=await this.applyRedirects.lineralizeSegments(i,x);return this.processSegment(e,r,n,S.concat(m),s,!1,c)}async matchSegmentAgainstRoute(e,n,r,i,o,s){if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);let c=await ld(xk(n,r,i,e,this.urlSerializer,this.abortSignal));if(r.path==="**"&&(n.children={}),!c?.matched)throw new Ri(n);e=r._injector??e;let{routes:u}=await this.getChildConfig(e,r,i),l=r._loadedInjector??e,{parameters:f,consumedSegments:p,remainingSegments:m}=c,y=new Mi(p,f,Object.freeze(j({},this.urlTree.queryParams)),this.urlTree.fragment,cb(r),pn(r),r.component??r._loadedComponent??null,r,ub(r)),A=Td(y,s,this.paramsInheritanceStrategy);y.params=Object.freeze(A.params),y.data=Object.freeze(A.data);let{segmentGroup:x,slicedSegments:S}=ab(n,p,m,u);if(S.length===0&&x.hasChildren()){let ee=await this.processChildren(l,u,x,y);return new Ht(y,ee)}if(u.length===0&&S.length===0)return new Ht(y,[]);let k=pn(r)===o,q=await this.processSegment(l,u,x,S,k?Z:o,!0,y);return new Ht(y,q instanceof Ht?[q]:[])}async getChildConfig(e,n,r){if(n.children)return{routes:n.children,injector:e};if(n.loadChildren){if(n._loadedRoutes!==void 0)return{routes:n._loadedRoutes,injector:n._loadedInjector};if(this.abortSignal.aborted)throw new Error(this.abortSignal.reason);if(await ld(bk(e,n,r,this.urlSerializer,this.abortSignal))){let o=await this.configLoader.loadChildren(e,n);return n._loadedRoutes=o.routes,n._loadedInjector=o.injector,o}throw Sk(n)}return{routes:[],injector:e}}};function Uk(t){t.sort((e,n)=>e.value.outlet===Z?-1:n.value.outlet===Z?1:e.value.outlet.localeCompare(n.value.outlet))}function $k(t){let e=t.value.routeConfig;return e&&e.path===""}function Ub(t){let e=[],n=new Set;for(let r of t){if(!$k(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),n.add(i)):e.push(r)}for(let r of n){let i=Ub(r.children);e.push(new Ht(r.value,i))}return e.filter(r=>!n.has(r))}function cb(t){return t.data||{}}function ub(t){return t.resolve||{}}var Hk=new z("",{factory:()=>Vk});function zk(t,e,n,r,i,o,s){let c=t.get(Hk);return tt(u=>ae(u).pipe(Kt(l=>c(t,e,n,r,l.extractedUrl,i,o,s)),fe(({state:l,tree:f})=>De(j({},u),{targetSnapshot:l,urlAfterRedirects:f}))))}function qk(t,e){return tt(n=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=n;if(!i.length)return ae(n);let o=new Set(i.map(u=>u.route)),s=new Set;for(let u of o)if(!s.has(u))for(let l of $b(u))s.add(l);let c=0;return Oe(s).pipe(oo(u=>o.has(u)?Gk(u,r,t,e):(u.data=Td(u,u.parent,t).resolve,ae(void 0))),Dt(()=>c++),Tu(1),tt(u=>c===s.size?ae(n):Nt))})}function $b(t){let e=t.children.map(n=>$b(n)).flat();return[t,...e]}function Gk(t,e,n,r){let i=t.routeConfig,o=t._resolve;return i?.title!==void 0&&!Rb(i)&&(o[sc]=i.title),Ks(()=>(t.data=Td(t,t.parent,n).resolve,Wk(o,t,e,r).pipe(fe(s=>(t._resolvedData=s,t.data=j(j({},t.data),s),null)))))}function Wk(t,e,n,r){let i=bm(t);if(i.length===0)return ae({});let o={};return Oe(i).pipe(tt(s=>Kk(t[s],e,n,r).pipe($n(),Dt(c=>{if(c instanceof Uo)throw Cd(new Pr,c);o[s]=c}))),Tu(1),fe(()=>o),Qs(s=>Ob(s)?Nt:Th(s)))}function Kk(t,e,n,r){let i=Ho(e)??r,o=qo(t,i),s=o.resolve?o.resolve(e,n):lt(i,()=>o(e,n));return Oi(s)}function Im(t){return Kt(e=>{let n=t(e);return n?Oe(n).pipe(fe(()=>e)):ae(e)})}var Vm=(()=>{class t{buildTitle(n){let r,i=n.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===Z);return r}getResolvedTitleForRoute(n){return n.data[sc]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>P(Hb),providedIn:"root"})}return t})(),Hb=(()=>{class t extends Vm{title;constructor(n){super(),this.title=n}updateTitle(n){let r=this.buildTitle(n);r!==void 0&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(K(DD))};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Go=new z("",{factory:()=>({})}),lc=new z(""),zb=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=P(kg);async loadComponent(n,r){if(this.componentLoaders.get(r))return this.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await hb(lt(n,()=>r.loadComponent())),s=await Wb(Gb(o));return this.onLoadEndListener&&this.onLoadEndListener(r),r._loadedComponent=s,s}finally{this.componentLoaders.delete(r)}})();return this.componentLoaders.set(r,i),i}loadChildren(n,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let i=(async()=>{try{let o=await qb(r,this.compiler,n,this.onLoadEndListener);return r._loadedRoutes=o.routes,r._loadedInjector=o.injector,o}finally{this.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();async function qb(t,e,n,r){let i=await hb(lt(n,()=>t.loadChildren())),o=await Wb(Gb(i)),s;o instanceof Pl||Array.isArray(o)?s=o:s=await e.compileModuleAsync(o),r&&r(t);let c,u,l=!1;return Array.isArray(s)?(u=s,l=!0):(c=s.create(n).injector,u=c.get(lc,[],{optional:!0,self:!0}).flat()),{routes:u.map(Lm),injector:c}}function Qk(t){return t&&typeof t=="object"&&"default"in t}function Gb(t){return Qk(t)?t.default:t}async function Wb(t){return t}var Md=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>P(Yk),providedIn:"root"})}return t})(),Yk=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Kb=new z("");var Jk=()=>{},Qb=new z(""),Yb=(()=>{class t{currentNavigation=Qn(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=Qn(null,{});events=new ut;transitionAbortWithErrorSubject=new ut;configLoader=P(zb);environmentInjector=P(Ue);destroyRef=P(Tr);urlSerializer=P(ac);rootContexts=P(zo);location=P(xo);inputBindingEnabled=P(Rd,{optional:!0})!==null;titleStrategy=P(Vm);options=P(Go,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=P(Md);createViewTransition=P(Kb,{optional:!0});navigationErrorHandler=P(Qb,{optional:!0});navigationId=0;get hasRequestedNavigation(){return this.navigationId!==0}transitions;afterPreactivation=()=>ae(void 0);rootComponentType=null;destroyed=!1;constructor(){let n=i=>this.events.next(new yd(i)),r=i=>this.events.next(new vd(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=n,this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){let r=++this.navigationId;Ut(()=>{this.transitions?.next(De(j({},n),{extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r}))})}setupNavigations(n){return this.transitions=new Qe(null),this.transitions.pipe(Wt(r=>r!==null),Kt(r=>{let i=!1,o=new AbortController;return ae(r).pipe(Kt(s=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",Rt.SupersededByNewNavigation),Nt;this.currentTransition=r;let c=this.lastSuccessfulNavigation();this.currentNavigation.set({id:s.id,initialUrl:s.rawUrl,extractedUrl:s.extractedUrl,targetBrowserUrl:typeof s.extras.browserUrl=="string"?this.urlSerializer.parse(s.extras.browserUrl):s.extras.browserUrl,trigger:s.source,extras:s.extras,previousNavigation:c?De(j({},c),{previousNavigation:null}):null,abort:()=>o.abort()});let u=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),l=s.extras.onSameUrlNavigation??n.onSameUrlNavigation;if(!u&&l!=="reload")return this.events.next(new nr(s.id,this.urlSerializer.serialize(s.rawUrl),"",ec.IgnoredSameUrlNavigation)),s.resolve(!1),Nt;if(this.urlHandlingStrategy.shouldProcessUrl(s.rawUrl))return ae(s).pipe(Kt(f=>(this.events.next(new Pi(f.id,this.urlSerializer.serialize(f.extractedUrl),f.source,f.restoredState)),f.id!==this.navigationId?Nt:Promise.resolve(f))),zk(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,o.signal),Dt(f=>{r.targetSnapshot=f.targetSnapshot,r.urlAfterRedirects=f.urlAfterRedirects,this.currentNavigation.update(m=>(m.finalUrl=f.urlAfterRedirects,m));let p=new tc(f.id,this.urlSerializer.serialize(f.extractedUrl),this.urlSerializer.serialize(f.urlAfterRedirects),f.targetSnapshot);this.events.next(p)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(s.currentRawUrl)){let{id:f,extractedUrl:p,source:m,restoredState:y,extras:A}=s,x=new Pi(f,this.urlSerializer.serialize(p),m,y);this.events.next(x);let S=Sb(this.rootComponentType).snapshot;return this.currentTransition=r=De(j({},s),{targetSnapshot:S,urlAfterRedirects:p,extras:De(j({},A),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.update(k=>(k.finalUrl=p,k)),ae(r)}else return this.events.next(new nr(s.id,this.urlSerializer.serialize(s.extractedUrl),"",ec.IgnoredByUrlHandlingStrategy)),s.resolve(!1),Nt}),Dt(s=>{let c=new hd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot);this.events.next(c)}),fe(s=>(this.currentTransition=r=De(j({},s),{guards:ok(s.targetSnapshot,s.currentSnapshot,this.rootContexts)}),r)),mk(this.environmentInjector,s=>this.events.next(s)),Dt(s=>{if(r.guardsResult=s.guardsResult,s.guardsResult&&typeof s.guardsResult!="boolean")throw Cd(this.urlSerializer,s.guardsResult);let c=new pd(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects),s.targetSnapshot,!!s.guardsResult);this.events.next(c)}),Wt(s=>s.guardsResult?!0:(this.cancelNavigationTransition(s,"",Rt.GuardRejected),!1)),Im(s=>{if(s.guards.canActivateChecks.length!==0)return ae(s).pipe(Dt(c=>{let u=new gd(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),Kt(c=>{let u=!1;return ae(c).pipe(qk(this.paramsInheritanceStrategy,this.environmentInjector),Dt({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",Rt.NoDataFromResolver)}}))}),Dt(c=>{let u=new md(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),Im(s=>{let c=l=>{let f=[];if(l.routeConfig?._loadedComponent)l.component=l.routeConfig?._loadedComponent;else if(l.routeConfig?.loadComponent){let p=Ho(l)??this.environmentInjector;f.push(this.configLoader.loadComponent(p,l.routeConfig).then(m=>{l.component=m}))}for(let p of l.children)f.push(...c(p));return f},u=c(s.targetSnapshot.root);return u.length===0?ae(s):Oe(Promise.all(u).then(()=>s))}),Im(()=>this.afterPreactivation()),Kt(()=>{let{currentSnapshot:s,targetSnapshot:c}=r,u=this.createViewTransition?.(this.environmentInjector,s.root,c.root);return u?Oe(u).pipe(fe(()=>r)):ae(r)}),fe(s=>{let c=ek(n.routeReuseStrategy,s.targetSnapshot,s.currentRouterState);return this.currentTransition=r=De(j({},s),{targetRouterState:c}),this.currentNavigation.update(u=>(u.targetRouterState=c,u)),r}),Dt(()=>{this.events.next(new nc)}),ik(this.rootContexts,n.routeReuseStrategy,s=>this.events.next(s),this.inputBindingEnabled),Un(1),Ys(kb(o.signal).pipe(Wt(()=>!i&&!r.targetRouterState),Dt(()=>{this.cancelNavigationTransition(r,o.signal.reason+"",Rt.Aborted)}))),Dt({next:s=>{i=!0,this.currentNavigation.update(c=>(c.abort=Jk,c)),this.lastSuccessfulNavigation.set(Ut(this.currentNavigation)),this.events.next(new On(s.id,this.urlSerializer.serialize(s.extractedUrl),this.urlSerializer.serialize(s.urlAfterRedirects))),this.titleStrategy?.updateTitle(s.targetRouterState.snapshot),s.resolve(!0)},complete:()=>{i=!0}}),Ys(this.transitionAbortWithErrorSubject.pipe(Dt(s=>{throw s}))),sn(()=>{o.abort(),i||this.cancelNavigationTransition(r,"",Rt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Qs(s=>{if(this.destroyed)return r.resolve(!1),Nt;if(i=!0,Pb(s))this.events.next(new Pn(r.id,this.urlSerializer.serialize(r.extractedUrl),s.message,s.cancellationCode)),rk(s)?this.events.next(new Bo(s.url,s.navigationBehaviorOptions)):r.resolve(!1);else{let c=new jo(r.id,this.urlSerializer.serialize(r.extractedUrl),s,r.targetSnapshot??void 0);try{let u=lt(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(u instanceof Uo){let{message:l,cancellationCode:f}=Cd(this.urlSerializer,u);this.events.next(new Pn(r.id,this.urlSerializer.serialize(r.extractedUrl),l,f)),this.events.next(new Bo(u.redirectTo,u.navigationBehaviorOptions))}else throw this.events.next(c),s}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return Nt}))}))}cancelNavigationTransition(n,r,i){let o=new Pn(n.id,this.urlSerializer.serialize(n.extractedUrl),r,i);this.events.next(o),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=Ut(this.currentNavigation),i=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==i?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Zk(t){return t!==Ja}var Jb=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>P(Xk),providedIn:"root"})}return t})(),Ad=class{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}},Xk=(()=>{class t extends Ad{static \u0275fac=(()=>{let n;return function(i){return(n||(n=Da(t)))(i||t)}})();static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),jm=(()=>{class t{urlSerializer=P(ac);options=P(Go,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=P(xo);urlHandlingStrategy=P(Md);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new gn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:i}){let o=n!==void 0?this.urlHandlingStrategy.merge(n,r):r,s=i??o;return s instanceof gn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:i}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,i),this.routerState=n):this.rawUrlTree=i}routerState=Sb(null);getRouterState(){return this.routerState}stateMemento=this.createStateMemento();updateStateMemento(){this.stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:()=>P(Zb),providedIn:"root"})}return t})(),Zb=(()=>{class t extends jm{currentPageId=0;lastSuccessfulId=-1;restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{r.type==="popstate"&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Pi?this.updateStateMemento():n instanceof nr?this.commitTransition(r):n instanceof tc?this.urlUpdateStrategy==="eager"&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof nc?(this.commitTransition(r),this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Pn&&n.code!==Rt.SupersededByNewNavigation&&n.code!==Rt.Redirect?this.restoreHistory(r):n instanceof jo?this.restoreHistory(r,!0):n instanceof On&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:i}){let{replaceUrl:o,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||o){let c=this.browserPageId,u=j(j({},s),this.generateNgRouterState(i,c));this.location.replaceState(n,"",u)}else{let c=j(j({},s),this.generateNgRouterState(i,this.browserPageId+1));this.location.go(n,"",c)}}restoreHistory(n,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.getCurrentUrlTree()===n.finalUrl&&o===0&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return this.canceledNavigationResolution==="computed"?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(i){return(n||(n=Da(t)))(i||t)}})();static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Bm(t,e){t.events.pipe(Wt(n=>n instanceof On||n instanceof Pn||n instanceof jo||n instanceof nr),fe(n=>n instanceof On||n instanceof nr?0:(n instanceof Pn?n.code===Rt.Redirect||n.code===Rt.SupersededByNewNavigation:!1)?2:1),Wt(n=>n!==2),Un(1)).subscribe(()=>{e()})}var eF={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},tF={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},dc=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=P(Ng);stateManager=P(jm);options=P(Go,{optional:!0})||{};pendingTasks=P(Kn);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=P(Yb);urlSerializer=P(ac);location=P(xo);urlHandlingStrategy=P(Md);injector=P(Ue);_events=new ut;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=P(Jb);onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=P(lc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!P(Rd,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{this.console.warn(n)}}),this.subscribeToNavigationEvents()}eventsSubscription=new ct;subscribeToNavigationEvents(){let n=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=Ut(this.navigationTransitions.currentNavigation);if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof Pn&&r.code!==Rt.Redirect&&r.code!==Rt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof On)this.navigated=!0;else if(r instanceof Bo){let s=r.navigationBehaviorOptions,c=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),u=j({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Zk(i.source)},s);this.scheduleNavigation(c,Ja,null,u,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}YO(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortWithErrorSubject.next(i)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Ja,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,i)=>{this.navigateToSyncWithBrowser(n,i,r)})}navigateToSyncWithBrowser(n,r,i){let o={replaceUrl:!0},s=i?.navigationId?i:null;if(i){let u=j({},i);delete u.navigationId,delete u.\u0275routerPageId,Object.keys(u).length!==0&&(o.state=u)}let c=this.parseUrl(n);this.scheduleNavigation(c,r,s,o).catch(u=>{this.disposed||this.injector.get(Lt)(u)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return Ut(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Lm),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){let{relativeTo:i,queryParams:o,fragment:s,queryParamsHandling:c,preserveFragment:u}=r,l=u?this.currentUrlTree.fragment:s,f=null;switch(c??this.options.defaultQueryParamsHandling){case"merge":f=j(j({},this.currentUrlTree.queryParams),o);break;case"preserve":f=this.currentUrlTree.queryParams;break;default:f=o||null}f!==null&&(f=this.removeEmptyProps(f));let p;try{let m=i?i.snapshot:this.routerState.snapshot.root;p=Db(m)}catch{(typeof n[0]!="string"||n[0][0]!=="/")&&(n=[]),p=this.currentUrlTree.root}return bb(p,n,f,l??null,this.urlSerializer)}navigateByUrl(n,r={skipLocationChange:!1}){let i=Or(n)?n:this.parseUrl(n),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,Ja,null,r)}navigate(n,r={skipLocationChange:!1}){return nF(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(ti(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let i;if(r===!0?i=j({},eF):r===!1?i=j({},tF):i=r,Or(n))return nb(this.currentUrlTree,n,i);let o=this.parseUrl(n);return nb(this.currentUrlTree,o,i)}removeEmptyProps(n){return Object.entries(n).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(n,r,i,o,s){if(this.disposed)return Promise.resolve(!1);let c,u,l;s?(c=s.resolve,u=s.reject,l=s.promise):l=new Promise((p,m)=>{c=p,u=m});let f=this.pendingTasks.add();return Bm(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(f))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:o,resolve:c,reject:u,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(p=>Promise.reject(p))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function nF(t){for(let e=0;e<t.length;e++)if(t[e]==null)throw new $(4008,!1)}var tn=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=Qn(null,{});get href(){return Ut(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new ut;applicationErrorHandler=P(Lt);options=P(Go,{optional:!0});constructor(n,r,i,o,s,c){this.router=n,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=s,this.locationStrategy=c,this.reactiveHref.set(P(new Ul("href"),{optional:!0}));let u=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement=u==="a"||u==="area"||!!(typeof customElements=="object"&&customElements.get(u)?.observedAttributes?.includes?.("href")),this.isAnchorElement?this.setTabIndexIfNotOnNativeEl("0"):this.subscribeToNavigationEventsIfNecessary()}subscribeToNavigationEventsIfNecessary(){if(this.subscription!==void 0||!this.isAnchorElement)return;let n=this.preserveFragment,r=i=>i==="merge"||i==="preserve";n||=r(this.queryParamsHandling),n||=!this.queryParamsHandling&&!r(this.options?.defaultQueryParamsHandling),n&&(this.subscription=this.router.events.subscribe(i=>{i instanceof On&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&(this.updateHref(),this.subscribeToNavigationEventsIfNecessary()),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){n==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Or(n)?this.routerLinkInput=n:this.routerLinkInput=Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,i,o,s){let c=this.urlTree;if(c===null||this.isAnchorElement&&(n!==0||r||i||o||s||typeof this.target=="string"&&this.target!="_self"))return!0;let u={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(c,u)?.catch(l=>{this.applicationErrorHandler(l)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let n=this.urlTree;this.reactiveHref.set(n!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,n,r):i.removeAttribute(o,n)}get urlTree(){return this.routerLinkInput===null?null:Or(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)($t(dc),$t(mn),ba("tabindex"),$t(Nl),$t(Ta),$t(Ro))};static \u0275dir=Do({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,i){r&1&&ht("click",function(s){return i.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),r&2&&To("href",i.reactiveHref(),mg)("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",$l],skipLocationChange:[2,"skipLocationChange","skipLocationChange",$l],replaceUrl:[2,"replaceUrl","replaceUrl",$l],routerLink:"routerLink"},features:[wo]})}return t})();var iF=new z("");function Um(t,...e){return Gn([{provide:lc,multi:!0,useValue:t},[],{provide:mn,useFactory:oF},{provide:kl,multi:!0,useFactory:sF},e.map(n=>n.\u0275providers)])}function oF(){return P(dc).routerState.root}function sF(){let t=P(bn);return e=>{let n=t.get(bo);if(e!==n.components[0])return;let r=t.get(dc),i=t.get(aF);t.get(cF)===1&&r.initialNavigation(),t.get(uF,null,{optional:!0})?.setUpPreloading(),t.get(iF,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var aF=new z("",{factory:()=>new ut}),cF=new z("",{factory:()=>1});var uF=new z("");var Nd=class t{tech;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-tech-card"]],hostAttrs:[1,"col-xxl-4","col-md-6","mt-4","px-4","py-3"],inputs:{tech:"tech"},decls:9,vars:6,consts:[[1,"text-center"],["target","_blank",3,"href"],["height","55",3,"src","alt"],[1,"mt-2","mb-2"],["target","_blank",1,"text-decoration-none","text-dark",3,"href"],[1,"text-muted"]],template:function(n,r){n&1&&(rt(0,"div",0)(1,"a",1),Co(2,"img",2),it(),rt(3,"div")(4,"h5",3)(5,"a",4),F(6),it()(),rt(7,"p",5),F(8),it()()()),n&2&&(L(),So("href",r.tech.link,Io),L(),So("src",r.tech.image,Io)("alt",r.tech.title),L(3),So("href",r.tech.link,Io),L(),Te(" ",r.tech.title," "),L(2),He(r.tech.description))},encapsulation:2})};var dF=(t,e)=>e.title;function fF(t,e){if(t&1&&Q(0,"app-tech-card",57),t&2){let n=e.$implicit;me("tech",n)}}var Pd=class t{technologies=[{title:"Angular",description:"Framework de desarrollo frontend en el que se basa la arquitectura de la aplicaci\xF3n web. Gestiona aspectos como la navegaci\xF3n y la interacci\xF3n con el usuario.",image:"assets/images/techs/angular.png",link:"https://angular.dev/"},{title:"Firebase",description:"Plataforma backend en la nube utilizada para la persistencia de datos, autenticaci\xF3n de usuarios y sincronizaci\xF3n en tiempo real.",image:"assets/images/techs/firebase.png",link:"https://firebase.google.com/"},{title:"Model Viewer",description:"Componente web desarrollado por Google para integrar modelos 3D dentro de p\xE1ginas HTML a trav\xE9s de renderizaci\xF3n 3D mediante WebGL.",image:"assets/images/techs/model-viewer.png",link:"https://developers.google.com/ar/develop/webxr/model-viewer?hl=es-419"},{title:"Bootstrap",description:"Framework CSS empleado para construir una interfaz adaptable, consistente y accesible en distintos dispositivos.",image:"assets/images/techs/bootstrap.png",link:"https://getbootstrap.com/"},{title:"GitHub",description:"Plataforma de control de versiones utilizada para la gesti\xF3n del c\xF3digo fuente, documentaci\xF3n del proyecto y colaboraci\xF3n.",image:"assets/images/techs/github.png",link:"https://github.com/alvaro-ortiz-fernandez/JoyARt"},{title:"Visual Studio Code",description:"Entorno de desarrollo empleado para la implementaci\xF3n del proyecto, con soporte para depuraci\xF3n e integraci\xF3n con Git.",image:"assets/images/techs/vscode.png",link:"https://code.visualstudio.com/"}];productIds=["2wKtZNm1xIJl9SKNXTsQ","3m9Uq4KrKHOSc5UAp2iB","45OfmpEOaoGRnYWdFxal","592rph2mGzGe0Tnp8AVi","5Loon7th23BnHmnOrDlq","65I2l0tNsriu8h8H4R8a","71o9Y1Laga3xk12uzSFF","75Q5vLXTNXzALyoCLVkR","8PfvxCtoUmo8Vc22QkOd","8jWTWYd9MRFct53u8SLZ","9jYP5fzDYZhk1LxfmXQO","9xJ3dTV9CJjrBRzWXKpf","ALWupXt18imw1JARcNlu","BXofkF3YVaHWVHXMxIqy","DCeYfQYw4dKbfLcbqfnZ","EM7EfsUUQdUhdYuOn4u7","Ej6W1WwaLDzO6VGd47Cl","FBEo3FXJz8I8GEXe7f0A","GXGwKaPHSf3OzYddzQkw","OLQX18Q7xfuvueeaebzw","PXEkt8JW1Cj4JIcaGhNL","Q16o04k9cwZDXDaa7loe","Q7yLsxjr04UdoVuKQvbK","QQamOasIKs7ctgxogfMI","QVldNhfcM67HuOItuIeT","SxDvBGgcX0WKSJqCswlo","U9xni4Voz7X40EDpBoaI","UEO952TCqA9nh5cRQWeb","Uj7MRJ6hcre0D8tJVqge","UuLXHARoF5wB4NR0vgPu","VJSvrg3S6aL5gpLVz1aG","WEBuJzn1AxeCg3KHHJDw","WRb1sX60xxCqX5DliAsd","ZepQ94k1Yx3odzlhB2U4","ZrUEKAVQDDG96QCKvqVt","bV4F4LXyh7WKaGtEL7NZ","dPEo4Ry3ZI2mSMl2F5gs","fIUnQmwhH3rid8mRpRNv","imJUmZ5IXmfYSBFsfkVX","lEH76RlLC7RPA4gYp6OU","mWRKR33TliIK5R7SHqpx","pIgf25naLw6bfpIwJsEe","pqvM9dEVaxHdEld0JSGE","rjzOPd5hSpb1OZ0HwYqi","rybkGeoa6oY9HzaZYHd3","tElok5H0Y0peuWAE0xzp","u2wvzEy55Q5VHTST2Pfd","ujHWZqnSey1N3jbEryZN","xDMuhjopdf0poijfSzia","zLXEevg3GUr1YyfQ2e8o"];getRandomProductId(){return this.productIds[Math.floor(Math.random()*this.productIds.length)]}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-home"]],decls:156,vars:1,consts:[[1,"row","pb-5","gx-5","align-items-center"],[1,"col-xxl-6"],[1,"text-center","text-xxl-start"],[1,"badge","bg-gradient-primary-to-secondary","text-white","mb-4"],[1,"text-uppercase"],[1,"fs-3","fw-light","text-muted"],[1,"display-3","fw-bolder","mt-3","mb-5"],[1,"text-gradient","d-inline"],[1,"d-grid","gap-3","d-sm-flex","justify-content-sm-center","justify-content-xxl-start","mb-3"],["routerLink","/catalog",1,"btn","btn-primary","btn-lg","px-4","py-3","fs-6","fw-bolder"],[1,"px-2"],[1,"bi","bi-journals","ms-2"],[1,"btn","btn-outline-dark","btn-lg","px-4","py-3","me-sm-3","fs-6","fw-bolder",3,"routerLink"],[1,"bi","bi-image","ms-2"],[1,"d-flex","justify-content-end","mt-5","mt-xxl-0"],[1,"profile","bg-gradient-primary-to-secondary"],["src","assets/images/logo-home.png","alt","JoyARt",1,"profile-img"],[1,"dots-1"],["version","1.1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","viewBox","0 0 191.6 1215.4",0,"xml","space","preserve",2,"enable-background","new 0 0 191.6 1215.4"],["transform","translate(0.000000,1280.000000) scale(0.100000,-0.100000)"],["d","M227.7,12788.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C383.7,12801.6,289.7,12808.6,227.7,12788.6z"],["d","M1507.7,12788.6c-151-50-253-216-222-362c25-119,136-230,254-255c194-41,395,142,375,339c-11,105-90,213-190,262        C1663.7,12801.6,1569.7,12808.6,1507.7,12788.6z"],["d","M227.7,11508.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C383.7,11521.6,289.7,11528.6,227.7,11508.6z"],["d","M1507.7,11508.6c-151-50-253-216-222-362c25-119,136-230,254-255c194-41,395,142,375,339c-11,105-90,213-190,262        C1663.7,11521.6,1569.7,11528.6,1507.7,11508.6z"],["d","M227.7,10228.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C383.7,10241.6,289.7,10248.6,227.7,10228.6z"],["d","M1507.7,10228.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C1663.7,10241.6,1569.7,10248.6,1507.7,10228.6z"],["d","M227.7,8948.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C383.7,8961.6,289.7,8968.6,227.7,8948.6z"],["d","M1507.7,8948.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C1663.7,8961.6,1569.7,8968.6,1507.7,8948.6z"],["d","M227.7,7668.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C383.7,7681.6,289.7,7688.6,227.7,7668.6z"],["d","M1507.7,7668.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C1663.7,7681.6,1569.7,7688.6,1507.7,7668.6z"],["d","M227.7,6388.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C383.7,6401.6,289.7,6408.6,227.7,6388.6z"],["d","M1507.7,6388.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C1663.7,6401.6,1569.7,6408.6,1507.7,6388.6z"],["d","M227.7,5108.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C383.7,5121.6,289.7,5128.6,227.7,5108.6z"],["d","M1507.7,5108.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C1663.7,5121.6,1569.7,5128.6,1507.7,5108.6z"],["d","M227.7,3828.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C383.7,3841.6,289.7,3848.6,227.7,3828.6z"],["d","M1507.7,3828.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C1663.7,3841.6,1569.7,3848.6,1507.7,3828.6z"],["d","M227.7,2548.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C383.7,2561.6,289.7,2568.6,227.7,2548.6z"],["d","M1507.7,2548.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C1663.7,2561.6,1569.7,2568.6,1507.7,2548.6z"],["d","M227.7,1268.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C383.7,1281.6,289.7,1288.6,227.7,1268.6z"],["d","M1507.7,1268.6c-105-35-200-141-222-248c-43-206,163-412,369-369c155,32,275,190,260,339c-11,105-90,213-190,262        C1663.7,1281.6,1569.7,1288.6,1507.7,1268.6z"],[1,"dots-2"],[1,"dots-3"],[1,"dots-4"],[1,"b-divider"],[1,"row","pt-5","mt-5","gx-5","justify-content-center"],[1,"col-sm-12","pt-5","text-center"],[1,"row","gx-5"],[1,"col-md-6","pe-5"],[1,"py-5","px-5","h-100","bg-white","border-top-20","shadow-sm"],[1,"text-gradient","mb-3"],[1,"lead","fw-light"],[1,"text-muted","mb-0"],[1,"col-md-6","ps-5"],[1,"row","pt-5","py-5","mt-2","g-xxl-5","g-4"],[1,"col-sm-12","pt-5"],[1,"landing-title","text-center","mb-0"],[1,"row","px-0","align-items-center","justify-content-center"],[3,"tech"],[1,"col-lg-8","py-5","text-center"],[1,"text-muted"]],template:function(n,r){n&1&&(R(0,"section",0)(1,"article",1)(2,"div",2)(3,"div",3)(4,"div",4),F(5,"Joyas \xB7 Artesan\xEDa \xB7 Realidad Mixta"),M()(),R(6,"div",5),F(7,"Descubre, explora y visualiza piezas de joyer\xEDa en 3D en el entorno real"),M(),R(8,"h1",6)(9,"span",7),F(10,"De la vitrina a tu realidad"),M()(),R(11,"div",8)(12,"a",9)(13,"span",10),F(14,"Explorar cat\xE1logo"),M(),Q(15,"i",11),M(),R(16,"a",12)(17,"span",10),F(18,"Ver pieza en 3D"),M(),Q(19,"i",13),M()()()(),R(20,"article",1)(21,"div",14)(22,"div",15),Q(23,"img",16),R(24,"div",17),pi(),R(25,"svg",18)(26,"g",19),Q(27,"path",20)(28,"path",21)(29,"path",22)(30,"path",23)(31,"path",24)(32,"path",25)(33,"path",26)(34,"path",27)(35,"path",28)(36,"path",29)(37,"path",30)(38,"path",31)(39,"path",32)(40,"path",33)(41,"path",34)(42,"path",35)(43,"path",36)(44,"path",37)(45,"path",38)(46,"path",39),M()()(),gi(),R(47,"div",40),pi(),R(48,"svg",18)(49,"g",19),Q(50,"path",20)(51,"path",21)(52,"path",22)(53,"path",23)(54,"path",24)(55,"path",25)(56,"path",26)(57,"path",27)(58,"path",28)(59,"path",29)(60,"path",30)(61,"path",31)(62,"path",32)(63,"path",33)(64,"path",34)(65,"path",35)(66,"path",36)(67,"path",37)(68,"path",38)(69,"path",39),M()()(),gi(),R(70,"div",41),pi(),R(71,"svg",18)(72,"g",19),Q(73,"path",20)(74,"path",21)(75,"path",22)(76,"path",23)(77,"path",24)(78,"path",25)(79,"path",26)(80,"path",27)(81,"path",28)(82,"path",29)(83,"path",30)(84,"path",31)(85,"path",32)(86,"path",33)(87,"path",34)(88,"path",35)(89,"path",36)(90,"path",37)(91,"path",38)(92,"path",39),M()()(),gi(),R(93,"div",42),pi(),R(94,"svg",18)(95,"g",19),Q(96,"path",20)(97,"path",21)(98,"path",22)(99,"path",23)(100,"path",24)(101,"path",25)(102,"path",26)(103,"path",27)(104,"path",28)(105,"path",29)(106,"path",30)(107,"path",31)(108,"path",32)(109,"path",33)(110,"path",34)(111,"path",35)(112,"path",36)(113,"path",37)(114,"path",38)(115,"path",39),M()()()()()()(),gi(),Q(116,"div",43),R(117,"section",44)(118,"article",45)(119,"div",46)(120,"div",47)(121,"div",48)(122,"h1",49),F(123,"Finalidad de la aplicaci\xF3n"),M(),R(124,"p",50),F(125," JoyARt es un cat\xE1logo web de joyer\xEDa artesanal que integra contenidos planos con visualizaci\xF3n tridimensional para mejorar la comprensi\xF3n formal y espacial de las piezas. "),M(),R(126,"p",51),F(127," La aplicaci\xF3n est\xE1 dirigida a personas interesadas en artesan\xEDa y joyer\xEDa que realizan compras online y desean observar los productos con mayor detalle antes de tomar una decisi\xF3n. "),M()()(),R(128,"div",52)(129,"div",48)(130,"h1",49),F(131,"Experiencia de realidad mixta"),M(),R(132,"p",50),F(133," La aplicaci\xF3n incorpora una escena de realidad mixta accesible desde el navegador, donde un objeto 3D se visualiza de forma integrada con el entorno f\xEDsico del usuario. "),M(),R(134,"p",51),F(135," Esta escena h\xEDbrida habilita la interacci\xF3n con el modelo mediante rotaci\xF3n, zoom y posicionamiento, manteniendo una relaci\xF3n espacial que enlaza el contenido digital y el espacio real. "),M()()()()()(),Q(136,"div",43),R(137,"section",53)(138,"div",54)(139,"div",55)(140,"h1",49),F(141,"Tecnolog\xEDas principales"),M(),R(142,"p",50),F(143,"JoyARt est\xE1 construido sobre los siguientes frameworks y herramientas."),M()()(),R(144,"div",56),Je(145,fF,1,1,"app-tech-card",57,dF),M()(),Q(147,"div",43),R(148,"section",44)(149,"article",58)(150,"h1",49),F(151,"Sobre el proyecto"),M(),R(152,"p",59),F(153," JoyARt se desarrolla como un prototipo funcional que demuestra la viabilidad del uso de realidad mixta aplicada a la divulgaci\xF3n y promoci\xF3n de joyer\xEDa artesanal mediante tecnolog\xEDas web actuales. "),M(),R(154,"p",51),F(155," El proyecto pretende mostrar un flujo entre contenidos planos, visualizaci\xF3n 3D e interacci\xF3n en realidad aumentada. "),M()()()),n&2&&(L(16),me("routerLink","/product/"+r.getRandomProductId()),L(129),Ze(r.technologies))},dependencies:[tn,Nd],encapsulation:2})};var Wo=class t{size="MD";sizeMap={SM:{height:"40px",width:"40px",fontSize:"1rem"},MD:{height:"60px",width:"60px",fontSize:"1.5rem"},LG:{height:"80px",width:"80px",fontSize:"2rem"}};get config(){return this.sizeMap[this.size]}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-spinner"]],inputs:{size:"size"},decls:4,vars:6,consts:[[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"]],template:function(n,r){n&1&&(rt(0,"div",0)(1,"div",1)(2,"span",2),F(3,"Cargando..."),it()()()),n&2&&(L(),Ao("height",r.config.height)("width",r.config.width)("font-size",r.config.fontSize))},encapsulation:2})},fc=(r=>(r.SM="SM",r.MD="MD",r.LG="LG",r))(fc||{});var hF=(t,e)=>e.text;function pF(t,e){if(t&1&&(R(0,"a",4),F(1),M()),t&2){let n=ie().$implicit;me("routerLink",n.link),L(),He(n.text)}}function gF(t,e){if(t&1&&F(0),t&2){let n=ie().$implicit;Te(" ",n.text," ")}}function mF(t,e){if(t&1&&(R(0,"li",3),dt(1,pF,2,2,"a",4)(2,gF,1,1),M()),t&2){let n=e.$implicit;vt("active",!n.link),To("aria-current",n.link?null:"page"),L(),ft(n.link?1:2)}}var Ko=class t{paths;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-breadcrumb"]],inputs:{paths:"paths"},decls:4,vars:0,consts:[["aria-label","breadcrumb"],[1,"breadcrumb"],[1,"breadcrumb-item",3,"active"],[1,"breadcrumb-item"],[1,"nav-link","d-inline",3,"routerLink"]],template:function(n,r){n&1&&(R(0,"nav",0)(1,"ol",1),Je(2,mF,3,4,"li",2,hF),M()()),n&2&&(L(2),Ze(r.paths))},dependencies:[tn],encapsulation:2})};function yF(t,e){if(t&1&&(R(0,"span",9),F(1),M()),t&2){let n=ie();L(),Te(" ",n.product.getPreviousPrice(),"\u20AC ")}}function vF(t,e){if(t&1&&Q(0,"div",16),t&2){let n=e.$index,r=ie();vt("bi-star-fill",n<r.product.getFilledStarts())("bi-star",n>=r.product.getFilledStarts())}}var Od=class t{product;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-list-product"]],inputs:{product:"product"},decls:23,vars:6,consts:[[1,"list-group-item","px-0","py-4","bg-light","border-0"],[1,"row","g-3"],[1,"col-lg-4","col-6"],[1,"border","rounded-3","p-2"],["src","https://dummyimage.com/240x240/dee1e6/6e6e6e","alt","Producto",1,"img-fluid",2,"width","100%"],[1,"col-lg-8","col-6"],[1,"small","text-muted","mb-1"],[1,"mb-1"],[1,"text-primary"],[1,"fs-7","text-muted","text-decoration-line-through","ms-2"],[1,"d-flex","small","text-warning","mt-1"],[1,"bi",3,"bi-star-fill","bi-star"],[1,"mt-4","mb-0","text-muted"],[1,"d-flex","align-items-center","mt-4"],[1,"btn","btn-primary",3,"routerLink"],[1,"bi","bi-eye","me-2"],[1,"bi"]],template:function(n,r){n&1&&(R(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),Q(4,"img",4),M()(),R(5,"div",5)(6,"div",6),F(7),M(),R(8,"h4",7),F(9),M(),R(10,"span",8),F(11),M(),dt(12,yF,2,1,"span",9),R(13,"div",10),Je(14,vF,1,4,"div",11,Yn),M(),R(16,"p",12),F(17),M(),R(18,"div",13)(19,"a",14),Q(20,"i",15),R(21,"span"),F(22,"Ver detalle"),M()()()()()()),n&2&&(L(7),He(r.product.category),L(2),He(r.product.name),L(2),Te(" ",r.product.getCurrentPrice(),"\u20AC "),L(),ft(r.product.getPreviousPrice()?12:-1),L(2),Ze(r.product.getStarts()),L(3),He(r.product.description),L(2),me("routerLink","/product/"+r.product.id))},dependencies:[tn],encapsulation:2})};var Xb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},eT={};var rr,$m;(function(){var t;function e(w,v){function E(){}E.prototype=v.prototype,w.F=v.prototype,w.prototype=new E,w.prototype.constructor=w,w.D=function(D,I,T){for(var _=Array(arguments.length-2),Mt=2;Mt<arguments.length;Mt++)_[Mt-2]=arguments[Mt];return v.prototype[I].apply(D,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(w,v,E){E||(E=0);let D=Array(16);if(typeof v=="string")for(var I=0;I<16;++I)D[I]=v.charCodeAt(E++)|v.charCodeAt(E++)<<8|v.charCodeAt(E++)<<16|v.charCodeAt(E++)<<24;else for(I=0;I<16;++I)D[I]=v[E++]|v[E++]<<8|v[E++]<<16|v[E++]<<24;v=w.g[0],E=w.g[1],I=w.g[2];let T=w.g[3],_;_=v+(T^E&(I^T))+D[0]+3614090360&4294967295,v=E+(_<<7&4294967295|_>>>25),_=T+(I^v&(E^I))+D[1]+3905402710&4294967295,T=v+(_<<12&4294967295|_>>>20),_=I+(E^T&(v^E))+D[2]+606105819&4294967295,I=T+(_<<17&4294967295|_>>>15),_=E+(v^I&(T^v))+D[3]+3250441966&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(T^E&(I^T))+D[4]+4118548399&4294967295,v=E+(_<<7&4294967295|_>>>25),_=T+(I^v&(E^I))+D[5]+1200080426&4294967295,T=v+(_<<12&4294967295|_>>>20),_=I+(E^T&(v^E))+D[6]+2821735955&4294967295,I=T+(_<<17&4294967295|_>>>15),_=E+(v^I&(T^v))+D[7]+4249261313&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(T^E&(I^T))+D[8]+1770035416&4294967295,v=E+(_<<7&4294967295|_>>>25),_=T+(I^v&(E^I))+D[9]+2336552879&4294967295,T=v+(_<<12&4294967295|_>>>20),_=I+(E^T&(v^E))+D[10]+4294925233&4294967295,I=T+(_<<17&4294967295|_>>>15),_=E+(v^I&(T^v))+D[11]+2304563134&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(T^E&(I^T))+D[12]+1804603682&4294967295,v=E+(_<<7&4294967295|_>>>25),_=T+(I^v&(E^I))+D[13]+4254626195&4294967295,T=v+(_<<12&4294967295|_>>>20),_=I+(E^T&(v^E))+D[14]+2792965006&4294967295,I=T+(_<<17&4294967295|_>>>15),_=E+(v^I&(T^v))+D[15]+1236535329&4294967295,E=I+(_<<22&4294967295|_>>>10),_=v+(I^T&(E^I))+D[1]+4129170786&4294967295,v=E+(_<<5&4294967295|_>>>27),_=T+(E^I&(v^E))+D[6]+3225465664&4294967295,T=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(T^v))+D[11]+643717713&4294967295,I=T+(_<<14&4294967295|_>>>18),_=E+(T^v&(I^T))+D[0]+3921069994&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^T&(E^I))+D[5]+3593408605&4294967295,v=E+(_<<5&4294967295|_>>>27),_=T+(E^I&(v^E))+D[10]+38016083&4294967295,T=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(T^v))+D[15]+3634488961&4294967295,I=T+(_<<14&4294967295|_>>>18),_=E+(T^v&(I^T))+D[4]+3889429448&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^T&(E^I))+D[9]+568446438&4294967295,v=E+(_<<5&4294967295|_>>>27),_=T+(E^I&(v^E))+D[14]+3275163606&4294967295,T=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(T^v))+D[3]+4107603335&4294967295,I=T+(_<<14&4294967295|_>>>18),_=E+(T^v&(I^T))+D[8]+1163531501&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(I^T&(E^I))+D[13]+2850285829&4294967295,v=E+(_<<5&4294967295|_>>>27),_=T+(E^I&(v^E))+D[2]+4243563512&4294967295,T=v+(_<<9&4294967295|_>>>23),_=I+(v^E&(T^v))+D[7]+1735328473&4294967295,I=T+(_<<14&4294967295|_>>>18),_=E+(T^v&(I^T))+D[12]+2368359562&4294967295,E=I+(_<<20&4294967295|_>>>12),_=v+(E^I^T)+D[5]+4294588738&4294967295,v=E+(_<<4&4294967295|_>>>28),_=T+(v^E^I)+D[8]+2272392833&4294967295,T=v+(_<<11&4294967295|_>>>21),_=I+(T^v^E)+D[11]+1839030562&4294967295,I=T+(_<<16&4294967295|_>>>16),_=E+(I^T^v)+D[14]+4259657740&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^T)+D[1]+2763975236&4294967295,v=E+(_<<4&4294967295|_>>>28),_=T+(v^E^I)+D[4]+1272893353&4294967295,T=v+(_<<11&4294967295|_>>>21),_=I+(T^v^E)+D[7]+4139469664&4294967295,I=T+(_<<16&4294967295|_>>>16),_=E+(I^T^v)+D[10]+3200236656&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^T)+D[13]+681279174&4294967295,v=E+(_<<4&4294967295|_>>>28),_=T+(v^E^I)+D[0]+3936430074&4294967295,T=v+(_<<11&4294967295|_>>>21),_=I+(T^v^E)+D[3]+3572445317&4294967295,I=T+(_<<16&4294967295|_>>>16),_=E+(I^T^v)+D[6]+76029189&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(E^I^T)+D[9]+3654602809&4294967295,v=E+(_<<4&4294967295|_>>>28),_=T+(v^E^I)+D[12]+3873151461&4294967295,T=v+(_<<11&4294967295|_>>>21),_=I+(T^v^E)+D[15]+530742520&4294967295,I=T+(_<<16&4294967295|_>>>16),_=E+(I^T^v)+D[2]+3299628645&4294967295,E=I+(_<<23&4294967295|_>>>9),_=v+(I^(E|~T))+D[0]+4096336452&4294967295,v=E+(_<<6&4294967295|_>>>26),_=T+(E^(v|~I))+D[7]+1126891415&4294967295,T=v+(_<<10&4294967295|_>>>22),_=I+(v^(T|~E))+D[14]+2878612391&4294967295,I=T+(_<<15&4294967295|_>>>17),_=E+(T^(I|~v))+D[5]+4237533241&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~T))+D[12]+1700485571&4294967295,v=E+(_<<6&4294967295|_>>>26),_=T+(E^(v|~I))+D[3]+2399980690&4294967295,T=v+(_<<10&4294967295|_>>>22),_=I+(v^(T|~E))+D[10]+4293915773&4294967295,I=T+(_<<15&4294967295|_>>>17),_=E+(T^(I|~v))+D[1]+2240044497&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~T))+D[8]+1873313359&4294967295,v=E+(_<<6&4294967295|_>>>26),_=T+(E^(v|~I))+D[15]+4264355552&4294967295,T=v+(_<<10&4294967295|_>>>22),_=I+(v^(T|~E))+D[6]+2734768916&4294967295,I=T+(_<<15&4294967295|_>>>17),_=E+(T^(I|~v))+D[13]+1309151649&4294967295,E=I+(_<<21&4294967295|_>>>11),_=v+(I^(E|~T))+D[4]+4149444226&4294967295,v=E+(_<<6&4294967295|_>>>26),_=T+(E^(v|~I))+D[11]+3174756917&4294967295,T=v+(_<<10&4294967295|_>>>22),_=I+(v^(T|~E))+D[2]+718787259&4294967295,I=T+(_<<15&4294967295|_>>>17),_=E+(T^(I|~v))+D[9]+3951481745&4294967295,w.g[0]=w.g[0]+v&4294967295,w.g[1]=w.g[1]+(I+(_<<21&4294967295|_>>>11))&4294967295,w.g[2]=w.g[2]+I&4294967295,w.g[3]=w.g[3]+T&4294967295}r.prototype.v=function(w,v){v===void 0&&(v=w.length);let E=v-this.blockSize,D=this.C,I=this.h,T=0;for(;T<v;){if(I==0)for(;T<=E;)i(this,w,T),T+=this.blockSize;if(typeof w=="string"){for(;T<v;)if(D[I++]=w.charCodeAt(T++),I==this.blockSize){i(this,D),I=0;break}}else for(;T<v;)if(D[I++]=w[T++],I==this.blockSize){i(this,D),I=0;break}}this.h=I,this.o+=v},r.prototype.A=function(){var w=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);w[0]=128;for(var v=1;v<w.length-8;++v)w[v]=0;v=this.o*8;for(var E=w.length-8;E<w.length;++E)w[E]=v&255,v/=256;for(this.v(w),w=Array(16),v=0,E=0;E<4;++E)for(let D=0;D<32;D+=8)w[v++]=this.g[E]>>>D&255;return w};function o(w,v){var E=c;return Object.prototype.hasOwnProperty.call(E,w)?E[w]:E[w]=v(w)}function s(w,v){this.h=v;let E=[],D=!0;for(let I=w.length-1;I>=0;I--){let T=w[I]|0;D&&T==v||(E[I]=T,D=!1)}this.g=E}var c={};function u(w){return-128<=w&&w<128?o(w,function(v){return new s([v|0],v<0?-1:0)}):new s([w|0],w<0?-1:0)}function l(w){if(isNaN(w)||!isFinite(w))return p;if(w<0)return S(l(-w));let v=[],E=1;for(let D=0;w>=E;D++)v[D]=w/E|0,E*=4294967296;return new s(v,0)}function f(w,v){if(w.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(w.charAt(0)=="-")return S(f(w.substring(1),v));if(w.indexOf("-")>=0)throw Error('number format error: interior "-" character');let E=l(Math.pow(v,8)),D=p;for(let T=0;T<w.length;T+=8){var I=Math.min(8,w.length-T);let _=parseInt(w.substring(T,T+I),v);I<8?(I=l(Math.pow(v,I)),D=D.j(I).add(l(_))):(D=D.j(E),D=D.add(l(_)))}return D}var p=u(0),m=u(1),y=u(16777216);t=s.prototype,t.m=function(){if(x(this))return-S(this).m();let w=0,v=1;for(let E=0;E<this.g.length;E++){let D=this.i(E);w+=(D>=0?D:4294967296+D)*v,v*=4294967296}return w},t.toString=function(w){if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(A(this))return"0";if(x(this))return"-"+S(this).toString(w);let v=l(Math.pow(w,6));var E=this;let D="";for(;;){let I=de(E,v).g;E=k(E,I.j(v));let T=((E.g.length>0?E.g[0]:E.h)>>>0).toString(w);if(E=I,A(E))return T+D;for(;T.length<6;)T="0"+T;D=T+D}},t.i=function(w){return w<0?0:w<this.g.length?this.g[w]:this.h};function A(w){if(w.h!=0)return!1;for(let v=0;v<w.g.length;v++)if(w.g[v]!=0)return!1;return!0}function x(w){return w.h==-1}t.l=function(w){return w=k(this,w),x(w)?-1:A(w)?0:1};function S(w){let v=w.g.length,E=[];for(let D=0;D<v;D++)E[D]=~w.g[D];return new s(E,~w.h).add(m)}t.abs=function(){return x(this)?S(this):this},t.add=function(w){let v=Math.max(this.g.length,w.g.length),E=[],D=0;for(let I=0;I<=v;I++){let T=D+(this.i(I)&65535)+(w.i(I)&65535),_=(T>>>16)+(this.i(I)>>>16)+(w.i(I)>>>16);D=_>>>16,T&=65535,_&=65535,E[I]=_<<16|T}return new s(E,E[E.length-1]&-2147483648?-1:0)};function k(w,v){return w.add(S(v))}t.j=function(w){if(A(this)||A(w))return p;if(x(this))return x(w)?S(this).j(S(w)):S(S(this).j(w));if(x(w))return S(this.j(S(w)));if(this.l(y)<0&&w.l(y)<0)return l(this.m()*w.m());let v=this.g.length+w.g.length,E=[];for(var D=0;D<2*v;D++)E[D]=0;for(D=0;D<this.g.length;D++)for(let I=0;I<w.g.length;I++){let T=this.i(D)>>>16,_=this.i(D)&65535,Mt=w.i(I)>>>16,dr=w.i(I)&65535;E[2*D+2*I]+=_*dr,q(E,2*D+2*I),E[2*D+2*I+1]+=T*dr,q(E,2*D+2*I+1),E[2*D+2*I+1]+=_*Mt,q(E,2*D+2*I+1),E[2*D+2*I+2]+=T*Mt,q(E,2*D+2*I+2)}for(w=0;w<v;w++)E[w]=E[2*w+1]<<16|E[2*w];for(w=v;w<2*v;w++)E[w]=0;return new s(E,0)};function q(w,v){for(;(w[v]&65535)!=w[v];)w[v+1]+=w[v]>>>16,w[v]&=65535,v++}function ee(w,v){this.g=w,this.h=v}function de(w,v){if(A(v))throw Error("division by zero");if(A(w))return new ee(p,p);if(x(w))return v=de(S(w),v),new ee(S(v.g),S(v.h));if(x(v))return v=de(w,S(v)),new ee(S(v.g),v.h);if(w.g.length>30){if(x(w)||x(v))throw Error("slowDivide_ only works with positive integers.");for(var E=m,D=v;D.l(w)<=0;)E=je(E),D=je(D);var I=Re(E,1),T=Re(D,1);for(D=Re(D,2),E=Re(E,2);!A(D);){var _=T.add(D);_.l(w)<=0&&(I=I.add(E),T=_),D=Re(D,1),E=Re(E,1)}return v=k(w,I.j(v)),new ee(I,v)}for(I=p;w.l(v)>=0;){for(E=Math.max(1,Math.floor(w.m()/v.m())),D=Math.ceil(Math.log(E)/Math.LN2),D=D<=48?1:Math.pow(2,D-48),T=l(E),_=T.j(v);x(_)||_.l(w)>0;)E-=D,T=l(E),_=T.j(v);A(T)&&(T=m),I=I.add(T),w=k(w,_)}return new ee(I,w)}t.B=function(w){return de(this,w).h},t.and=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let D=0;D<v;D++)E[D]=this.i(D)&w.i(D);return new s(E,this.h&w.h)},t.or=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let D=0;D<v;D++)E[D]=this.i(D)|w.i(D);return new s(E,this.h|w.h)},t.xor=function(w){let v=Math.max(this.g.length,w.g.length),E=[];for(let D=0;D<v;D++)E[D]=this.i(D)^w.i(D);return new s(E,this.h^w.h)};function je(w){let v=w.g.length+1,E=[];for(let D=0;D<v;D++)E[D]=w.i(D)<<1|w.i(D-1)>>>31;return new s(E,w.h)}function Re(w,v){let E=v>>5;v%=32;let D=w.g.length-E,I=[];for(let T=0;T<D;T++)I[T]=v>0?w.i(T+E)>>>v|w.i(T+E+1)<<32-v:w.i(T+E);return new s(I,w.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,$m=eT.Md5=r,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.B,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=f,rr=eT.Integer=s}).apply(typeof Xb<"u"?Xb:typeof self<"u"?self:typeof window<"u"?window:{});var kd=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ir={};var Hm,_F,Qo,zm,hc,Fd,qm,Gm,Wm;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof kd=="object"&&kd];for(var d=0;d<a.length;++d){var h=a[d];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function i(a,d){if(d)e:{var h=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var b=a[g];if(!(b in h))break e;h=h[b]}a=a[a.length-1],g=h[a],d=d(g),d!=g&&d!=null&&e(h,a,{configurable:!0,writable:!0,value:d})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(d){var h=[],g;for(g in d)Object.prototype.hasOwnProperty.call(d,g)&&h.push([g,d[g]]);return h}});var o=o||{},s=this||self;function c(a){var d=typeof a;return d=="object"&&a!=null||d=="function"}function u(a,d,h){return a.call.apply(a.bind,arguments)}function l(a,d,h){return l=u,l.apply(null,arguments)}function f(a,d){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function p(a,d){function h(){}h.prototype=d.prototype,a.Z=d.prototype,a.prototype=new h,a.prototype.constructor=a,a.Ob=function(g,b,C){for(var V=Array(arguments.length-2),oe=2;oe<arguments.length;oe++)V[oe-2]=arguments[oe];return d.prototype[b].apply(g,V)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function y(a){let d=a.length;if(d>0){let h=Array(d);for(let g=0;g<d;g++)h[g]=a[g];return h}return[]}function A(a,d){for(let g=1;g<arguments.length;g++){let b=arguments[g];var h=typeof b;if(h=h!="object"?h:b?Array.isArray(b)?"array":h:"null",h=="array"||h=="object"&&typeof b.length=="number"){h=a.length||0;let C=b.length||0;a.length=h+C;for(let V=0;V<C;V++)a[h+V]=b[V]}else a.push(b)}}class x{constructor(d,h){this.i=d,this.j=h,this.h=0,this.g=null}get(){let d;return this.h>0?(this.h--,d=this.g,this.g=d.next,d.next=null):d=this.i(),d}}function S(a){s.setTimeout(()=>{throw a},0)}function k(){var a=w;let d=null;return a.g&&(d=a.g,a.g=a.g.next,a.g||(a.h=null),d.next=null),d}class q{constructor(){this.h=this.g=null}add(d,h){let g=ee.get();g.set(d,h),this.h?this.h.next=g:this.g=g,this.h=g}}var ee=new x(()=>new de,a=>a.reset());class de{constructor(){this.next=this.g=this.h=null}set(d,h){this.h=d,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let je,Re=!1,w=new q,v=()=>{let a=Promise.resolve(void 0);je=()=>{a.then(E)}};function E(){for(var a;a=k();){try{a.h.call(a.g)}catch(h){S(h)}var d=ee;d.j(a),d.h<100&&(d.h++,a.next=d.g,d.g=a)}Re=!1}function D(){this.u=this.u,this.C=this.C}D.prototype.u=!1,D.prototype.dispose=function(){this.u||(this.u=!0,this.N())},D.prototype[Symbol.dispose]=function(){this.dispose()},D.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function I(a,d){this.type=a,this.g=this.target=d,this.defaultPrevented=!1}I.prototype.h=function(){this.defaultPrevented=!0};var T=(function(){if(!s.addEventListener||!Object.defineProperty)return!1;var a=!1,d=Object.defineProperty({},"passive",{get:function(){a=!0}});try{let h=()=>{};s.addEventListener("test",h,d),s.removeEventListener("test",h,d)}catch{}return a})();function _(a){return/^[\s\xa0]*$/.test(a)}function Mt(a,d){I.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,d)}p(Mt,I),Mt.prototype.init=function(a,d){let h=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=d,d=a.relatedTarget,d||(h=="mouseover"?d=a.fromElement:h=="mouseout"&&(d=a.toElement)),this.relatedTarget=d,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&Mt.Z.h.call(this)},Mt.prototype.h=function(){Mt.Z.h.call(this);let a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var dr="closure_listenable_"+(Math.random()*1e6|0),IS=0;function DS(a,d,h,g,b){this.listener=a,this.proxy=null,this.src=d,this.type=h,this.capture=!!g,this.ha=b,this.key=++IS,this.da=this.fa=!1}function Oc(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function kc(a,d,h){for(let g in a)d.call(h,a[g],g,a)}function bS(a,d){for(let h in a)d.call(void 0,a[h],h,a)}function i_(a){let d={};for(let h in a)d[h]=a[h];return d}let o_="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function s_(a,d){let h,g;for(let b=1;b<arguments.length;b++){g=arguments[b];for(h in g)a[h]=g[h];for(let C=0;C<o_.length;C++)h=o_[C],Object.prototype.hasOwnProperty.call(g,h)&&(a[h]=g[h])}}function Fc(a){this.src=a,this.g={},this.h=0}Fc.prototype.add=function(a,d,h,g,b){let C=a.toString();a=this.g[C],a||(a=this.g[C]=[],this.h++);let V=jf(a,d,g,b);return V>-1?(d=a[V],h||(d.fa=!1)):(d=new DS(d,this.src,C,!!g,b),d.fa=h,a.push(d)),d};function Vf(a,d){let h=d.type;if(h in a.g){var g=a.g[h],b=Array.prototype.indexOf.call(g,d,void 0),C;(C=b>=0)&&Array.prototype.splice.call(g,b,1),C&&(Oc(d),a.g[h].length==0&&(delete a.g[h],a.h--))}}function jf(a,d,h,g){for(let b=0;b<a.length;++b){let C=a[b];if(!C.da&&C.listener==d&&C.capture==!!h&&C.ha==g)return b}return-1}var Bf="closure_lm_"+(Math.random()*1e6|0),Uf={};function a_(a,d,h,g,b){if(g&&g.once)return u_(a,d,h,g,b);if(Array.isArray(d)){for(let C=0;C<d.length;C++)a_(a,d[C],h,g,b);return null}return h=qf(h),a&&a[dr]?a.J(d,h,c(g)?!!g.capture:!!g,b):c_(a,d,h,!1,g,b)}function c_(a,d,h,g,b,C){if(!d)throw Error("Invalid event type");let V=c(b)?!!b.capture:!!b,oe=Hf(a);if(oe||(a[Bf]=oe=new Fc(a)),h=oe.add(d,h,g,V,C),h.proxy)return h;if(g=TS(),h.proxy=g,g.src=a,g.listener=h,a.addEventListener)T||(b=V),b===void 0&&(b=!1),a.addEventListener(d.toString(),g,b);else if(a.attachEvent)a.attachEvent(d_(d.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function TS(){function a(h){return d.call(a.src,a.listener,h)}let d=CS;return a}function u_(a,d,h,g,b){if(Array.isArray(d)){for(let C=0;C<d.length;C++)u_(a,d[C],h,g,b);return null}return h=qf(h),a&&a[dr]?a.K(d,h,c(g)?!!g.capture:!!g,b):c_(a,d,h,!0,g,b)}function l_(a,d,h,g,b){if(Array.isArray(d))for(var C=0;C<d.length;C++)l_(a,d[C],h,g,b);else g=c(g)?!!g.capture:!!g,h=qf(h),a&&a[dr]?(a=a.i,C=String(d).toString(),C in a.g&&(d=a.g[C],h=jf(d,h,g,b),h>-1&&(Oc(d[h]),Array.prototype.splice.call(d,h,1),d.length==0&&(delete a.g[C],a.h--)))):a&&(a=Hf(a))&&(d=a.g[d.toString()],a=-1,d&&(a=jf(d,h,g,b)),(h=a>-1?d[a]:null)&&$f(h))}function $f(a){if(typeof a!="number"&&a&&!a.da){var d=a.src;if(d&&d[dr])Vf(d.i,a);else{var h=a.type,g=a.proxy;d.removeEventListener?d.removeEventListener(h,g,a.capture):d.detachEvent?d.detachEvent(d_(h),g):d.addListener&&d.removeListener&&d.removeListener(g),(h=Hf(d))?(Vf(h,a),h.h==0&&(h.src=null,d[Bf]=null)):Oc(a)}}}function d_(a){return a in Uf?Uf[a]:Uf[a]="on"+a}function CS(a,d){if(a.da)a=!0;else{d=new Mt(d,this);let h=a.listener,g=a.ha||a.src;a.fa&&$f(a),a=h.call(g,d)}return a}function Hf(a){return a=a[Bf],a instanceof Fc?a:null}var zf="__closure_events_fn_"+(Math.random()*1e9>>>0);function qf(a){return typeof a=="function"?a:(a[zf]||(a[zf]=function(d){return a.handleEvent(d)}),a[zf])}function mt(){D.call(this),this.i=new Fc(this),this.M=this,this.G=null}p(mt,D),mt.prototype[dr]=!0,mt.prototype.removeEventListener=function(a,d,h,g){l_(this,a,d,h,g)};function wt(a,d){var h,g=a.G;if(g)for(h=[];g;g=g.G)h.push(g);if(a=a.M,g=d.type||d,typeof d=="string")d=new I(d,a);else if(d instanceof I)d.target=d.target||a;else{var b=d;d=new I(g,a),s_(d,b)}b=!0;let C,V;if(h)for(V=h.length-1;V>=0;V--)C=d.g=h[V],b=Lc(C,g,!0,d)&&b;if(C=d.g=a,b=Lc(C,g,!0,d)&&b,b=Lc(C,g,!1,d)&&b,h)for(V=0;V<h.length;V++)C=d.g=h[V],b=Lc(C,g,!1,d)&&b}mt.prototype.N=function(){if(mt.Z.N.call(this),this.i){var a=this.i;for(let d in a.g){let h=a.g[d];for(let g=0;g<h.length;g++)Oc(h[g]);delete a.g[d],a.h--}}this.G=null},mt.prototype.J=function(a,d,h,g){return this.i.add(String(a),d,!1,h,g)},mt.prototype.K=function(a,d,h,g){return this.i.add(String(a),d,!0,h,g)};function Lc(a,d,h,g){if(d=a.i.g[String(d)],!d)return!0;d=d.concat();let b=!0;for(let C=0;C<d.length;++C){let V=d[C];if(V&&!V.da&&V.capture==h){let oe=V.listener,Ke=V.ha||V.src;V.fa&&Vf(a.i,V),b=oe.call(Ke,g)!==!1&&b}}return b&&!g.defaultPrevented}function SS(a,d){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=l(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(d)>2147483647?-1:s.setTimeout(a,d||0)}function f_(a){a.g=SS(()=>{a.g=null,a.i&&(a.i=!1,f_(a))},a.l);let d=a.h;a.h=null,a.m.apply(null,d)}class AS extends D{constructor(d,h){super(),this.m=d,this.l=h,this.h=null,this.i=!1,this.g=null}j(d){this.h=arguments,this.g?this.i=!0:f_(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ss(a){D.call(this),this.h=a,this.g={}}p(Ss,D);var h_=[];function p_(a){kc(a.g,function(d,h){this.g.hasOwnProperty(h)&&$f(d)},a),a.g={}}Ss.prototype.N=function(){Ss.Z.N.call(this),p_(this)},Ss.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Gf=s.JSON.stringify,RS=s.JSON.parse,xS=class{stringify(a){return s.JSON.stringify(a,void 0)}parse(a){return s.JSON.parse(a,void 0)}};function g_(){}function m_(){}var As={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Wf(){I.call(this,"d")}p(Wf,I);function Kf(){I.call(this,"c")}p(Kf,I);var $r={},y_=null;function Vc(){return y_=y_||new mt}$r.Ia="serverreachability";function v_(a){I.call(this,$r.Ia,a)}p(v_,I);function Rs(a){let d=Vc();wt(d,new v_(d))}$r.STAT_EVENT="statevent";function __(a,d){I.call(this,$r.STAT_EVENT,a),this.stat=d}p(__,I);function It(a){let d=Vc();wt(d,new __(d,a))}$r.Ja="timingevent";function E_(a,d){I.call(this,$r.Ja,a),this.size=d}p(E_,I);function xs(a,d){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){a()},d)}function Ms(){this.g=!0}Ms.prototype.ua=function(){this.g=!1};function MS(a,d,h,g,b,C){a.info(function(){if(a.g)if(C){var V="",oe=C.split("&");for(let Ce=0;Ce<oe.length;Ce++){var Ke=oe[Ce].split("=");if(Ke.length>1){let et=Ke[0];Ke=Ke[1];let wn=et.split("_");V=wn.length>=2&&wn[1]=="type"?V+(et+"="+Ke+"&"):V+(et+"=redacted&")}}}else V=null;else V=C;return"XMLHTTP REQ ("+g+") [attempt "+b+"]: "+d+`
`+h+`
`+V})}function NS(a,d,h,g,b,C,V){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+b+"]: "+d+`
`+h+`
`+C+" "+V})}function Qi(a,d,h,g){a.info(function(){return"XMLHTTP TEXT ("+d+"): "+OS(a,h)+(g?" "+g:"")})}function PS(a,d){a.info(function(){return"TIMEOUT: "+d})}Ms.prototype.info=function(){};function OS(a,d){if(!a.g)return d;if(!d)return null;try{let C=JSON.parse(d);if(C){for(a=0;a<C.length;a++)if(Array.isArray(C[a])){var h=C[a];if(!(h.length<2)){var g=h[1];if(Array.isArray(g)&&!(g.length<1)){var b=g[0];if(b!="noop"&&b!="stop"&&b!="close")for(let V=1;V<g.length;V++)g[V]=""}}}}return Gf(C)}catch{return d}}var jc={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},w_={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},I_;function Qf(){}p(Qf,g_),Qf.prototype.g=function(){return new XMLHttpRequest},I_=new Qf;function Ns(a){return encodeURIComponent(String(a))}function kS(a){var d=1;a=a.split(":");let h=[];for(;d>0&&a.length;)h.push(a.shift()),d--;return a.length&&h.push(a.join(":")),h}function fr(a,d,h,g){this.j=a,this.i=d,this.l=h,this.S=g||1,this.V=new Ss(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new D_}function D_(){this.i=null,this.g="",this.h=!1}var b_={},Yf={};function Jf(a,d,h){a.M=1,a.A=Uc(En(d)),a.u=h,a.R=!0,T_(a,null)}function T_(a,d){a.F=Date.now(),Bc(a),a.B=En(a.A);var h=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),V_(h.i,"t",g),a.C=0,h=a.j.L,a.h=new D_,a.g=nE(a.j,h?d:null,!a.u),a.P>0&&(a.O=new AS(l(a.Y,a,a.g),a.P)),d=a.V,h=a.g,g=a.ba;var b="readystatechange";Array.isArray(b)||(b&&(h_[0]=b.toString()),b=h_);for(let C=0;C<b.length;C++){let V=a_(h,b[C],g||d.handleEvent,!1,d.h||d);if(!V)break;d.g[V.key]=V}d=a.J?i_(a.J):{},a.u?(a.v||(a.v="POST"),d["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,d)):(a.v="GET",a.g.ea(a.B,a.v,null,d)),Rs(),MS(a.i,a.v,a.B,a.l,a.S,a.u)}fr.prototype.ba=function(a){a=a.target;let d=this.O;d&&gr(a)==3?d.j():this.Y(a)},fr.prototype.Y=function(a){try{if(a==this.g)e:{let oe=gr(this.g),Ke=this.g.ya(),Ce=this.g.ca();if(!(oe<3)&&(oe!=3||this.g&&(this.h.h||this.g.la()||q_(this.g)))){this.K||oe!=4||Ke==7||(Ke==8||Ce<=0?Rs(3):Rs(2)),Zf(this);var d=this.g.ca();this.X=d;var h=FS(this);if(this.o=d==200,NS(this.i,this.v,this.B,this.l,this.S,oe,d),this.o){if(this.U&&!this.L){t:{if(this.g){var g,b=this.g;if((g=b.g?b.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(g)){var C=g;break t}}C=null}if(a=C)Qi(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Xf(this,a);else{this.o=!1,this.m=3,It(12),Hr(this),Ps(this);break e}}if(this.R){a=!0;let et;for(;!this.K&&this.C<h.length;)if(et=LS(this,h),et==Yf){oe==4&&(this.m=4,It(14),a=!1),Qi(this.i,this.l,null,"[Incomplete Response]");break}else if(et==b_){this.m=4,It(15),Qi(this.i,this.l,h,"[Invalid Chunk]"),a=!1;break}else Qi(this.i,this.l,et,null),Xf(this,et);if(C_(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),oe!=4||h.length!=0||this.h.h||(this.m=1,It(16),a=!1),this.o=this.o&&a,!a)Qi(this.i,this.l,h,"[Invalid Chunked Response]"),Hr(this),Ps(this);else if(h.length>0&&!this.W){this.W=!0;var V=this.j;V.g==this&&V.aa&&!V.P&&(V.j.info("Great, no buffering proxy detected. Bytes received: "+h.length),sh(V),V.P=!0,It(11))}}else Qi(this.i,this.l,h,null),Xf(this,h);oe==4&&Hr(this),this.o&&!this.K&&(oe==4?Z_(this.j,this):(this.o=!1,Bc(this)))}else JS(this.g),d==400&&h.indexOf("Unknown SID")>0?(this.m=3,It(12)):(this.m=0,It(13)),Hr(this),Ps(this)}}}catch{}finally{}};function FS(a){if(!C_(a))return a.g.la();let d=q_(a.g);if(d==="")return"";let h="",g=d.length,b=gr(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return Hr(a),Ps(a),"";a.h.i=new s.TextDecoder}for(let C=0;C<g;C++)a.h.h=!0,h+=a.h.i.decode(d[C],{stream:!(b&&C==g-1)});return d.length=0,a.h.g+=h,a.C=0,a.h.g}function C_(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function LS(a,d){var h=a.C,g=d.indexOf(`
`,h);return g==-1?Yf:(h=Number(d.substring(h,g)),isNaN(h)?b_:(g+=1,g+h>d.length?Yf:(d=d.slice(g,g+h),a.C=g+h,d)))}fr.prototype.cancel=function(){this.K=!0,Hr(this)};function Bc(a){a.T=Date.now()+a.H,S_(a,a.H)}function S_(a,d){if(a.D!=null)throw Error("WatchDog timer not null");a.D=xs(l(a.aa,a),d)}function Zf(a){a.D&&(s.clearTimeout(a.D),a.D=null)}fr.prototype.aa=function(){this.D=null;let a=Date.now();a-this.T>=0?(PS(this.i,this.B),this.M!=2&&(Rs(),It(17)),Hr(this),this.m=2,Ps(this)):S_(this,this.T-a)};function Ps(a){a.j.I==0||a.K||Z_(a.j,a)}function Hr(a){Zf(a);var d=a.O;d&&typeof d.dispose=="function"&&d.dispose(),a.O=null,p_(a.V),a.g&&(d=a.g,a.g=null,d.abort(),d.dispose())}function Xf(a,d){try{var h=a.j;if(h.I!=0&&(h.g==a||eh(h.h,a))){if(!a.L&&eh(h.h,a)&&h.I==3){try{var g=h.Ba.g.parse(d)}catch{g=null}if(Array.isArray(g)&&g.length==3){var b=g;if(b[0]==0){e:if(!h.v){if(h.g)if(h.g.F+3e3<a.F)Wc(h),qc(h);else break e;oh(h),It(18)}}else h.xa=b[1],0<h.xa-h.K&&b[2]<37500&&h.F&&h.A==0&&!h.C&&(h.C=xs(l(h.Va,h),6e3));x_(h.h)<=1&&h.ta&&(h.ta=void 0)}else qr(h,11)}else if((a.L||h.g==a)&&Wc(h),!_(d))for(b=h.Ba.g.parse(d),d=0;d<b.length;d++){let Ce=b[d],et=Ce[0];if(!(et<=h.K))if(h.K=et,Ce=Ce[1],h.I==2)if(Ce[0]=="c"){h.M=Ce[1],h.ba=Ce[2];let wn=Ce[3];wn!=null&&(h.ka=wn,h.j.info("VER="+h.ka));let Gr=Ce[4];Gr!=null&&(h.za=Gr,h.j.info("SVER="+h.za));let mr=Ce[5];mr!=null&&typeof mr=="number"&&mr>0&&(g=1.5*mr,h.O=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;let yr=a.g;if(yr){let Qc=yr.g?yr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Qc){var C=g.h;C.g||Qc.indexOf("spdy")==-1&&Qc.indexOf("quic")==-1&&Qc.indexOf("h2")==-1||(C.j=C.l,C.g=new Set,C.h&&(th(C,C.h),C.h=null))}if(g.G){let ah=yr.g?yr.g.getResponseHeader("X-HTTP-Session-Id"):null;ah&&(g.wa=ah,Ae(g.J,g.G,ah))}}h.I=3,h.l&&h.l.ra(),h.aa&&(h.T=Date.now()-a.F,h.j.info("Handshake RTT: "+h.T+"ms")),g=h;var V=a;if(g.na=tE(g,g.L?g.ba:null,g.W),V.L){M_(g.h,V);var oe=V,Ke=g.O;Ke&&(oe.H=Ke),oe.D&&(Zf(oe),Bc(oe)),g.g=V}else Y_(g);h.i.length>0&&Gc(h)}else Ce[0]!="stop"&&Ce[0]!="close"||qr(h,7);else h.I==3&&(Ce[0]=="stop"||Ce[0]=="close"?Ce[0]=="stop"?qr(h,7):ih(h):Ce[0]!="noop"&&h.l&&h.l.qa(Ce),h.A=0)}}Rs(4)}catch{}}var VS=class{constructor(a,d){this.g=a,this.map=d}};function A_(a){this.l=a||10,s.PerformanceNavigationTiming?(a=s.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function R_(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function x_(a){return a.h?1:a.g?a.g.size:0}function eh(a,d){return a.h?a.h==d:a.g?a.g.has(d):!1}function th(a,d){a.g?a.g.add(d):a.h=d}function M_(a,d){a.h&&a.h==d?a.h=null:a.g&&a.g.has(d)&&a.g.delete(d)}A_.prototype.cancel=function(){if(this.i=N_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let a of this.g.values())a.cancel();this.g.clear()}};function N_(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let d=a.i;for(let h of a.g.values())d=d.concat(h.G);return d}return y(a.i)}var P_=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function jS(a,d){if(a){a=a.split("&");for(let h=0;h<a.length;h++){let g=a[h].indexOf("="),b,C=null;g>=0?(b=a[h].substring(0,g),C=a[h].substring(g+1)):b=a[h],d(b,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function hr(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let d;a instanceof hr?(this.l=a.l,Os(this,a.j),this.o=a.o,this.g=a.g,ks(this,a.u),this.h=a.h,nh(this,j_(a.i)),this.m=a.m):a&&(d=String(a).match(P_))?(this.l=!1,Os(this,d[1]||"",!0),this.o=Fs(d[2]||""),this.g=Fs(d[3]||"",!0),ks(this,d[4]),this.h=Fs(d[5]||"",!0),nh(this,d[6]||"",!0),this.m=Fs(d[7]||"")):(this.l=!1,this.i=new Vs(null,this.l))}hr.prototype.toString=function(){let a=[];var d=this.j;d&&a.push(Ls(d,O_,!0),":");var h=this.g;return(h||d=="file")&&(a.push("//"),(d=this.o)&&a.push(Ls(d,O_,!0),"@"),a.push(Ns(h).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.u,h!=null&&a.push(":",String(h))),(h=this.h)&&(this.g&&h.charAt(0)!="/"&&a.push("/"),a.push(Ls(h,h.charAt(0)=="/"?$S:US,!0))),(h=this.i.toString())&&a.push("?",h),(h=this.m)&&a.push("#",Ls(h,zS)),a.join("")},hr.prototype.resolve=function(a){let d=En(this),h=!!a.j;h?Os(d,a.j):h=!!a.o,h?d.o=a.o:h=!!a.g,h?d.g=a.g:h=a.u!=null;var g=a.h;if(h)ks(d,a.u);else if(h=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var b=d.h.lastIndexOf("/");b!=-1&&(g=d.h.slice(0,b+1)+g)}if(b=g,b==".."||b==".")g="";else if(b.indexOf("./")!=-1||b.indexOf("/.")!=-1){g=b.lastIndexOf("/",0)==0,b=b.split("/");let C=[];for(let V=0;V<b.length;){let oe=b[V++];oe=="."?g&&V==b.length&&C.push(""):oe==".."?((C.length>1||C.length==1&&C[0]!="")&&C.pop(),g&&V==b.length&&C.push("")):(C.push(oe),g=!0)}g=C.join("/")}else g=b}return h?d.h=g:h=a.i.toString()!=="",h?nh(d,j_(a.i)):h=!!a.m,h&&(d.m=a.m),d};function En(a){return new hr(a)}function Os(a,d,h){a.j=h?Fs(d,!0):d,a.j&&(a.j=a.j.replace(/:$/,""))}function ks(a,d){if(d){if(d=Number(d),isNaN(d)||d<0)throw Error("Bad port number "+d);a.u=d}else a.u=null}function nh(a,d,h){d instanceof Vs?(a.i=d,qS(a.i,a.l)):(h||(d=Ls(d,HS)),a.i=new Vs(d,a.l))}function Ae(a,d,h){a.i.set(d,h)}function Uc(a){return Ae(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function Fs(a,d){return a?d?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function Ls(a,d,h){return typeof a=="string"?(a=encodeURI(a).replace(d,BS),h&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function BS(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var O_=/[#\/\?@]/g,US=/[#\?:]/g,$S=/[#\?]/g,HS=/[#\?@]/g,zS=/#/g;function Vs(a,d){this.h=this.g=null,this.i=a||null,this.j=!!d}function zr(a){a.g||(a.g=new Map,a.h=0,a.i&&jS(a.i,function(d,h){a.add(decodeURIComponent(d.replace(/\+/g," ")),h)}))}t=Vs.prototype,t.add=function(a,d){zr(this),this.i=null,a=Yi(this,a);let h=this.g.get(a);return h||this.g.set(a,h=[]),h.push(d),this.h+=1,this};function k_(a,d){zr(a),d=Yi(a,d),a.g.has(d)&&(a.i=null,a.h-=a.g.get(d).length,a.g.delete(d))}function F_(a,d){return zr(a),d=Yi(a,d),a.g.has(d)}t.forEach=function(a,d){zr(this),this.g.forEach(function(h,g){h.forEach(function(b){a.call(d,b,g,this)},this)},this)};function L_(a,d){zr(a);let h=[];if(typeof d=="string")F_(a,d)&&(h=h.concat(a.g.get(Yi(a,d))));else for(a=Array.from(a.g.values()),d=0;d<a.length;d++)h=h.concat(a[d]);return h}t.set=function(a,d){return zr(this),this.i=null,a=Yi(this,a),F_(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[d]),this.h+=1,this},t.get=function(a,d){return a?(a=L_(this,a),a.length>0?String(a[0]):d):d};function V_(a,d,h){k_(a,d),h.length>0&&(a.i=null,a.g.set(Yi(a,d),y(h)),a.h+=h.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";let a=[],d=Array.from(this.g.keys());for(let g=0;g<d.length;g++){var h=d[g];let b=Ns(h);h=L_(this,h);for(let C=0;C<h.length;C++){let V=b;h[C]!==""&&(V+="="+Ns(h[C])),a.push(V)}}return this.i=a.join("&")};function j_(a){let d=new Vs;return d.i=a.i,a.g&&(d.g=new Map(a.g),d.h=a.h),d}function Yi(a,d){return d=String(d),a.j&&(d=d.toLowerCase()),d}function qS(a,d){d&&!a.j&&(zr(a),a.i=null,a.g.forEach(function(h,g){let b=g.toLowerCase();g!=b&&(k_(this,g),V_(this,b,h))},a)),a.j=d}function GS(a,d){let h=new Ms;if(s.Image){let g=new Image;g.onload=f(pr,h,"TestLoadImage: loaded",!0,d,g),g.onerror=f(pr,h,"TestLoadImage: error",!1,d,g),g.onabort=f(pr,h,"TestLoadImage: abort",!1,d,g),g.ontimeout=f(pr,h,"TestLoadImage: timeout",!1,d,g),s.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else d(!1)}function WS(a,d){let h=new Ms,g=new AbortController,b=setTimeout(()=>{g.abort(),pr(h,"TestPingServer: timeout",!1,d)},1e4);fetch(a,{signal:g.signal}).then(C=>{clearTimeout(b),C.ok?pr(h,"TestPingServer: ok",!0,d):pr(h,"TestPingServer: server error",!1,d)}).catch(()=>{clearTimeout(b),pr(h,"TestPingServer: error",!1,d)})}function pr(a,d,h,g,b){try{b&&(b.onload=null,b.onerror=null,b.onabort=null,b.ontimeout=null),g(h)}catch{}}function KS(){this.g=new xS}function $c(a){this.i=a.Sb||null,this.h=a.ab||!1}p($c,g_),$c.prototype.g=function(){return new Hc(this.i,this.h)};function Hc(a,d){mt.call(this),this.H=a,this.o=d,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(Hc,mt),t=Hc.prototype,t.open=function(a,d){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=d,this.readyState=1,Bs(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;let d={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(d.body=a),(this.H||s).fetch(new Request(this.D,d)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,js(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,Bs(this)),this.g&&(this.readyState=3,Bs(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof s.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;B_(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function B_(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var d=a.value?a.value:new Uint8Array(0);(d=this.B.decode(d,{stream:!a.done}))&&(this.response=this.responseText+=d)}a.done?js(this):Bs(this),this.readyState==3&&B_(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,js(this))},t.Na=function(a){this.g&&(this.response=a,js(this))},t.ga=function(){this.g&&js(this)};function js(a){a.readyState=4,a.l=null,a.j=null,a.B=null,Bs(a)}t.setRequestHeader=function(a,d){this.A.append(a,d)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";let a=[],d=this.h.entries();for(var h=d.next();!h.done;)h=h.value,a.push(h[0]+": "+h[1]),h=d.next();return a.join(`\r
`)};function Bs(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(Hc.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function U_(a){let d="";return kc(a,function(h,g){d+=g,d+=":",d+=h,d+=`\r
`}),d}function rh(a,d,h){e:{for(g in h){var g=!1;break e}g=!0}g||(h=U_(h),typeof a=="string"?h!=null&&Ns(h):Ae(a,d,h))}function Pe(a){mt.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(Pe,mt);var QS=/^https?$/i,YS=["POST","PUT"];t=Pe.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,d,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);d=d?d.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():I_.g(),this.g.onreadystatechange=m(l(this.Ca,this));try{this.B=!0,this.g.open(d,String(a),!0),this.B=!1}catch(C){$_(this,C);return}if(a=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var b in g)h.set(b,g[b]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(let C of g.keys())h.set(C,g.get(C));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(C=>C.toLowerCase()=="content-type"),b=s.FormData&&a instanceof s.FormData,!(Array.prototype.indexOf.call(YS,d,void 0)>=0)||g||b||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[C,V]of h)this.g.setRequestHeader(C,V);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(C){$_(this,C)}};function $_(a,d){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=d,a.o=5,H_(a),zc(a)}function H_(a){a.A||(a.A=!0,wt(a,"complete"),wt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,wt(this,"complete"),wt(this,"abort"),zc(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zc(this,!0)),Pe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?z_(this):this.Xa())},t.Xa=function(){z_(this)};function z_(a){if(a.h&&typeof o<"u"){if(a.v&&gr(a)==4)setTimeout(a.Ca.bind(a),0);else if(wt(a,"readystatechange"),gr(a)==4){a.h=!1;try{let C=a.ca();e:switch(C){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var d=!0;break e;default:d=!1}var h;if(!(h=d)){var g;if(g=C===0){let V=String(a.D).match(P_)[1]||null;!V&&s.self&&s.self.location&&(V=s.self.location.protocol.slice(0,-1)),g=!QS.test(V?V.toLowerCase():"")}h=g}if(h)wt(a,"complete"),wt(a,"success");else{a.o=6;try{var b=gr(a)>2?a.g.statusText:""}catch{b=""}a.l=b+" ["+a.ca()+"]",H_(a)}}finally{zc(a)}}}}function zc(a,d){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);let h=a.g;a.g=null,d||wt(a,"ready");try{h.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function gr(a){return a.g?a.g.readyState:0}t.ca=function(){try{return gr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var d=this.g.responseText;return a&&d.indexOf(a)==0&&(d=d.substring(a.length)),RS(d)}};function q_(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function JS(a){let d={};a=(a.g&&gr(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(_(a[g]))continue;var h=kS(a[g]);let b=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let C=d[b]||[];d[b]=C,C.push(h)}bS(d,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Us(a,d,h){return h&&h.internalChannelParams&&h.internalChannelParams[a]||d}function G_(a){this.za=0,this.i=[],this.j=new Ms,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Us("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Us("baseRetryDelayMs",5e3,a),this.Za=Us("retryDelaySeedMs",1e4,a),this.Ta=Us("forwardChannelMaxRetries",2,a),this.va=Us("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new A_(a&&a.concurrentRequestLimit),this.Ba=new KS,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=G_.prototype,t.ka=8,t.I=1,t.connect=function(a,d,h,g){It(0),this.W=a,this.H=d||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.J=tE(this,null,this.W),Gc(this)};function ih(a){if(W_(a),a.I==3){var d=a.V++,h=En(a.J);if(Ae(h,"SID",a.M),Ae(h,"RID",d),Ae(h,"TYPE","terminate"),$s(a,h),d=new fr(a,a.j,d),d.M=2,d.A=Uc(En(h)),h=!1,s.navigator&&s.navigator.sendBeacon)try{h=s.navigator.sendBeacon(d.A.toString(),"")}catch{}!h&&s.Image&&(new Image().src=d.A,h=!0),h||(d.g=nE(d.j,null),d.g.ea(d.A)),d.F=Date.now(),Bc(d)}eE(a)}function qc(a){a.g&&(sh(a),a.g.cancel(),a.g=null)}function W_(a){qc(a),a.v&&(s.clearTimeout(a.v),a.v=null),Wc(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&s.clearTimeout(a.m),a.m=null)}function Gc(a){if(!R_(a.h)&&!a.m){a.m=!0;var d=a.Ea;je||v(),Re||(je(),Re=!0),w.add(d,a),a.D=0}}function ZS(a,d){return x_(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=d.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=xs(l(a.Ea,a,d),X_(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;let b=new fr(this,this.j,a),C=this.o;if(this.U&&(C?(C=i_(C),s_(C,this.U)):C=this.U),this.u!==null||this.R||(b.J=C,C=null),this.S)e:{for(var d=0,h=0;h<this.i.length;h++){t:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(d+=g,d>4096){d=h;break e}if(d===4096||h===this.i.length-1){d=h+1;break e}}d=1e3}else d=1e3;d=Q_(this,b,d),h=En(this.J),Ae(h,"RID",a),Ae(h,"CVER",22),this.G&&Ae(h,"X-HTTP-Session-Id",this.G),$s(this,h),C&&(this.R?d="headers="+Ns(U_(C))+"&"+d:this.u&&rh(h,this.u,C)),th(this.h,b),this.Ra&&Ae(h,"TYPE","init"),this.S?(Ae(h,"$req",d),Ae(h,"SID","null"),b.U=!0,Jf(b,h,null)):Jf(b,h,d),this.I=2}}else this.I==3&&(a?K_(this,a):this.i.length==0||R_(this.h)||K_(this))};function K_(a,d){var h;d?h=d.l:h=a.V++;let g=En(a.J);Ae(g,"SID",a.M),Ae(g,"RID",h),Ae(g,"AID",a.K),$s(a,g),a.u&&a.o&&rh(g,a.u,a.o),h=new fr(a,a.j,h,a.D+1),a.u===null&&(h.J=a.o),d&&(a.i=d.G.concat(a.i)),d=Q_(a,h,1e3),h.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),th(a.h,h),Jf(h,g,d)}function $s(a,d){a.H&&kc(a.H,function(h,g){Ae(d,g,h)}),a.l&&kc({},function(h,g){Ae(d,g,h)})}function Q_(a,d,h){h=Math.min(a.i.length,h);let g=a.l?l(a.l.Ka,a.l,a):null;e:{var b=a.i;let oe=-1;for(;;){let Ke=["count="+h];oe==-1?h>0?(oe=b[0].g,Ke.push("ofs="+oe)):oe=0:Ke.push("ofs="+oe);let Ce=!0;for(let et=0;et<h;et++){var C=b[et].g;let wn=b[et].map;if(C-=oe,C<0)oe=Math.max(0,b[et].g-100),Ce=!1;else try{C="req"+C+"_"||"";try{var V=wn instanceof Map?wn:Object.entries(wn);for(let[Gr,mr]of V){let yr=mr;c(mr)&&(yr=Gf(mr)),Ke.push(C+Gr+"="+encodeURIComponent(yr))}}catch(Gr){throw Ke.push(C+"type="+encodeURIComponent("_badmap")),Gr}}catch{g&&g(wn)}}if(Ce){V=Ke.join("&");break e}}V=void 0}return a=a.i.splice(0,h),d.G=a,V}function Y_(a){if(!a.g&&!a.v){a.Y=1;var d=a.Da;je||v(),Re||(je(),Re=!0),w.add(d,a),a.A=0}}function oh(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=xs(l(a.Da,a),X_(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,J_(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=xs(l(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,It(10),qc(this),J_(this))};function sh(a){a.B!=null&&(s.clearTimeout(a.B),a.B=null)}function J_(a){a.g=new fr(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var d=En(a.na);Ae(d,"RID","rpc"),Ae(d,"SID",a.M),Ae(d,"AID",a.K),Ae(d,"CI",a.F?"0":"1"),!a.F&&a.ia&&Ae(d,"TO",a.ia),Ae(d,"TYPE","xmlhttp"),$s(a,d),a.u&&a.o&&rh(d,a.u,a.o),a.O&&(a.g.H=a.O);var h=a.g;a=a.ba,h.M=1,h.A=Uc(En(d)),h.u=null,h.R=!0,T_(h,a)}t.Va=function(){this.C!=null&&(this.C=null,qc(this),oh(this),It(19))};function Wc(a){a.C!=null&&(s.clearTimeout(a.C),a.C=null)}function Z_(a,d){var h=null;if(a.g==d){Wc(a),sh(a),a.g=null;var g=2}else if(eh(a.h,d))h=d.G,M_(a.h,d),g=1;else return;if(a.I!=0){if(d.o)if(g==1){h=d.u?d.u.length:0,d=Date.now()-d.F;var b=a.D;g=Vc(),wt(g,new E_(g,h)),Gc(a)}else Y_(a);else if(b=d.m,b==3||b==0&&d.X>0||!(g==1&&ZS(a,d)||g==2&&oh(a)))switch(h&&h.length>0&&(d=a.h,d.i=d.i.concat(h)),b){case 1:qr(a,5);break;case 4:qr(a,10);break;case 3:qr(a,6);break;default:qr(a,2)}}}function X_(a,d){let h=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(h*=2),h*d}function qr(a,d){if(a.j.info("Error code "+d),d==2){var h=l(a.bb,a),g=a.Ua;let b=!g;g=new hr(g||"//www.google.com/images/cleardot.gif"),s.location&&s.location.protocol=="http"||Os(g,"https"),Uc(g),b?GS(g.toString(),h):WS(g.toString(),h)}else It(2);a.I=0,a.l&&a.l.pa(d),eE(a),W_(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),It(2)):(this.j.info("Failed to ping google.com"),It(1))};function eE(a){if(a.I=0,a.ja=[],a.l){let d=N_(a.h);(d.length!=0||a.i.length!=0)&&(A(a.ja,d),A(a.ja,a.i),a.h.i.length=0,y(a.i),a.i.length=0),a.l.oa()}}function tE(a,d,h){var g=h instanceof hr?En(h):new hr(h);if(g.g!="")d&&(g.g=d+"."+g.g),ks(g,g.u);else{var b=s.location;g=b.protocol,d=d?d+"."+b.hostname:b.hostname,b=+b.port;let C=new hr(null);g&&Os(C,g),d&&(C.g=d),b&&ks(C,b),h&&(C.h=h),g=C}return h=a.G,d=a.wa,h&&d&&Ae(g,h,d),Ae(g,"VER",a.ka),$s(a,g),g}function nE(a,d,h){if(d&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return d=a.Aa&&!a.ma?new Pe(new $c({ab:h})):new Pe(a.ma),d.Fa(a.L),d}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function rE(){}t=rE.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Kc(){}Kc.prototype.g=function(a,d){return new Vt(a,d)};function Vt(a,d){mt.call(this),this.g=new G_(d),this.l=a,this.h=d&&d.messageUrlParams||null,a=d&&d.messageHeaders||null,d&&d.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=d&&d.initMessageHeaders||null,d&&d.messageContentType&&(a?a["X-WebChannel-Content-Type"]=d.messageContentType:a={"X-WebChannel-Content-Type":d.messageContentType}),d&&d.sa&&(a?a["X-WebChannel-Client-Profile"]=d.sa:a={"X-WebChannel-Client-Profile":d.sa}),this.g.U=a,(a=d&&d.Qb)&&!_(a)&&(this.g.u=a),this.A=d&&d.supportsCrossDomainXhr||!1,this.v=d&&d.sendRawJson||!1,(d=d&&d.httpSessionIdParam)&&!_(d)&&(this.g.G=d,a=this.h,a!==null&&d in a&&(a=this.h,d in a&&delete a[d])),this.j=new Ji(this)}p(Vt,mt),Vt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){ih(this.g)},Vt.prototype.o=function(a){var d=this.g;if(typeof a=="string"){var h={};h.__data__=a,a=h}else this.v&&(h={},h.__data__=Gf(a),a=h);d.i.push(new VS(d.Ya++,a)),d.I==3&&Gc(d)},Vt.prototype.N=function(){this.g.l=null,delete this.j,ih(this.g),delete this.g,Vt.Z.N.call(this)};function iE(a){Wf.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var d=a.__sm__;if(d){e:{for(let h in d){a=h;break e}a=void 0}(this.i=a)&&(a=this.i,d=d!==null&&a in d?d[a]:void 0),this.data=d}else this.data=a}p(iE,Wf);function oE(){Kf.call(this),this.status=1}p(oE,Kf);function Ji(a){this.g=a}p(Ji,rE),Ji.prototype.ra=function(){wt(this.g,"a")},Ji.prototype.qa=function(a){wt(this.g,new iE(a))},Ji.prototype.pa=function(a){wt(this.g,new oE)},Ji.prototype.oa=function(){wt(this.g,"b")},Kc.prototype.createWebChannel=Kc.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,Wm=ir.createWebChannelTransport=function(){return new Kc},Gm=ir.getStatEventTarget=function(){return Vc()},qm=ir.Event=$r,Fd=ir.Stat={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},jc.NO_ERROR=0,jc.TIMEOUT=8,jc.HTTP_ERROR=6,hc=ir.ErrorCode=jc,w_.COMPLETE="complete",zm=ir.EventType=w_,m_.EventType=As,As.OPEN="a",As.CLOSE="b",As.ERROR="c",As.MESSAGE="d",mt.prototype.listen=mt.prototype.J,Qo=ir.WebChannel=m_,_F=ir.FetchXmlHttpFactory=$c,Pe.prototype.listenOnce=Pe.prototype.K,Pe.prototype.getLastError=Pe.prototype.Ha,Pe.prototype.getLastErrorCode=Pe.prototype.ya,Pe.prototype.getStatus=Pe.prototype.ca,Pe.prototype.getResponseJson=Pe.prototype.La,Pe.prototype.getResponseText=Pe.prototype.la,Pe.prototype.send=Pe.prototype.ea,Pe.prototype.setWithCredentials=Pe.prototype.Fa,Hm=ir.XhrIo=Pe}).apply(typeof kd<"u"?kd:typeof self<"u"?self:typeof window<"u"?window:{});var tT="@firebase/firestore",nT="4.9.2";var st=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};st.UNAUTHENTICATED=new st(null),st.GOOGLE_CREDENTIALS=new st("google-credentials-uid"),st.FIRST_PARTY=new st("first-party-uid"),st.MOCK_USER=new st("mock-user");var Es="12.3.0";var Bi=new ko("@firebase/firestore");function Yo(){return Bi.logLevel}function B(t,...e){if(Bi.logLevel<=pe.DEBUG){let n=e.map(Nv);Bi.debug(`Firestore (${Es}): ${t}`,...n)}}function or(t,...e){if(Bi.logLevel<=pe.ERROR){let n=e.map(Nv);Bi.error(`Firestore (${Es}): ${t}`,...n)}}function is(t,...e){if(Bi.logLevel<=pe.WARN){let n=e.map(Nv);Bi.warn(`Firestore (${Es}): ${t}`,...n)}}function Nv(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}function W(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,$T(t,r,n)}function $T(t,e,n){let r=`FIRESTORE (${Es}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw or(r),new Error(r)}function Ie(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||$T(e,i,r)}function X(t,e){return t}var N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},U=class extends Xn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var vn=class{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}};var Hd=class{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Xm=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(st.UNAUTHENTICATED))}shutdown(){}},ey=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}},ty=class{constructor(e){this.t=e,this.currentUser=st.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ie(this.o===void 0,42304);let r=this.i,i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve(),o=new vn;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new vn,e.enqueueRetryable(()=>i(this.currentUser))};let s=()=>{let u=o;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},c=u=>{B("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(u=>c(u)),setTimeout(()=>{if(!this.auth){let u=this.t.getImmediate({optional:!0});u?c(u):(B("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new vn)}},0),s()}getToken(){let e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(B("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ie(typeof r.accessToken=="string",31837,{l:r}),new Hd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return Ie(e===null||typeof e=="string",2055,{h:e}),new st(e)}},ny=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=st.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);let e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}},ry=class{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new ny(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(st.FIRST_PARTY))}shutdown(){}invalidateToken(){}},zd=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},iy=class{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,JD(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ie(this.o===void 0,3512);let r=o=>{o.error!=null&&B("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let s=o.token!==this.m;return this.m=o.token,B("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{B("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.V.getImmediate({optional:!0});o?i(o):B("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new zd(this.p));let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ie(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new zd(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function EF(t){let e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var _c=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516),r="";for(;r.length<20;){let i=EF(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%62))}return r}};function ce(t,e){return t<e?-1:t>e?1:0}function oy(t,e){let n=Math.min(t.length,e.length);for(let r=0;r<n;r++){let i=t.charAt(r),o=e.charAt(r);if(i!==o)return Km(i)===Km(o)?ce(i,o):Km(i)?1:-1}return ce(t.length,e.length)}var wF=55296,IF=57343;function Km(t){let e=t.charCodeAt(0);return e>=wF&&e<=IF}function os(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}var rT="__name__",qd=class t{constructor(e,n,r){n===void 0?n=0:n>e.length&&W(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&W(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return t.comparator(this,e)===0}child(e){let n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){let r=Math.min(e.length,n.length);for(let i=0;i<r;i++){let o=t.compareSegments(e.get(i),n.get(i));if(o!==0)return o}return ce(e.length,n.length)}static compareSegments(e,n){let r=t.isNumericId(e),i=t.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?t.extractNumericId(e).compare(t.extractNumericId(n)):oy(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return rr.fromString(e.substring(4,e.length-2))}},Ne=class t extends qd{construct(e,n,r){return new t(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let n=[];for(let r of e){if(r.indexOf("//")>=0)throw new U(N.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new t(n)}static emptyPath(){return new t([])}},DF=/^[_a-zA-Z][_a-zA-Z0-9]*$/,qt=class t extends qd{construct(e,n,r){return new t(e,n,r)}static isValidIdentifier(e){return DF.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),t.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===rT}static keyField(){return new t([rT])}static fromServerFormat(e){let n=[],r="",i=0,o=()=>{if(r.length===0)throw new U(N.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""},s=!1;for(;i<e.length;){let c=e[i];if(c==="\\"){if(i+1===e.length)throw new U(N.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new U(N.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else c==="`"?(s=!s,i++):c!=="."||s?(r+=c,i++):(o(),i++)}if(o(),s)throw new U(N.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new t(n)}static emptyPath(){return new t([])}};var G=class t{constructor(e){this.path=e}static fromPath(e){return new t(Ne.fromString(e))}static fromName(e){return new t(Ne.fromString(e).popFirst(5))}static empty(){return new t(Ne.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ne.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Ne.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new t(new Ne(e.slice()))}};function HT(t,e,n){if(!n)throw new U(N.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function bF(t,e,n,r){if(e===!0&&r===!0)throw new U(N.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function iT(t){if(!G.isDocumentKey(t))throw new U(N.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function oT(t){if(G.isDocumentKey(t))throw new U(N.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function zT(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Pv(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{let e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":W(12329,{type:typeof t})}function ss(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new U(N.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let n=Pv(t);throw new U(N.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function Ge(t,e){let n={typeString:t};return e&&(n.value=e),n}function Rc(t,e){if(!zT(t))throw new U(N.INVALID_ARGUMENT,"JSON must be an object");let n;for(let r in e)if(e[r]){let i=e[r].typeString,o="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}let s=t[r];if(i&&typeof s!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(o!==void 0&&s!==o.value){n=`Expected '${r}' field to equal '${o.value}'`;break}}if(n)throw new U(N.INVALID_ARGUMENT,n);return!0}var sT=-62135596800,aT=1e6,We=class t{static now(){return t.fromMillis(Date.now())}static fromDate(e){return t.fromMillis(e.getTime())}static fromMillis(e){let n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*aT);return new t(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new U(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new U(N.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<sT)throw new U(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new U(N.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/aT}_compareTo(e){return this.seconds===e.seconds?ce(this.nanoseconds,e.nanoseconds):ce(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:t._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Rc(e,t._jsonSchema))return new t(e.seconds,e.nanoseconds)}valueOf(){let e=this.seconds-sT;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};We._jsonSchemaVersion="firestore/timestamp/1.0",We._jsonSchema={type:Ge("string",We._jsonSchemaVersion),seconds:Ge("number"),nanoseconds:Ge("number")};var re=class t{static fromTimestamp(e){return new t(e)}static min(){return new t(new We(0,0))}static max(){return new t(new We(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Ec=-1,sy=class{constructor(e,n,r,i){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=i}};sy.UNKNOWN_ID=-1;function TF(t,e){let n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new We(n+1,0):new We(n,r));return new Ui(i,G.empty(),e)}function CF(t){return new Ui(t.readTime,t.key,Ec)}var Ui=class t{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new t(re.min(),G.empty(),Ec)}static max(){return new t(re.max(),G.empty(),Ec)}};function SF(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=G.comparator(t.documentKey,e.documentKey),n!==0?n:ce(t.largestBatchId,e.largestBatchId))}var AF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ay=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};async function ws(t){if(t.code!==N.FAILED_PRECONDITION||t.message!==AF)throw t;B("LocalStore","Unexpectedly lost primary lease")}var O=class t{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&W(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{let n=e();return n instanceof t?n:t.resolve(n)}catch(n){return t.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):t.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):t.reject(n)}static resolve(e){return new t((n,r)=>{n(e)})}static reject(e){return new t((n,r)=>{r(e)})}static waitFor(e){return new t((n,r)=>{let i=0,o=0,s=!1;e.forEach(c=>{++i,c.next(()=>{++o,s&&o===i&&n()},u=>r(u))}),s=!0,o===i&&n()})}static or(e){let n=t.resolve(!1);for(let r of e)n=n.next(i=>i?t.resolve(i):r());return n}static forEach(e,n){let r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new t((r,i)=>{let o=e.length,s=new Array(o),c=0;for(let u=0;u<o;u++){let l=u;n(e[l]).next(f=>{s[l]=f,++c,c===o&&r(s)},f=>i(f))}})}static doWhile(e,n){return new t((r,i)=>{let o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}};function RF(t){let e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Is(t){return t.name==="IndexedDbTransactionError"}var Ov=(()=>{class t{constructor(n,r){this.previousValue=n,r&&(r.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>r.writeSequenceNumber(i))}ae(n){return this.previousValue=Math.max(n,this.previousValue),this.previousValue}next(){let n=++this.previousValue;return this.ue&&this.ue(n),n}}t.ce=-1;return t})(),kv=-1;function Tf(t){return t==null}function wc(t){return t===0&&1/t==-1/0}function xF(t){return typeof t=="number"&&Number.isInteger(t)&&!wc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var qT="";function MF(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=cT(e)),e=NF(t.get(n),e);return cT(e)}function NF(t,e){let n=e,r=t.length;for(let i=0;i<r;i++){let o=t.charAt(i);switch(o){case"\0":n+="";break;case qT:n+="";break;default:n+=o}}return n}function cT(t){return t+qT+""}var PF="remoteDocuments",GT="owner";var WT="mutationQueues";var KT="mutations";var QT="documentMutations",OF="remoteDocumentsV14";var YT="remoteDocumentGlobal";var JT="targets";var ZT="targetDocuments";var XT="targetGlobal",eC="collectionParents";var tC="clientMetadata";var nC="bundles";var rC="namedQueries";var kF="indexConfiguration";var FF="indexState";var LF="indexEntries";var iC="documentOverlays";var VF="globals";var jF=[WT,KT,QT,PF,JT,GT,XT,ZT,tC,YT,eC,nC,rC],aQ=[...jF,iC],BF=[WT,KT,QT,OF,JT,GT,XT,ZT,tC,YT,eC,nC,rC,iC],UF=BF,$F=[...UF,kF,FF,LF];var cQ=[...$F,VF];function uT(t){let e=0;for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Gi(t,e){for(let n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function oC(t){for(let e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var ke=class t{constructor(e,n){this.comparator=e,this.root=n||Fn.EMPTY}insert(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Fn.BLACK,null,null))}remove(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Fn.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){let r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){let e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new es(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new es(this.root,e,this.comparator,!1)}getReverseIterator(){return new es(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new es(this.root,e,this.comparator,!0)}},es=class{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},Fn=class t{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??t.RED,this.left=i??t.EMPTY,this.right=o??t.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new t(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return t.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw W(43730,{key:this.key,value:this.value});if(this.right.isRed())throw W(14113,{key:this.key,value:this.value});let e=this.left.check();if(e!==this.right.check())throw W(27949);return e+(this.isRed()?0:1)}};Fn.EMPTY=null,Fn.RED=!0,Fn.BLACK=!1;Fn.EMPTY=new class{constructor(){this.size=0}get key(){throw W(57766)}get value(){throw W(16141)}get color(){throw W(16727)}get left(){throw W(29726)}get right(){throw W(36894)}copy(e,n,r,i,o){return this}insert(e,n,r){return new Fn(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var at=class t{constructor(e){this.comparator=e,this.data=new ke(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Gd(this.data.getIterator())}getIteratorFrom(e){return new Gd(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(n=>{e.push(n)}),e}toString(){let e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){let n=new t(this.comparator);return n.data=e,n}},Gd=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var kn=class t{constructor(e){this.fields=e,e.sort(qt.comparator)}static empty(){return new t([])}unionWith(e){let n=new at(qt.comparator);for(let r of this.fields)n=n.add(r);for(let r of e)n=n.add(r);return new t(n.toArray())}covers(e){for(let n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return os(this.fields,e.fields,(n,r)=>n.isEqual(r))}};var Wd=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var Et=class t{constructor(e){this.binaryString=e}static fromBase64String(e){let n=(function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Wd("Invalid base64 string: "+o):o}})(e);return new t(n)}static fromUint8Array(e){let n=(function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o})(e);return new t(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){let r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ce(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};Et.EMPTY_BYTE_STRING=new Et("");var HF=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function sr(t){if(Ie(!!t,39018),typeof t=="string"){let e=0,n=HF.exec(t);if(Ie(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:xe(t.seconds),nanos:xe(t.nanos)}}function xe(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ar(t){return typeof t=="string"?Et.fromBase64String(t):Et.fromUint8Array(t)}var sC="server_timestamp",aC="__type__",cC="__previous_value__",uC="__local_write_time__";function Fv(t){return(t?.mapValue?.fields||{})[aC]?.stringValue===sC}function Cf(t){let e=t.mapValue.fields[cC];return Fv(e)?Cf(e):e}function Ic(t){let e=sr(t.mapValue.fields[uC].timestampValue);return new We(e.seconds,e.nanos)}var cy=class{constructor(e,n,r,i,o,s,c,u,l,f){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=c,this.longPollingOptions=u,this.useFetchStreams=l,this.isUsingEmulator=f}},Kd="(default)",Qd=class t{constructor(e,n){this.projectId=e,this.database=n||Kd}static empty(){return new t("","")}get isDefaultDatabase(){return this.database===Kd}isEqual(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database}};var Lv="__type__",lC="__max__",Ld={mapValue:{fields:{__type__:{stringValue:lC}}}},Vv="__vector__",as="value";function jr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Fv(t)?4:fC(t)?9007199254740991:dC(t)?10:11:W(28295,{value:t})}function jn(t,e){if(t===e)return!0;let n=jr(t);if(n!==jr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ic(t).isEqual(Ic(e));case 3:return(function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let s=sr(i.timestampValue),c=sr(o.timestampValue);return s.seconds===c.seconds&&s.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,o){return ar(i.bytesValue).isEqual(ar(o.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,o){return xe(i.geoPointValue.latitude)===xe(o.geoPointValue.latitude)&&xe(i.geoPointValue.longitude)===xe(o.geoPointValue.longitude)})(t,e);case 2:return(function(i,o){if("integerValue"in i&&"integerValue"in o)return xe(i.integerValue)===xe(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let s=xe(i.doubleValue),c=xe(o.doubleValue);return s===c?wc(s)===wc(c):isNaN(s)&&isNaN(c)}return!1})(t,e);case 9:return os(t.arrayValue.values||[],e.arrayValue.values||[],jn);case 10:case 11:return(function(i,o){let s=i.mapValue.fields||{},c=o.mapValue.fields||{};if(uT(s)!==uT(c))return!1;for(let u in s)if(s.hasOwnProperty(u)&&(c[u]===void 0||!jn(s[u],c[u])))return!1;return!0})(t,e);default:return W(52216,{left:t})}}function Dc(t,e){return(t.values||[]).find(n=>jn(n,e))!==void 0}function cs(t,e){if(t===e)return 0;let n=jr(t),r=jr(e);if(n!==r)return ce(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ce(t.booleanValue,e.booleanValue);case 2:return(function(o,s){let c=xe(o.integerValue||o.doubleValue),u=xe(s.integerValue||s.doubleValue);return c<u?-1:c>u?1:c===u?0:isNaN(c)?isNaN(u)?0:-1:1})(t,e);case 3:return lT(t.timestampValue,e.timestampValue);case 4:return lT(Ic(t),Ic(e));case 5:return oy(t.stringValue,e.stringValue);case 6:return(function(o,s){let c=ar(o),u=ar(s);return c.compareTo(u)})(t.bytesValue,e.bytesValue);case 7:return(function(o,s){let c=o.split("/"),u=s.split("/");for(let l=0;l<c.length&&l<u.length;l++){let f=ce(c[l],u[l]);if(f!==0)return f}return ce(c.length,u.length)})(t.referenceValue,e.referenceValue);case 8:return(function(o,s){let c=ce(xe(o.latitude),xe(s.latitude));return c!==0?c:ce(xe(o.longitude),xe(s.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return dT(t.arrayValue,e.arrayValue);case 10:return(function(o,s){let c=o.fields||{},u=s.fields||{},l=c[as]?.arrayValue,f=u[as]?.arrayValue,p=ce(l?.values?.length||0,f?.values?.length||0);return p!==0?p:dT(l,f)})(t.mapValue,e.mapValue);case 11:return(function(o,s){if(o===Ld.mapValue&&s===Ld.mapValue)return 0;if(o===Ld.mapValue)return 1;if(s===Ld.mapValue)return-1;let c=o.fields||{},u=Object.keys(c),l=s.fields||{},f=Object.keys(l);u.sort(),f.sort();for(let p=0;p<u.length&&p<f.length;++p){let m=oy(u[p],f[p]);if(m!==0)return m;let y=cs(c[u[p]],l[f[p]]);if(y!==0)return y}return ce(u.length,f.length)})(t.mapValue,e.mapValue);default:throw W(23264,{he:n})}}function lT(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ce(t,e);let n=sr(t),r=sr(e),i=ce(n.seconds,r.seconds);return i!==0?i:ce(n.nanos,r.nanos)}function dT(t,e){let n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){let o=cs(n[i],r[i]);if(o)return o}return ce(n.length,r.length)}function us(t){return uy(t)}function uy(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){let r=sr(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return ar(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return G.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(let o of n.values||[])i?i=!1:r+=",",r+=uy(o);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){let r=Object.keys(n.fields||{}).sort(),i="{",o=!0;for(let s of r)o?o=!1:i+=",",i+=`${s}:${uy(n.fields[s])}`;return i+"}"})(t.mapValue):W(61005,{value:t})}function Bd(t){switch(jr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:let e=Cf(t);return e?16+Bd(e):16;case 5:return 2*t.stringValue.length;case 6:return ar(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce((i,o)=>i+Bd(o),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Gi(r.fields,(o,s)=>{i+=o.length+Bd(s)}),i})(t.mapValue);default:throw W(13486,{value:t})}}function ly(t){return!!t&&"integerValue"in t}function jv(t){return!!t&&"arrayValue"in t}function fT(t){return!!t&&"nullValue"in t}function hT(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ud(t){return!!t&&"mapValue"in t}function dC(t){return(t?.mapValue?.fields||{})[Lv]?.stringValue===Vv}function gc(t){if(t.geoPointValue)return{geoPointValue:j({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:j({},t.timestampValue)};if(t.mapValue){let e={mapValue:{fields:{}}};return Gi(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=gc(r)),e}if(t.arrayValue){let e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=gc(t.arrayValue.values[n]);return e}return j({},t)}function fC(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===lC}var lQ={mapValue:{fields:{[Lv]:{stringValue:Vv},[as]:{arrayValue:{}}}}};var yn=class t{constructor(e){this.value=e}static empty(){return new t({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ud(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=gc(n)}setAll(e){let n=qt.emptyPath(),r={},i=[];e.forEach((s,c)=>{if(!n.isImmediateParentOf(c)){let u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=c.popLast()}s?r[c.lastSegment()]=gc(s):i.push(c.lastSegment())});let o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){let n=this.field(e.popLast());Ud(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return jn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ud(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Gi(n,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new t(gc(this.value))}};function hC(t){let e=[];return Gi(t.fields,(n,r)=>{let i=new qt([n]);if(Ud(r)){let o=hC(r.mapValue).fields;if(o.length===0)e.push(i);else for(let s of o)e.push(i.child(s))}else e.push(i)}),new kn(e)}var _n=class t{constructor(e,n,r,i,o,s,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=c}static newInvalidDocument(e){return new t(e,0,re.min(),re.min(),re.min(),yn.empty(),0)}static newFoundDocument(e,n,r,i){return new t(e,1,n,re.min(),r,i,0)}static newNoDocument(e,n){return new t(e,2,n,re.min(),re.min(),yn.empty(),0)}static newUnknownDocument(e,n){return new t(e,3,n,re.min(),re.min(),yn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=yn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=yn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new t(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var ls=class{constructor(e,n){this.position=e,this.inclusive=n}};function pT(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){let o=e[i],s=t.position[i];if(o.field.isKeyField()?r=G.comparator(G.fromName(s.referenceValue),n.key):r=cs(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function gT(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!jn(t.position[n],e.position[n]))return!1;return!0}var ds=class{constructor(e,n="asc"){this.field=e,this.dir=n}};function zF(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}var Yd=class{},Xe=class t extends Yd{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new fy(e,n,r):n==="array-contains"?new gy(e,r):n==="in"?new my(e,r):n==="not-in"?new yy(e,r):n==="array-contains-any"?new vy(e,r):new t(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new hy(e,r):new py(e,r)}matches(e){let n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(cs(n,this.value)):n!==null&&jr(this.value)===jr(n)&&this.matchesComparison(cs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return W(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Bn=class t extends Yd{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new t(e,n)}matches(e){return pC(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}};function pC(t){return t.op==="and"}function gC(t){return qF(t)&&pC(t)}function qF(t){for(let e of t.filters)if(e instanceof Bn)return!1;return!0}function dy(t){if(t instanceof Xe)return t.field.canonicalString()+t.op.toString()+us(t.value);if(gC(t))return t.filters.map(e=>dy(e)).join(",");{let e=t.filters.map(n=>dy(n)).join(",");return`${t.op}(${e})`}}function mC(t,e){return t instanceof Xe?(function(r,i){return i instanceof Xe&&r.op===i.op&&r.field.isEqual(i.field)&&jn(r.value,i.value)})(t,e):t instanceof Bn?(function(r,i){return i instanceof Bn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,c)=>o&&mC(s,i.filters[c]),!0):!1})(t,e):void W(19439)}function yC(t){return t instanceof Xe?(function(n){return`${n.field.canonicalString()} ${n.op} ${us(n.value)}`})(t):t instanceof Bn?(function(n){return n.op.toString()+" {"+n.getFilters().map(yC).join(" ,")+"}"})(t):"Filter"}var fy=class extends Xe{constructor(e,n,r){super(e,n,r),this.key=G.fromName(r.referenceValue)}matches(e){let n=G.comparator(e.key,this.key);return this.matchesComparison(n)}},hy=class extends Xe{constructor(e,n){super(e,"in",n),this.keys=vC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}},py=class extends Xe{constructor(e,n){super(e,"not-in",n),this.keys=vC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}};function vC(t,e){return(e.arrayValue?.values||[]).map(n=>G.fromName(n.referenceValue))}var gy=class extends Xe{constructor(e,n){super(e,"array-contains",n)}matches(e){let n=e.data.field(this.field);return jv(n)&&Dc(n.arrayValue,this.value)}},my=class extends Xe{constructor(e,n){super(e,"in",n)}matches(e){let n=e.data.field(this.field);return n!==null&&Dc(this.value.arrayValue,n)}},yy=class extends Xe{constructor(e,n){super(e,"not-in",n)}matches(e){if(Dc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Dc(this.value.arrayValue,n)}},vy=class extends Xe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){let n=e.data.field(this.field);return!(!jv(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Dc(this.value.arrayValue,r))}};var _y=class{constructor(e,n=null,r=[],i=[],o=null,s=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=c,this.Te=null}};function mT(t,e=null,n=[],r=[],i=null,o=null,s=null){return new _y(t,e,n,r,i,o,s)}function Bv(t){let e=X(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>dy(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>(function(o){return o.field.canonicalString()+o.dir})(r)).join(","),Tf(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>us(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>us(r)).join(",")),e.Te=n}return e.Te}function Uv(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!zF(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mC(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!gT(t.startAt,e.startAt)&&gT(t.endAt,e.endAt)}function Ey(t){return G.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}var fs=class{constructor(e,n=null,r=[],i=[],o=null,s="F",c=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=c,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}};function GF(t,e,n,r,i,o,s,c){return new fs(t,e,n,r,i,o,s,c)}function $v(t){return new fs(t)}function yT(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function WF(t){return t.collectionGroup!==null}function mc(t){let e=X(t);if(e.Ie===null){e.Ie=[];let n=new Set;for(let o of e.explicitOrderBy)e.Ie.push(o),n.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(s){let c=new at(qt.comparator);return s.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(c=c.add(l.field))})}),c})(e).forEach(o=>{n.has(o.canonicalString())||o.isKeyField()||e.Ie.push(new ds(o,r))}),n.has(qt.keyField().canonicalString())||e.Ie.push(new ds(qt.keyField(),r))}return e.Ie}function Ln(t){let e=X(t);return e.Ee||(e.Ee=KF(e,mc(t))),e.Ee}function KF(t,e){if(t.limitType==="F")return mT(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new ds(i.field,o)});let n=t.endAt?new ls(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ls(t.startAt.position,t.startAt.inclusive):null;return mT(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function wy(t,e,n){return new fs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Sf(t,e){return Uv(Ln(t),Ln(e))&&t.limitType===e.limitType}function _C(t){return`${Bv(Ln(t))}|lt:${t.limitType}`}function Jo(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>yC(i)).join(", ")}]`),Tf(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>(function(s){return`${s.field.canonicalString()} (${s.dir})`})(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>us(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>us(i)).join(",")),`Target(${r})`})(Ln(t))}; limitType=${t.limitType})`}function Af(t,e){return e.isFoundDocument()&&(function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):G.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)})(t,e)&&(function(r,i){for(let o of mc(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(s,c,u){let l=pT(s,c,u);return s.inclusive?l<=0:l<0})(r.startAt,mc(r),i)||r.endAt&&!(function(s,c,u){let l=pT(s,c,u);return s.inclusive?l>=0:l>0})(r.endAt,mc(r),i))})(t,e)}function QF(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function EC(t){return(e,n)=>{let r=!1;for(let i of mc(t)){let o=YF(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function YF(t,e,n){let r=t.field.isKeyField()?G.comparator(e.key,n.key):(function(o,s,c){let u=s.data.field(o),l=c.data.field(o);return u!==null&&l!==null?cs(u,l):W(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return W(19790,{direction:t.dir})}}var cr=class{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){let n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Gi(this.inner,(n,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return oC(this.inner)}size(){return this.innerSize}};var JF=new ke(G.comparator);function ur(){return JF}var wC=new ke(G.comparator);function pc(...t){let e=wC;for(let n of t)e=e.insert(n.key,n);return e}function IC(t){let e=wC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function ki(){return yc()}function DC(){return yc()}function yc(){return new cr(t=>t.toString(),(t,e)=>t.isEqual(e))}var ZF=new ke(G.comparator),XF=new at(G.comparator);function ue(...t){let e=XF;for(let n of t)e=e.add(n);return e}var eL=new at(ce);function tL(){return eL}function Hv(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:wc(e)?"-0":e}}function bC(t){return{integerValue:""+t}}function nL(t,e){return xF(e)?bC(e):Hv(t,e)}var hs=class{constructor(){this._=void 0}};function rL(t,e,n){return t instanceof ps?(function(i,o){let s={fields:{[aC]:{stringValue:sC},[uC]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Fv(o)&&(o=Cf(o)),o&&(s.fields[cC]=o),{mapValue:s}})(n,e):t instanceof $i?CC(t,e):t instanceof Hi?SC(t,e):(function(i,o){let s=TC(i,o),c=vT(s)+vT(i.Ae);return ly(s)&&ly(i.Ae)?bC(c):Hv(i.serializer,c)})(t,e)}function iL(t,e,n){return t instanceof $i?CC(t,e):t instanceof Hi?SC(t,e):n}function TC(t,e){return t instanceof gs?(function(r){return ly(r)||(function(o){return!!o&&"doubleValue"in o})(r)})(e)?e:{integerValue:0}:null}var ps=class extends hs{},$i=class extends hs{constructor(e){super(),this.elements=e}};function CC(t,e){let n=AC(e);for(let r of t.elements)n.some(i=>jn(i,r))||n.push(r);return{arrayValue:{values:n}}}var Hi=class extends hs{constructor(e){super(),this.elements=e}};function SC(t,e){let n=AC(e);for(let r of t.elements)n=n.filter(i=>!jn(i,r));return{arrayValue:{values:n}}}var gs=class extends hs{constructor(e,n){super(),this.serializer=e,this.Ae=n}};function vT(t){return xe(t.integerValue||t.doubleValue)}function AC(t){return jv(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function oL(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof $i&&i instanceof $i||r instanceof Hi&&i instanceof Hi?os(r.elements,i.elements,jn):r instanceof gs&&i instanceof gs?jn(r.Ae,i.Ae):r instanceof ps&&i instanceof ps})(t.transform,e.transform)}var Iy=class{constructor(e,n){this.version=e,this.transformResults=n}},Vi=class t{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new t}static exists(e){return new t(void 0,e)}static updateTime(e){return new t(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function $d(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}var ms=class{};function RC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Jd(t.key,Vi.none()):new zi(t.key,t.data,Vi.none());{let n=t.data,r=yn.empty(),i=new at(qt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new lr(t.key,r,new kn(i.toArray()),Vi.none())}}function sL(t,e,n){t instanceof zi?(function(i,o,s){let c=i.value.clone(),u=ET(i.fieldTransforms,o,s.transformResults);c.setAll(u),o.convertToFoundDocument(s.version,c).setHasCommittedMutations()})(t,e,n):t instanceof lr?(function(i,o,s){if(!$d(i.precondition,o))return void o.convertToUnknownDocument(s.version);let c=ET(i.fieldTransforms,o,s.transformResults),u=o.data;u.setAll(xC(i)),u.setAll(c),o.convertToFoundDocument(s.version,u).setHasCommittedMutations()})(t,e,n):(function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()})(0,e,n)}function vc(t,e,n,r){return t instanceof zi?(function(o,s,c,u){if(!$d(o.precondition,s))return c;let l=o.value.clone(),f=wT(o.fieldTransforms,u,s);return l.setAll(f),s.convertToFoundDocument(s.version,l).setHasLocalMutations(),null})(t,e,n,r):t instanceof lr?(function(o,s,c,u){if(!$d(o.precondition,s))return c;let l=wT(o.fieldTransforms,u,s),f=s.data;return f.setAll(xC(o)),f.setAll(l),s.convertToFoundDocument(s.version,f).setHasLocalMutations(),c===null?null:c.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(p=>p.field))})(t,e,n,r):(function(o,s,c){return $d(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):c})(t,e,n)}function aL(t,e){let n=null;for(let r of t.fieldTransforms){let i=e.data.field(r.field),o=TC(r.transform,i||null);o!=null&&(n===null&&(n=yn.empty()),n.set(r.field,o))}return n||null}function _T(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&os(r,i,(o,s)=>oL(o,s))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}var zi=class extends ms{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},lr=class extends ms{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function xC(t){let e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){let r=t.data.field(n);e.set(n,r)}}),e}function ET(t,e,n){let r=new Map;Ie(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){let o=t[i],s=o.transform,c=e.data.field(o.field);r.set(o.field,iL(s,c,n[i]))}return r}function wT(t,e,n){let r=new Map;for(let i of t){let o=i.transform,s=n.data.field(i.field);r.set(i.field,rL(o,s,e))}return r}var Jd=class extends ms{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},Dy=class extends ms{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var by=class{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){let r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&sL(o,e,r[i])}}applyToLocalView(e,n){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(n=vc(r,e,n,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(n=vc(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){let r=DC();return this.mutations.forEach(i=>{let o=e.get(i.key),s=o.overlayedDocument,c=this.applyToLocalView(s,o.mutatedFields);c=n.has(i.key)?null:c;let u=RC(s,c);u!==null&&r.set(i.key,u),s.isValidDocument()||s.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ue())}isEqual(e){return this.batchId===e.batchId&&os(this.mutations,e.mutations,(n,r)=>_T(n,r))&&os(this.baseMutations,e.baseMutations,(n,r)=>_T(n,r))}},Ty=class t{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ie(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return ZF})(),o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)}};var Cy=class{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var Sy=class{constructor(e,n){this.count=e,this.unchangedNames=n}};var ze,ge;function cL(t){switch(t){case N.OK:return W(64938);case N.CANCELLED:case N.UNKNOWN:case N.DEADLINE_EXCEEDED:case N.RESOURCE_EXHAUSTED:case N.INTERNAL:case N.UNAVAILABLE:case N.UNAUTHENTICATED:return!1;case N.INVALID_ARGUMENT:case N.NOT_FOUND:case N.ALREADY_EXISTS:case N.PERMISSION_DENIED:case N.FAILED_PRECONDITION:case N.ABORTED:case N.OUT_OF_RANGE:case N.UNIMPLEMENTED:case N.DATA_LOSS:return!0;default:return W(15467,{code:t})}}function MC(t){if(t===void 0)return or("GRPC error has no .code"),N.UNKNOWN;switch(t){case ze.OK:return N.OK;case ze.CANCELLED:return N.CANCELLED;case ze.UNKNOWN:return N.UNKNOWN;case ze.DEADLINE_EXCEEDED:return N.DEADLINE_EXCEEDED;case ze.RESOURCE_EXHAUSTED:return N.RESOURCE_EXHAUSTED;case ze.INTERNAL:return N.INTERNAL;case ze.UNAVAILABLE:return N.UNAVAILABLE;case ze.UNAUTHENTICATED:return N.UNAUTHENTICATED;case ze.INVALID_ARGUMENT:return N.INVALID_ARGUMENT;case ze.NOT_FOUND:return N.NOT_FOUND;case ze.ALREADY_EXISTS:return N.ALREADY_EXISTS;case ze.PERMISSION_DENIED:return N.PERMISSION_DENIED;case ze.FAILED_PRECONDITION:return N.FAILED_PRECONDITION;case ze.ABORTED:return N.ABORTED;case ze.OUT_OF_RANGE:return N.OUT_OF_RANGE;case ze.UNIMPLEMENTED:return N.UNIMPLEMENTED;case ze.DATA_LOSS:return N.DATA_LOSS;default:return W(39323,{code:t})}}(ge=ze||(ze={}))[ge.OK=0]="OK",ge[ge.CANCELLED=1]="CANCELLED",ge[ge.UNKNOWN=2]="UNKNOWN",ge[ge.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ge[ge.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ge[ge.NOT_FOUND=5]="NOT_FOUND",ge[ge.ALREADY_EXISTS=6]="ALREADY_EXISTS",ge[ge.PERMISSION_DENIED=7]="PERMISSION_DENIED",ge[ge.UNAUTHENTICATED=16]="UNAUTHENTICATED",ge[ge.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ge[ge.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ge[ge.ABORTED=10]="ABORTED",ge[ge.OUT_OF_RANGE=11]="OUT_OF_RANGE",ge[ge.UNIMPLEMENTED=12]="UNIMPLEMENTED",ge[ge.INTERNAL=13]="INTERNAL",ge[ge.UNAVAILABLE=14]="UNAVAILABLE",ge[ge.DATA_LOSS=15]="DATA_LOSS";var uL=null;function lL(){return new TextEncoder}var dL=new rr([4294967295,4294967295],0);function IT(t){let e=lL().encode(t),n=new $m;return n.update(e),new Uint8Array(n.digest())}function DT(t){let e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new rr([n,r],0),new rr([i,o],0)]}var Ay=class t{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Fi(`Invalid padding: ${n}`);if(r<0)throw new Fi(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Fi(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Fi(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=rr.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(rr.fromNumber(r)));return i.compare(dL)===1&&(i=new rr([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;let n=IT(e),[r,i]=DT(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);if(!this.we(s))return!1}return!0}static create(e,n,r){let i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new t(o,i,n);return r.forEach(c=>s.insert(c)),s}insert(e){if(this.ge===0)return;let n=IT(e),[r,i]=DT(n);for(let o=0;o<this.hashCount;o++){let s=this.ye(r,i,o);this.Se(s)}}Se(e){let n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}},Fi=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var Zd=class t{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){let i=new Map;return i.set(e,bc.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new t(re.min(),i,new ke(ce),ur(),ue())}},bc=class t{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new t(r,n,ue(),ue(),ue())}};var ts=class{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}},Xd=class{constructor(e,n){this.targetId=e,this.Ce=n}},ef=class{constructor(e,n,r=Et.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}},tf=class{constructor(){this.ve=0,this.Fe=bT(),this.Me=Et.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ue(),n=ue(),r=ue();return this.Fe.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:W(38017,{changeType:o})}}),new bc(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=bT()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ie(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}},Ry=class{constructor(e){this.Ge=e,this.ze=new Map,this.je=ur(),this.Je=Vd(),this.He=Vd(),this.Ye=new ke(ce)}Ze(e){for(let n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(let n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{let r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:W(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){let n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){let o=i.target;if(Ey(o))if(r===0){let s=new G(o.path);this.et(n,s,_n.newNoDocument(s,re.min()))}else Ie(r===1,20013,{expectedCount:r});else{let s=this._t(n);if(s!==r){let c=this.ut(e),u=c?this.ct(c,e,s):1;if(u!==0){this.it(n);let l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,l)}uL?.lt((function(f,p,m,y,A){let x={localCacheCount:f,existenceFilterCount:p.count,databaseId:m.database,projectId:m.projectId},S=p.unchangedNames;return S&&(x.bloomFilter={applied:A===0,hashCount:S?.hashCount??0,bitmapLength:S?.bits?.bitmap?.length??0,padding:S?.bits?.padding??0,mightContain:k=>y?.mightContain(k)??!1}),x})(s,e.Ce,this.Ge.ht(),c,u))}}}}ut(e){let n=e.Ce.unchangedNames;if(!n||!n.bits)return null;let{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n,s,c;try{s=ar(r).toUint8Array()}catch(u){if(u instanceof Wd)return is("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{c=new Ay(s,i,o)}catch(u){return is(u instanceof Fi?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){let r=this.Ge.getRemoteKeysForTarget(n),i=0;return r.forEach(o=>{let s=this.Ge.ht(),c=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(c)||(this.et(n,o,null),i++)}),i}Tt(e){let n=new Map;this.ze.forEach((o,s)=>{let c=this.ot(s);if(c){if(o.current&&Ey(c.target)){let u=new G(c.target.path);this.It(u).has(s)||this.Et(s,u)||this.et(s,u,_n.newNoDocument(u,e))}o.Be&&(n.set(s,o.ke()),o.qe())}});let r=ue();this.He.forEach((o,s)=>{let c=!0;s.forEachWhile(u=>{let l=this.ot(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)}),c&&(r=r.add(o))}),this.je.forEach((o,s)=>s.setReadTime(e));let i=new Zd(e,n,this.Ye,this.je,r);return this.je=ur(),this.Je=Vd(),this.He=Vd(),this.Ye=new ke(ce),i}Xe(e,n){if(!this.rt(e))return;let r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;let i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){let n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new tf,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new at(ce),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new at(ce),this.Je=this.Je.insert(e,n)),n}rt(e){let n=this.ot(e)!==null;return n||B("WatchChangeAggregator","Detected inactive target",e),n}ot(e){let n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new tf),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}};function Vd(){return new ke(G.comparator)}function bT(){return new ke(G.comparator)}var fL={asc:"ASCENDING",desc:"DESCENDING"},hL={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},pL={and:"AND",or:"OR"},xy=class{constructor(e,n){this.databaseId=e,this.useProto3Json=n}};function My(t,e){return t.useProto3Json||Tf(e)?e:{value:e}}function nf(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function NC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function gL(t,e){return nf(t,e.toTimestamp())}function Vn(t){return Ie(!!t,49232),re.fromTimestamp((function(n){let r=sr(n);return new We(r.seconds,r.nanos)})(t))}function zv(t,e){return Ny(t,e).canonicalString()}function Ny(t,e){let n=(function(i){return new Ne(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function PC(t){let e=Ne.fromString(t);return Ie(VC(e),10190,{key:e.toString()}),e}function Py(t,e){return zv(t.databaseId,e.path)}function Qm(t,e){let n=PC(e);if(n.get(1)!==t.databaseId.projectId)throw new U(N.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new U(N.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new G(kC(n))}function OC(t,e){return zv(t.databaseId,e)}function mL(t){let e=PC(t);return e.length===4?Ne.emptyPath():kC(e)}function Oy(t){return new Ne(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function kC(t){return Ie(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function TT(t,e,n){return{name:Py(t,e),fields:n.value.mapValue.fields}}function yL(t,e){let n;if("targetChange"in e){e.targetChange;let r=(function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:W(39313,{state:l})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=(function(l,f){return l.useProto3Json?(Ie(f===void 0||typeof f=="string",58123),Et.fromBase64String(f||"")):(Ie(f===void 0||f instanceof Buffer||f instanceof Uint8Array,16193),Et.fromUint8Array(f||new Uint8Array))})(t,e.targetChange.resumeToken),s=e.targetChange.cause,c=s&&(function(l){let f=l.code===void 0?N.UNKNOWN:MC(l.code);return new U(f,l.message||"")})(s);n=new ef(r,i,o,c||null)}else if("documentChange"in e){e.documentChange;let r=e.documentChange;r.document,r.document.name,r.document.updateTime;let i=Qm(t,r.document.name),o=Vn(r.document.updateTime),s=r.document.createTime?Vn(r.document.createTime):re.min(),c=new yn({mapValue:{fields:r.document.fields}}),u=_n.newFoundDocument(i,o,s,c),l=r.targetIds||[],f=r.removedTargetIds||[];n=new ts(l,f,u.key,u)}else if("documentDelete"in e){e.documentDelete;let r=e.documentDelete;r.document;let i=Qm(t,r.document),o=r.readTime?Vn(r.readTime):re.min(),s=_n.newNoDocument(i,o),c=r.removedTargetIds||[];n=new ts([],c,s.key,s)}else if("documentRemove"in e){e.documentRemove;let r=e.documentRemove;r.document;let i=Qm(t,r.document),o=r.removedTargetIds||[];n=new ts([],o,i,null)}else{if(!("filter"in e))return W(11601,{Rt:e});{e.filter;let r=e.filter;r.targetId;let{count:i=0,unchangedNames:o}=r,s=new Sy(i,o),c=r.targetId;n=new Xd(c,s)}}return n}function vL(t,e){let n;if(e instanceof zi)n={update:TT(t,e.key,e.value)};else if(e instanceof Jd)n={delete:Py(t,e.key)};else if(e instanceof lr)n={update:TT(t,e.key,e.data),updateMask:SL(e.fieldMask)};else{if(!(e instanceof Dy))return W(16599,{Vt:e.type});n={verify:Py(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>(function(o,s){let c=s.transform;if(c instanceof ps)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof $i)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Hi)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof gs)return{fieldPath:s.field.canonicalString(),increment:c.Ae};throw W(20930,{transform:s.transform})})(0,r))),e.precondition.isNone||(n.currentDocument=(function(i,o){return o.updateTime!==void 0?{updateTime:gL(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:W(27497)})(t,e.precondition)),n}function _L(t,e){return t&&t.length>0?(Ie(e!==void 0,14353),t.map(n=>(function(i,o){let s=i.updateTime?Vn(i.updateTime):Vn(o);return s.isEqual(re.min())&&(s=Vn(o)),new Iy(s,i.transformResults||[])})(n,e))):[]}function EL(t,e){return{documents:[OC(t,e.path)]}}function wL(t,e){let n={structuredQuery:{}},r=e.path,i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=OC(t,i);let o=(function(l){if(l.length!==0)return LC(Bn.create(l,"and"))})(e.filters);o&&(n.structuredQuery.where=o);let s=(function(l){if(l.length!==0)return l.map(f=>(function(m){return{field:Zo(m.field),direction:bL(m.dir)}})(f))})(e.orderBy);s&&(n.structuredQuery.orderBy=s);let c=My(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(l){return{before:l.inclusive,values:l.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(l){return{before:!l.inclusive,values:l.position}})(e.endAt)),{ft:n,parent:i}}function IL(t){let e=mL(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Ie(r===1,65062);let f=n.from[0];f.allDescendants?i=f.collectionId:e=e.child(f.collectionId)}let o=[];n.where&&(o=(function(p){let m=FC(p);return m instanceof Bn&&gC(m)?m.getFilters():[m]})(n.where));let s=[];n.orderBy&&(s=(function(p){return p.map(m=>(function(A){return new ds(Xo(A.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(A.direction))})(m))})(n.orderBy));let c=null;n.limit&&(c=(function(p){let m;return m=typeof p=="object"?p.value:p,Tf(m)?null:m})(n.limit));let u=null;n.startAt&&(u=(function(p){let m=!!p.before,y=p.values||[];return new ls(y,m)})(n.startAt));let l=null;return n.endAt&&(l=(function(p){let m=!p.before,y=p.values||[];return new ls(y,m)})(n.endAt)),GF(e,i,s,o,c,"F",u,l)}function DL(t,e){let n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return W(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function FC(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":let r=Xo(n.unaryFilter.field);return Xe.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Xo(n.unaryFilter.field);return Xe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Xo(n.unaryFilter.field);return Xe.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let s=Xo(n.unaryFilter.field);return Xe.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return W(61313);default:return W(60726)}})(t):t.fieldFilter!==void 0?(function(n){return Xe.create(Xo(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return W(58110);default:return W(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return Bn.create(n.compositeFilter.filters.map(r=>FC(r)),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return W(1026)}})(n.compositeFilter.op))})(t):W(30097,{filter:t})}function bL(t){return fL[t]}function TL(t){return hL[t]}function CL(t){return pL[t]}function Zo(t){return{fieldPath:t.canonicalString()}}function Xo(t){return qt.fromServerFormat(t.fieldPath)}function LC(t){return t instanceof Xe?(function(n){if(n.op==="=="){if(hT(n.value))return{unaryFilter:{field:Zo(n.field),op:"IS_NAN"}};if(fT(n.value))return{unaryFilter:{field:Zo(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(hT(n.value))return{unaryFilter:{field:Zo(n.field),op:"IS_NOT_NAN"}};if(fT(n.value))return{unaryFilter:{field:Zo(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zo(n.field),op:TL(n.op),value:n.value}}})(t):t instanceof Bn?(function(n){let r=n.getFilters().map(i=>LC(i));return r.length===1?r[0]:{compositeFilter:{op:CL(n.op),filters:r}}})(t):W(54877,{filter:t})}function SL(t){let e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function VC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}var Tc=class t{constructor(e,n,r,i,o=re.min(),s=re.min(),c=Et.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=c,this.expectedCount=u}withSequenceNumber(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}};var ky=class{constructor(e){this.yt=e}};function AL(t){let e=IL({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?wy(e,e.limit,"L"):e}var rf=class{constructor(){}Dt(e,n){this.Ct(e,n),n.vt()}Ct(e,n){if("nullValue"in e)this.Ft(n,5);else if("booleanValue"in e)this.Ft(n,10),n.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(n,15),n.Mt(xe(e.integerValue));else if("doubleValue"in e){let r=xe(e.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),wc(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in e){let r=e.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=sr(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,n),this.Nt(n);else if("bytesValue"in e)this.Ft(n,30),n.Bt(ar(e.bytesValue)),this.Nt(n);else if("referenceValue"in e)this.Lt(e.referenceValue,n);else if("geoPointValue"in e){let r=e.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in e?fC(e)?this.Ft(n,Number.MAX_SAFE_INTEGER):dC(e)?this.kt(e.mapValue,n):(this.qt(e.mapValue,n),this.Nt(n)):"arrayValue"in e?(this.Qt(e.arrayValue,n),this.Nt(n)):W(19022,{$t:e})}Ot(e,n){this.Ft(n,25),this.Ut(e,n)}Ut(e,n){n.xt(e)}qt(e,n){let r=e.fields||{};this.Ft(n,55);for(let i of Object.keys(r))this.Ot(i,n),this.Ct(r[i],n)}kt(e,n){let r=e.fields||{};this.Ft(n,53);let i=as,o=r[i].arrayValue?.values?.length||0;this.Ft(n,15),n.Mt(xe(o)),this.Ot(i,n),this.Ct(r[i],n)}Qt(e,n){let r=e.values||[];this.Ft(n,50);for(let i of r)this.Ct(i,n)}Lt(e,n){this.Ft(n,37),G.fromName(e).path.forEach(r=>{this.Ft(n,60),this.Ut(r,n)})}Ft(e,n){e.Mt(n)}Nt(e){e.Mt(2)}};rf.Kt=new rf;var Fy=class{constructor(){this.Cn=new Ly}addToCollectionParentIndex(e,n){return this.Cn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(Ui.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(Ui.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}},Ly=class{constructor(){this.index={}}add(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new at(Ne.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){let n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new at(Ne.comparator)).toArray()}};var dQ=new Uint8Array(0);var CT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jC=41943040,nn=class t{static withCacheSize(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}};nn.DEFAULT_COLLECTION_PERCENTILE=10,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,nn.DEFAULT=new nn(jC,nn.DEFAULT_COLLECTION_PERCENTILE,nn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),nn.DISABLED=new nn(-1,0,0);var Cc=class t{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new t(0)}static cr(){return new t(-1)}};var ST="LruGarbageCollector",RL=1048576;function AT([t,e],[n,r]){let i=ce(t,n);return i===0?ce(e,r):i}var Vy=class{constructor(e){this.Ir=e,this.buffer=new at(AT),this.Er=0}dr(){return++this.Er}Ar(e){let n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{let r=this.buffer.last();AT(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}},jy=class{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){B(ST,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Is(n)?B(ST,"Ignoring IndexedDB error during garbage collection: ",n):await ws(n)}await this.Vr(3e5)})}},By=class{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return O.resolve(Ov.ce);let r=new Vy(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(B("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(CT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(B("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),CT):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,o,s,c,u,l,f=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(B("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),i=this.params.maximumSequenceNumbersToCollect):i=p,s=Date.now(),this.nthSequenceNumber(e,i))).next(p=>(r=p,c=Date.now(),this.removeTargets(e,r,n))).next(p=>(o=p,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(p=>(l=Date.now(),Yo()<=pe.DEBUG&&B("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${s-f}ms
	Determined least recently used ${i} in `+(c-s)+`ms
	Removed ${o} targets in `+(u-c)+`ms
	Removed ${p} documents in `+(l-u)+`ms
Total Duration: ${l-f}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:o,documentsRemoved:p})))}};function xL(t,e){return new By(t,e)}var Uy=class{constructor(){this.changes=new cr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_n.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();let r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var $y=class{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}};var Hy=class{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&vc(r.mutation,i,kn.empty(),We.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ue()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ue()){let i=ki();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=pc();return o.forEach((c,u)=>{s=s.insert(c,u.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){let r=ki();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ue()))}populateOverlays(e,n,r){let i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,c)=>{n.set(s,c)})})}computeViews(e,n,r,i){let o=ur(),s=yc(),c=(function(){return yc()})();return n.forEach((u,l)=>{let f=r.get(l.key);i.has(l.key)&&(f===void 0||f.mutation instanceof lr)?o=o.insert(l.key,l):f!==void 0?(s.set(l.key,f.mutation.getFieldMask()),vc(f.mutation,l,f.mutation.getFieldMask(),We.now())):s.set(l.key,kn.empty())}),this.recalculateAndSaveOverlays(e,o).next(u=>(u.forEach((l,f)=>s.set(l,f)),n.forEach((l,f)=>c.set(l,new $y(f,s.get(l)??null))),c))}recalculateAndSaveOverlays(e,n){let r=yc(),i=new ke((s,c)=>s-c),o=ue();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(let c of s)c.keys().forEach(u=>{let l=n.get(u);if(l===null)return;let f=r.get(u)||kn.empty();f=c.applyToLocalView(l,f),r.set(u,f);let p=(i.get(c.batchId)||ue()).add(u);i=i.insert(c.batchId,p)})}).next(()=>{let s=[],c=i.getReverseIterator();for(;c.hasNext();){let u=c.getNext(),l=u.key,f=u.value,p=DC();f.forEach(m=>{if(!o.has(m)){let y=RC(n.get(m),r.get(m));y!==null&&p.set(m,y),o=o.add(m)}}),s.push(this.documentOverlayCache.saveOverlays(e,l,p))}return O.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return(function(s){return G.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):WF(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{let s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):O.resolve(ki()),c=Ec,u=o;return s.next(l=>O.forEach(l,(f,p)=>(c<p.largestBatchId&&(c=p.largestBatchId),o.get(f)?O.resolve():this.remoteDocumentCache.getEntry(e,f).next(m=>{u=u.insert(f,m)}))).next(()=>this.populateOverlays(e,l,o)).next(()=>this.computeViews(e,u,l,ue())).next(f=>({batchId:c,changes:IC(f)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new G(n)).next(r=>{let i=pc();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){let o=n.collectionGroup,s=pc();return this.indexManager.getCollectionParents(e,o).next(c=>O.forEach(c,u=>{let l=(function(p,m){return new fs(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(n,u.child(o));return this.getDocumentsMatchingCollectionQuery(e,l,r,i).next(f=>{f.forEach((p,m)=>{s=s.insert(p,m)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(o=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,o,i))).next(s=>{o.forEach((u,l)=>{let f=l.getKey();s.get(f)===null&&(s=s.insert(f,_n.newInvalidDocument(f)))});let c=pc();return s.forEach((u,l)=>{let f=o.get(u);f!==void 0&&vc(f.mutation,l,kn.empty(),We.now()),Af(n,l)&&(c=c.insert(u,l))}),c})}};var zy=class{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return O.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:Vn(i.createTime)}})(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,(function(i){return{name:i.name,query:AL(i.bundledQuery),readTime:Vn(i.readTime)}})(n)),O.resolve()}};var qy=class{constructor(){this.overlays=new ke(G.comparator),this.qr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){let r=ki();return O.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.St(e,n,o)}),O.resolve()}removeOverlaysForBatchId(e,n,r){let i=this.qr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.qr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){let i=ki(),o=n.length+1,s=new G(n.child("")),c=this.overlays.getIteratorFrom(s);for(;c.hasNext();){let u=c.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===o&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new ke((l,f)=>l-f),s=this.overlays.getIterator();for(;s.hasNext();){let l=s.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let f=o.get(l.largestBatchId);f===null&&(f=ki(),o=o.insert(l.largestBatchId,f)),f.set(l.getKey(),l)}}let c=ki(),u=o.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,f)=>c.set(l,f)),!(c.size()>=i)););return O.resolve(c)}St(e,n,r){let i=this.overlays.get(r.key);if(i!==null){let s=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new Cy(n,r));let o=this.qr.get(n);o===void 0&&(o=ue(),this.qr.set(n,o)),this.qr.set(n,o.add(r.key))}};var Gy=class{constructor(){this.sessionToken=Et.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}};var Sc=class{constructor(){this.Qr=new at(qe.$r),this.Ur=new at(qe.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){let r=new qe(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new qe(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){let n=new G(new Ne([])),r=new qe(n,e),i=new qe(n,e+1),o=[];return this.Ur.forEachInRange([r,i],s=>{this.Gr(s),o.push(s.key)}),o}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){let n=new G(new Ne([])),r=new qe(n,e),i=new qe(n,e+1),o=ue();return this.Ur.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){let n=new qe(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}},qe=class{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return G.comparator(e.key,n.key)||ce(e.Yr,n.Yr)}static Kr(e,n){return ce(e.Yr,n.Yr)||G.comparator(e.key,n.key)}};var Wy=class{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new at(qe.$r)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){let o=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let s=new by(o,n,r,i);this.mutationQueue.push(s);for(let c of i)this.Zr=this.Zr.add(new qe(c.key,o)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return O.resolve(s)}lookupMutationBatch(e,n){return O.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){let r=n+1,i=this.ei(r),o=i<0?0:i;return O.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?kv:this.tr-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){let r=new qe(n,0),i=new qe(n,Number.POSITIVE_INFINITY),o=[];return this.Zr.forEachInRange([r,i],s=>{let c=this.Xr(s.Yr);o.push(c)}),O.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new at(ce);return n.forEach(i=>{let o=new qe(i,0),s=new qe(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([o,s],c=>{r=r.add(c.Yr)})}),O.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){let r=n.path,i=r.length+1,o=r;G.isDocumentKey(o)||(o=o.child(""));let s=new qe(new G(o),0),c=new at(ce);return this.Zr.forEachWhile(u=>{let l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(c=c.add(u.Yr)),!0)},s),O.resolve(this.ti(c))}ti(e){let n=[];return e.forEach(r=>{let i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ie(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return O.forEach(n.mutations,i=>{let o=new qe(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){let r=new qe(n,0),i=this.Zr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){let n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}};var Ky=class{constructor(e){this.ri=e,this.docs=(function(){return new ke(G.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){let r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){let r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():_n.newInvalidDocument(n))}getEntries(e,n){let r=ur();return n.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():_n.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=ur(),s=n.path,c=new G(s.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(c);for(;u.hasNext();){let{key:l,value:{document:f}}=u.getNext();if(!s.isPrefixOf(l.path))break;l.path.length>s.length+1||SF(CF(f),r)<=0||(i.has(f.key)||Af(n,f))&&(o=o.insert(f.key,f.mutableCopy()))}return O.resolve(o)}getAllFromCollectionGroup(e,n,r,i){W(9500)}ii(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new Qy(this)}getSize(e){return O.resolve(this.size)}},Qy=class extends Uy{constructor(e){super(),this.Nr=e}applyChanges(e){let n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}};var Yy=class{constructor(e){this.persistence=e,this.si=new cr(n=>Bv(n),Uv),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.oi=0,this._i=new Sc,this.targetCount=0,this.ai=Cc.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),O.resolve()}Pr(e){this.si.set(e.target,e);let n=e.targetId;n>this.highestTargetId&&(this.ai=new Cc(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.Pr(n),O.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0,o=[];return this.si.forEach((s,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.si.delete(s),o.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)}),O.waitFor(o).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){let r=this.si.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),O.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);let i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),O.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),O.resolve()}getMatchingKeysForTargetId(e,n){let r=this._i.Hr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this._i.containsKey(n))}};var of=class{constructor(e,n){this.ui={},this.overlays={},this.ci=new Ov(0),this.li=!1,this.li=!0,this.hi=new Gy,this.referenceDelegate=e(this),this.Pi=new Yy(this),this.indexManager=new Fy,this.remoteDocumentCache=(function(i){return new Ky(i)})(r=>this.referenceDelegate.Ti(r)),this.serializer=new ky(n),this.Ii=new zy(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new qy,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new Wy(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){B("MemoryPersistence","Starting transaction:",e);let i=new Jy(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(o=>this.referenceDelegate.di(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Ai(e,n){return O.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}},Jy=class extends ay{constructor(e){super(),this.currentSequenceNumber=e}},Zy=class t{constructor(e){this.persistence=e,this.Ri=new Sc,this.Vi=null}static mi(e){return new t(e)}get fi(){if(this.Vi)return this.Vi;throw W(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),O.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.fi.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.fi,r=>{let i=G.fromPath(r);return this.gi(e,i).next(o=>{o||n.removeEntry(i,re.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return O.or([()=>O.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}},sf=class t{constructor(e,n){this.persistence=e,this.pi=new cr(r=>MF(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=xL(this,n)}static mi(e,n){return new t(e,n)}Ei(){}di(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){let n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return O.forEach(this.pi,(r,i)=>this.br(e,r,i).next(o=>o?O.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0,i=this.persistence.getRemoteDocumentCache(),o=i.newChangeBuffer();return i.ii(e,s=>this.br(e,s,n).next(c=>{c||(r++,o.removeEntry(s,re.min()))})).next(()=>o.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){let r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),O.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Bd(e.data.value)),n}br(e,n,r){return O.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{let i=this.pi.get(n);return O.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}};var Xy=class t{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=ue(),i=ue();for(let o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new t(e,n.fromCache,r,i)}};var ev=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var tv=class{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return FD()?8:RF(kD())>0?6:4})()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){let o={result:null};return this.ys(e,n).next(s=>{o.result=s}).next(()=>{if(!o.result)return this.ws(e,n,i,r).next(s=>{o.result=s})}).next(()=>{if(o.result)return;let s=new ev;return this.Ss(e,n,s).next(c=>{if(o.result=c,this.Vs)return this.bs(e,n,s,c.size)})}).next(()=>o.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Yo()<=pe.DEBUG&&B("QueryEngine","SDK will not create cache indexes for query:",Jo(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),O.resolve()):(Yo()<=pe.DEBUG&&B("QueryEngine","Query:",Jo(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Yo()<=pe.DEBUG&&B("QueryEngine","The SDK decides to create cache indexes for query:",Jo(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ln(n))):O.resolve())}ys(e,n){if(yT(n))return O.resolve(null);let r=Ln(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=wy(n,null,"F"),r=Ln(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let s=ue(...o);return this.ps.getDocuments(e,s).next(c=>this.indexManager.getMinOffset(e,r).next(u=>{let l=this.Ds(n,c);return this.Cs(n,l,s,u.readTime)?this.ys(e,wy(n,null,"F")):this.vs(e,l,n,u)}))})))}ws(e,n,r,i){return yT(n)||i.isEqual(re.min())?O.resolve(null):this.ps.getDocuments(e,r).next(o=>{let s=this.Ds(n,o);return this.Cs(n,s,r,i)?O.resolve(null):(Yo()<=pe.DEBUG&&B("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Jo(n)),this.vs(e,s,n,TF(i,Ec)).next(c=>c))})}Ds(e,n){let r=new at(EC(e));return n.forEach((i,o)=>{Af(e,o)&&(r=r.add(o))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;let o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Ss(e,n,r){return Yo()<=pe.DEBUG&&B("QueryEngine","Using full collection scan to execute query:",Jo(n)),this.ps.getDocumentsMatchingQuery(e,n,Ui.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}};var qv="LocalStore",ML=3e8,nv=class{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new ke(ce),this.xs=new cr(o=>Bv(o),Uv),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Hy(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}};function NL(t,e,n,r){return new nv(t,e,n,r)}async function BC(t,e){let n=X(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{let s=[],c=[],u=ue();for(let l of i){s.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}for(let l of o){c.push(l.batchId);for(let f of l.mutations)u=u.add(f.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ls:l,removedBatchIds:s,addedBatchIds:c}))})})}function PL(t,e){let n=X(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(c,u,l,f){let p=l.batch,m=p.keys(),y=O.resolve();return m.forEach(A=>{y=y.next(()=>f.getEntry(u,A)).next(x=>{let S=l.docVersions.get(A);Ie(S!==null,48541),x.version.compareTo(S)<0&&(p.applyToRemoteDocument(x,l),x.isValidDocument()&&(x.setReadTime(l.commitVersion),f.addEntry(x)))})}),y.next(()=>c.mutationQueue.removeMutationBatch(u,p))})(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let u=ue();for(let l=0;l<c.mutationResults.length;++l)c.mutationResults[l].transformResults.length>0&&(u=u.add(c.batch.mutations[l].key));return u})(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function UC(t){let e=X(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function OL(t,e){let n=X(t),r=e.snapshotVersion,i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{let s=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;let c=[];e.targetChanges.forEach((f,p)=>{let m=i.get(p);if(!m)return;c.push(n.Pi.removeMatchingKeys(o,f.removedDocuments,p).next(()=>n.Pi.addMatchingKeys(o,f.addedDocuments,p)));let y=m.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(p)!==null?y=y.withResumeToken(Et.EMPTY_BYTE_STRING,re.min()).withLastLimboFreeSnapshotVersion(re.min()):f.resumeToken.approximateByteSize()>0&&(y=y.withResumeToken(f.resumeToken,r)),i=i.insert(p,y),(function(x,S,k){return x.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-x.snapshotVersion.toMicroseconds()>=ML?!0:k.addedDocuments.size+k.modifiedDocuments.size+k.removedDocuments.size>0})(m,y,f)&&c.push(n.Pi.updateTargetData(o,y))});let u=ur(),l=ue();if(e.documentUpdates.forEach(f=>{e.resolvedLimboDocuments.has(f)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(o,f))}),c.push(kL(o,s,e.documentUpdates).next(f=>{u=f.ks,l=f.qs})),!r.isEqual(re.min())){let f=n.Pi.getLastRemoteSnapshotVersion(o).next(p=>n.Pi.setTargetsMetadata(o,o.currentSequenceNumber,r));c.push(f)}return O.waitFor(c).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,u,l)).next(()=>u)}).then(o=>(n.Ms=i,o))}function kL(t,e,n){let r=ue(),i=ue();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=ur();return n.forEach((c,u)=>{let l=o.get(c);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(c)),u.isNoDocument()&&u.version.isEqual(re.min())?(e.removeEntry(c,u.readTime),s=s.insert(c,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(e.addEntry(u),s=s.insert(c,u)):B(qv,"Ignoring outdated watch update for ",c,". Current version:",l.version," Watch version:",u.version)}),{ks:s,qs:i}})}function FL(t,e){let n=X(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=kv),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function LL(t,e){let n=X(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(o=>o?(i=o,O.resolve(i)):n.Pi.allocateTargetId(r).next(s=>(i=new Tc(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{let i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function rv(t,e,n){let r=X(t),i=r.Ms.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!Is(s))throw s;B(qv,`Failed to update sequence numbers for target ${e}: ${s}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function RT(t,e,n){let r=X(t),i=re.min(),o=ue();return r.persistence.runTransaction("Execute query","readwrite",s=>(function(u,l,f){let p=X(u),m=p.xs.get(f);return m!==void 0?O.resolve(p.Ms.get(m)):p.Pi.getTargetData(l,f)})(r,s,Ln(e)).next(c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(s,c.targetId).next(u=>{o=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(s,e,n?i:re.min(),n?o:ue())).next(c=>(VL(r,QF(e),c),{documents:c,Qs:o})))}function VL(t,e,n){let r=t.Os.get(e)||re.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Os.set(e,r)}var af=class{constructor(){this.activeTargetIds=tL()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var iv=class{constructor(){this.Mo=new af,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new af,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var ov=class{Oo(e){}shutdown(){}};var xT="ConnectivityMonitor",cf=class{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){B(xT,"Network connectivity changed: AVAILABLE");for(let e of this.qo)e(0)}ko(){B(xT,"Network connectivity changed: UNAVAILABLE");for(let e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var jd=null;function sv(){return jd===null?jd=(function(){return 268435456+Math.round(2147483648*Math.random())})():jd++,"0x"+jd.toString(16)}var Ym="RestConnection",jL={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},av=class{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;let n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Kd?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,o){let s=sv(),c=this.zo(e,n.toUriEncodedString());B(Ym,`Sending RPC '${e}' ${s}:`,c,r);let u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,o);let{host:l}=new URL(c),f=td(l);return this.Jo(e,c,u,r,f).then(p=>(B(Ym,`Received RPC '${e}' ${s}: `,p),p),p=>{throw is(Ym,`RPC '${e}' ${s} failed with error: `,p,"url: ",c,"request:",r),p})}Ho(e,n,r,i,o,s){return this.Go(e,n,r,i,o)}jo(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Es})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,o)=>e[o]=i),r&&r.headers.forEach((i,o)=>e[o]=i)}zo(e,n){let r=jL[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}};var cv=class{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}};var _t="WebChannelConnection",uv=class extends av{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,o){let s=sv();return new Promise((c,u)=>{let l=new Hm;l.setWithCredentials(!0),l.listenOnce(zm.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case hc.NO_ERROR:let p=l.getResponseJson();B(_t,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(p)),c(p);break;case hc.TIMEOUT:B(_t,`RPC '${e}' ${s} timed out`),u(new U(N.DEADLINE_EXCEEDED,"Request time out"));break;case hc.HTTP_ERROR:let m=l.getStatus();if(B(_t,`RPC '${e}' ${s} failed with status:`,m,"response text:",l.getResponseText()),m>0){let y=l.getResponseJson();Array.isArray(y)&&(y=y[0]);let A=y?.error;if(A&&A.status&&A.message){let x=(function(k){let q=k.toLowerCase().replace(/_/g,"-");return Object.values(N).indexOf(q)>=0?q:N.UNKNOWN})(A.status);u(new U(x,A.message))}else u(new U(N.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new U(N.UNAVAILABLE,"Connection failed."));break;default:W(9055,{l_:e,streamId:s,h_:l.getLastErrorCode(),P_:l.getLastError()})}}finally{B(_t,`RPC '${e}' ${s} completed.`)}});let f=JSON.stringify(i);B(_t,`RPC '${e}' ${s} sending request:`,i),l.send(n,"POST",f,r,15)})}T_(e,n,r){let i=sv(),o=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=Wm(),c=Gm(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;let f=o.join("");B(_t,`Creating RPC '${e}' stream ${i}: ${f}`,u);let p=s.createWebChannel(f,u);this.I_(p);let m=!1,y=!1,A=new cv({Yo:S=>{y?B(_t,`Not sending because RPC '${e}' stream ${i} is closed:`,S):(m||(B(_t,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),B(_t,`RPC '${e}' stream ${i} sending:`,S),p.send(S))},Zo:()=>p.close()}),x=(S,k,q)=>{S.listen(k,ee=>{try{q(ee)}catch(de){setTimeout(()=>{throw de},0)}})};return x(p,Qo.EventType.OPEN,()=>{y||(B(_t,`RPC '${e}' stream ${i} transport opened.`),A.o_())}),x(p,Qo.EventType.CLOSE,()=>{y||(y=!0,B(_t,`RPC '${e}' stream ${i} transport closed`),A.a_(),this.E_(p))}),x(p,Qo.EventType.ERROR,S=>{y||(y=!0,is(_t,`RPC '${e}' stream ${i} transport errored. Name:`,S.name,"Message:",S.message),A.a_(new U(N.UNAVAILABLE,"The operation could not be completed")))}),x(p,Qo.EventType.MESSAGE,S=>{if(!y){let k=S.data[0];Ie(!!k,16349);let q=k,ee=q?.error||q[0]?.error;if(ee){B(_t,`RPC '${e}' stream ${i} received error:`,ee);let de=ee.status,je=(function(v){let E=ze[v];if(E!==void 0)return MC(E)})(de),Re=ee.message;je===void 0&&(je=N.INTERNAL,Re="Unknown error status: "+de+" with message "+ee.message),y=!0,A.a_(new U(je,Re)),p.close()}else B(_t,`RPC '${e}' stream ${i} received:`,k),A.u_(k)}}),x(c,qm.STAT_EVENT,S=>{S.stat===Fd.PROXY?B(_t,`RPC '${e}' stream ${i} detected buffering proxy`):S.stat===Fd.NOPROXY&&B(_t,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{A.__()},0),A}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}};function Jm(){return typeof document<"u"?document:null}function Rf(t){return new xy(t,!0)}var uf=class{constructor(e,n,r=1e3,i=1.5,o=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=o,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();let n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&B("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}};var MT="PersistentStream",lf=class{constructor(e,n,r,i,o,s,c,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=c,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new uf(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===N.RESOURCE_EXHAUSTED?(or(n.toString()),or("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===N.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;let e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{let i=new U(N.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){let r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return B(MT,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(B(MT,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},lv=class extends lf{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();let n=yL(this.serializer,e),r=(function(o){if(!("targetChange"in o))return re.min();let s=o.targetChange;return s.targetIds&&s.targetIds.length?re.min():s.readTime?Vn(s.readTime):re.min()})(e);return this.listener.H_(n,r)}Y_(e){let n={};n.database=Oy(this.serializer),n.addTarget=(function(o,s){let c,u=s.target;if(c=Ey(u)?{documents:EL(o,u)}:{query:wL(o,u).ft},c.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){c.resumeToken=NC(o,s.resumeToken);let l=My(o,s.expectedCount);l!==null&&(c.expectedCount=l)}else if(s.snapshotVersion.compareTo(re.min())>0){c.readTime=nf(o,s.snapshotVersion.toTimestamp());let l=My(o,s.expectedCount);l!==null&&(c.expectedCount=l)}return c})(this.serializer,e);let r=DL(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){let n={};n.database=Oy(this.serializer),n.removeTarget=e,this.q_(n)}},dv=class extends lf{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ie(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ie(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ie(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();let n=_L(e.writeResults,e.commitTime),r=Vn(e.commitTime);return this.listener.na(r,n)}ra(){let e={};e.database=Oy(this.serializer),this.q_(e)}ea(e){let n={streamToken:this.lastStreamToken,writes:e.map(r=>vL(this.serializer,r))};this.q_(n)}};var fv=class{},hv=class extends fv{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new U(N.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.Go(e,Ny(n,r),i,o,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new U(N.UNKNOWN,o.toString())})}Ho(e,n,r,i,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,c])=>this.connection.Ho(e,Ny(n,r),i,s,c,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===N.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new U(N.UNKNOWN,s.toString())})}terminate(){this.ia=!0,this.connection.terminate()}},pv=class{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){let n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(or(n),this.aa=!1):B("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}};var qi="RemoteStore",gv=class{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=o,this.Aa.Oo(s=>{r.enqueueAndForget(async()=>{Wi(this)&&(B(qi,"Restarting streams for network reachability change."),await(async function(u){let l=X(u);l.Ea.add(4),await xc(l),l.Ra.set("Unknown"),l.Ea.delete(4),await xf(l)})(this))})}),this.Ra=new pv(r,i)}};async function xf(t){if(Wi(t))for(let e of t.da)await e(!0)}async function xc(t){for(let e of t.da)await e(!1)}function $C(t,e){let n=X(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),Qv(n)?Kv(n):Ds(n).O_()&&Wv(n,e))}function Gv(t,e){let n=X(t),r=Ds(n);n.Ia.delete(e),r.O_()&&HC(n,e),n.Ia.size===0&&(r.O_()?r.L_():Wi(n)&&n.Ra.set("Unknown"))}function Wv(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(re.min())>0){let n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Ds(t).Y_(e)}function HC(t,e){t.Va.Ue(e),Ds(t).Z_(e)}function Kv(t){t.Va=new Ry({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Ds(t).start(),t.Ra.ua()}function Qv(t){return Wi(t)&&!Ds(t).x_()&&t.Ia.size>0}function Wi(t){return X(t).Ea.size===0}function zC(t){t.Va=void 0}async function BL(t){t.Ra.set("Online")}async function UL(t){t.Ia.forEach((e,n)=>{Wv(t,e)})}async function $L(t,e){zC(t),Qv(t)?(t.Ra.ha(e),Kv(t)):t.Ra.set("Unknown")}async function HL(t,e,n){if(t.Ra.set("Online"),e instanceof ef&&e.state===2&&e.cause)try{await(async function(i,o){let s=o.cause;for(let c of o.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,s),i.Ia.delete(c),i.Va.removeTarget(c))})(t,e)}catch(r){B(qi,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await df(t,r)}else if(e instanceof ts?t.Va.Ze(e):e instanceof Xd?t.Va.st(e):t.Va.tt(e),!n.isEqual(re.min()))try{let r=await UC(t.localStore);n.compareTo(r)>=0&&await(function(o,s){let c=o.Va.Tt(s);return c.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){let f=o.Ia.get(l);f&&o.Ia.set(l,f.withResumeToken(u.resumeToken,s))}}),c.targetMismatches.forEach((u,l)=>{let f=o.Ia.get(u);if(!f)return;o.Ia.set(u,f.withResumeToken(Et.EMPTY_BYTE_STRING,f.snapshotVersion)),HC(o,u);let p=new Tc(f.target,u,l,f.sequenceNumber);Wv(o,p)}),o.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){B(qi,"Failed to raise snapshot:",r),await df(t,r)}}async function df(t,e,n){if(!Is(e))throw e;t.Ea.add(1),await xc(t),t.Ra.set("Offline"),n||(n=()=>UC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{B(qi,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await xf(t)})}function qC(t,e){return e().catch(n=>df(t,n,e))}async function Mf(t){let e=X(t),n=Br(e),r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:kv;for(;zL(e);)try{let i=await FL(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,qL(e,i)}catch(i){await df(e,i)}GC(e)&&WC(e)}function zL(t){return Wi(t)&&t.Ta.length<10}function qL(t,e){t.Ta.push(e);let n=Br(t);n.O_()&&n.X_&&n.ea(e.mutations)}function GC(t){return Wi(t)&&!Br(t).x_()&&t.Ta.length>0}function WC(t){Br(t).start()}async function GL(t){Br(t).ra()}async function WL(t){let e=Br(t);for(let n of t.Ta)e.ea(n.mutations)}async function KL(t,e,n){let r=t.Ta.shift(),i=Ty.from(r,e,n);await qC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Mf(t)}async function QL(t,e){e&&Br(t).X_&&await(async function(r,i){if((function(s){return cL(s)&&s!==N.ABORTED})(i.code)){let o=r.Ta.shift();Br(r).B_(),await qC(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Mf(r)}})(t,e),GC(t)&&WC(t)}async function NT(t,e){let n=X(t);n.asyncQueue.verifyOperationInProgress(),B(qi,"RemoteStore received new credentials");let r=Wi(n);n.Ea.add(3),await xc(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await xf(n)}async function YL(t,e){let n=X(t);e?(n.Ea.delete(2),await xf(n)):e||(n.Ea.add(2),await xc(n),n.Ra.set("Unknown"))}function Ds(t){return t.ma||(t.ma=(function(n,r,i){let o=X(n);return o.sa(),new lv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:BL.bind(null,t),t_:UL.bind(null,t),r_:$L.bind(null,t),H_:HL.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),Qv(t)?Kv(t):t.Ra.set("Unknown")):(await t.ma.stop(),zC(t))})),t.ma}function Br(t){return t.fa||(t.fa=(function(n,r,i){let o=X(n);return o.sa(),new dv(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)})(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:GL.bind(null,t),r_:QL.bind(null,t),ta:WL.bind(null,t),na:KL.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Mf(t)):(await t.fa.stop(),t.Ta.length>0&&(B(qi,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}var mv=class t{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new vn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,o){let s=Date.now()+r,c=new t(e,n,s,i,o);return c.start(r),c}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new U(N.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function Yv(t,e){if(or("AsyncQueue",`${e}: ${t}`),Is(t))return new U(N.UNAVAILABLE,`${e}: ${t}`);throw t}var ff=class t{static emptySet(e){return new t(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||G.comparator(n.key,r.key):(n,r)=>G.comparator(n.key,r.key),this.keyedMap=pc(),this.sortedSet=new ke(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){let n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){let n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){let n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof t)||this.size!==e.size)return!1;let n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){let i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){let e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){let r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}};var hf=class{constructor(){this.ga=new ke(G.comparator)}track(e){let n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):W(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){let e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}},ys=class t{constructor(e,n,r,i,o,s,c,u,l){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=c,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(e,n,r,i,o){let s=[];return n.forEach(c=>{s.push({type:0,doc:c})}),new t(e,n,ff.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Sf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;let n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}};var yv=class{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}},vv=class{constructor(){this.queries=PT(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){let i=X(n),o=i.queries;i.queries=PT(),o.forEach((s,c)=>{for(let u of c.Sa)u.onError(r)})})(this,new U(N.ABORTED,"Firestore shutting down"))}};function PT(){return new cr(t=>_C(t),Sf)}async function KC(t,e){let n=X(t),r=3,i=e.query,o=n.queries.get(i);o?!o.ba()&&e.Da()&&(r=2):(o=new yv,r=e.Da()?0:1);try{switch(r){case 0:o.wa=await n.onListen(i,!0);break;case 1:o.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(s){let c=Yv(s,`Initialization of query '${Jo(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,o),o.Sa.push(e),e.va(n.onlineState),o.wa&&e.Fa(o.wa)&&Jv(n)}async function QC(t,e){let n=X(t),r=e.query,i=3,o=n.queries.get(r);if(o){let s=o.Sa.indexOf(e);s>=0&&(o.Sa.splice(s,1),o.Sa.length===0?i=e.Da()?0:1:!o.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function JL(t,e){let n=X(t),r=!1;for(let i of e){let o=i.query,s=n.queries.get(o);if(s){for(let c of s.Sa)c.Fa(i)&&(r=!0);s.wa=i}}r&&Jv(n)}function ZL(t,e,n){let r=X(t),i=r.queries.get(e);if(i)for(let o of i.Sa)o.onError(n);r.queries.delete(e)}function Jv(t){t.Ca.forEach(e=>{e.next()})}var _v,OT;(OT=_v||(_v={})).Ma="default",OT.Cache="cache";var pf=class{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){let r=[];for(let i of e.docChanges)i.type!==3&&r.push(i);e=new ys(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;let r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;let n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=ys.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==_v.Cache}};var gf=class{constructor(e){this.key=e}},mf=class{constructor(e){this.key=e}},Ev=class{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ue(),this.mutatedKeys=ue(),this.eu=EC(e),this.tu=new ff(this.eu)}get nu(){return this.Ya}ru(e,n){let r=n?n.iu:new hf,i=n?n.tu:this.tu,o=n?n.mutatedKeys:this.mutatedKeys,s=i,c=!1,u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((f,p)=>{let m=i.get(f),y=Af(this.query,p)?p:null,A=!!m&&this.mutatedKeys.has(m.key),x=!!y&&(y.hasLocalMutations||this.mutatedKeys.has(y.key)&&y.hasCommittedMutations),S=!1;m&&y?m.data.isEqual(y.data)?A!==x&&(r.track({type:3,doc:y}),S=!0):this.su(m,y)||(r.track({type:2,doc:y}),S=!0,(u&&this.eu(y,u)>0||l&&this.eu(y,l)<0)&&(c=!0)):!m&&y?(r.track({type:0,doc:y}),S=!0):m&&!y&&(r.track({type:1,doc:m}),S=!0,(u||l)&&(c=!0)),S&&(y?(s=s.add(y),o=x?o.add(f):o.delete(f)):(s=s.delete(f),o=o.delete(f)))}),this.query.limit!==null)for(;s.size>this.query.limit;){let f=this.query.limitType==="F"?s.last():s.first();s=s.delete(f.key),o=o.delete(f.key),r.track({type:1,doc:f})}return{tu:s,iu:r,Cs:c,mutatedKeys:o}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){let o=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;let s=e.iu.ya();s.sort((f,p)=>(function(y,A){let x=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return W(20277,{Rt:S})}};return x(y)-x(A)})(f.type,p.type)||this.eu(f.doc,p.doc)),this.ou(r),i=i??!1;let c=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,l=u!==this.Za;return this.Za=u,s.length!==0||l?{snapshot:new ys(this.query,e.tu,o,s,e.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new hf,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];let e=this.Xa;this.Xa=ue(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});let n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new mf(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new gf(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=ue();let n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return ys.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}},Zv="SyncEngine",wv=class{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}},Iv=class{constructor(e){this.key=e,this.hu=!1}},Dv=class{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Pu={},this.Tu=new cr(c=>_C(c),Sf),this.Iu=new Map,this.Eu=new Set,this.du=new ke(G.comparator),this.Au=new Map,this.Ru=new Sc,this.Vu={},this.mu=new Map,this.fu=Cc.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}};async function XL(t,e,n=!0){let r=tS(t),i,o=r.Tu.get(e);return o?(r.sharedClientState.addLocalQueryTarget(o.targetId),i=o.view.lu()):i=await YC(r,e,n,!0),i}async function e2(t,e){let n=tS(t);await YC(n,e,!0,!1)}async function YC(t,e,n,r){let i=await LL(t.localStore,Ln(e)),o=i.targetId,s=t.sharedClientState.addLocalQueryTarget(o,n),c;return r&&(c=await t2(t,e,o,s==="current",i.resumeToken)),t.isPrimaryClient&&n&&$C(t.remoteStore,i),c}async function t2(t,e,n,r,i){t.pu=(p,m,y)=>(async function(x,S,k,q){let ee=S.view.ru(k);ee.Cs&&(ee=await RT(x.localStore,S.query,!1).then(({documents:w})=>S.view.ru(w,ee)));let de=q&&q.targetChanges.get(S.targetId),je=q&&q.targetMismatches.get(S.targetId)!=null,Re=S.view.applyChanges(ee,x.isPrimaryClient,de,je);return FT(x,S.targetId,Re.au),Re.snapshot})(t,p,m,y);let o=await RT(t.localStore,e,!0),s=new Ev(e,o.Qs),c=s.ru(o.documents),u=bc.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),l=s.applyChanges(c,t.isPrimaryClient,u);FT(t,n,l.au);let f=new wv(e,n,s);return t.Tu.set(e,f),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),l.snapshot}async function n2(t,e,n){let r=X(t),i=r.Tu.get(e),o=r.Iu.get(i.targetId);if(o.length>1)return r.Iu.set(i.targetId,o.filter(s=>!Sf(s,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await rv(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Gv(r.remoteStore,i.targetId),bv(r,i.targetId)}).catch(ws)):(bv(r,i.targetId),await rv(r.localStore,i.targetId,!0))}async function r2(t,e){let n=X(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Gv(n.remoteStore,r.targetId))}async function i2(t,e,n){let r=d2(t);try{let i=await(function(s,c){let u=X(s),l=We.now(),f=c.reduce((y,A)=>y.add(A.key),ue()),p,m;return u.persistence.runTransaction("Locally write mutations","readwrite",y=>{let A=ur(),x=ue();return u.Ns.getEntries(y,f).next(S=>{A=S,A.forEach((k,q)=>{q.isValidDocument()||(x=x.add(k))})}).next(()=>u.localDocuments.getOverlayedDocuments(y,A)).next(S=>{p=S;let k=[];for(let q of c){let ee=aL(q,p.get(q.key).overlayedDocument);ee!=null&&k.push(new lr(q.key,ee,hC(ee.value.mapValue),Vi.exists(!0)))}return u.mutationQueue.addMutationBatch(y,l,k,c)}).next(S=>{m=S;let k=S.applyToLocalDocumentSet(p,x);return u.documentOverlayCache.saveOverlays(y,S.batchId,k)})}).then(()=>({batchId:m.batchId,changes:IC(p)}))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(s,c,u){let l=s.Vu[s.currentUser.toKey()];l||(l=new ke(ce)),l=l.insert(c,u),s.Vu[s.currentUser.toKey()]=l})(r,i.batchId,n),await Mc(r,i.changes),await Mf(r.remoteStore)}catch(i){let o=Yv(i,"Failed to persist write");n.reject(o)}}async function JC(t,e){let n=X(t);try{let r=await OL(n.localStore,e);e.targetChanges.forEach((i,o)=>{let s=n.Au.get(o);s&&(Ie(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?s.hu=!0:i.modifiedDocuments.size>0?Ie(s.hu,14607):i.removedDocuments.size>0&&(Ie(s.hu,42227),s.hu=!1))}),await Mc(n,r,e)}catch(r){await ws(r)}}function kT(t,e,n){let r=X(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){let i=[];r.Tu.forEach((o,s)=>{let c=s.view.va(e);c.snapshot&&i.push(c.snapshot)}),(function(s,c){let u=X(s);u.onlineState=c;let l=!1;u.queries.forEach((f,p)=>{for(let m of p.Sa)m.va(c)&&(l=!0)}),l&&Jv(u)})(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function o2(t,e,n){let r=X(t);r.sharedClientState.updateQueryState(e,"rejected",n);let i=r.Au.get(e),o=i&&i.key;if(o){let s=new ke(G.comparator);s=s.insert(o,_n.newNoDocument(o,re.min()));let c=ue().add(o),u=new Zd(re.min(),new Map,new ke(ce),s,c);await JC(r,u),r.du=r.du.remove(o),r.Au.delete(e),Xv(r)}else await rv(r.localStore,e,!1).then(()=>bv(r,e,n)).catch(ws)}async function s2(t,e){let n=X(t),r=e.batch.batchId;try{let i=await PL(n.localStore,e);XC(n,r,null),ZC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Mc(n,i)}catch(i){await ws(i)}}async function a2(t,e,n){let r=X(t);try{let i=await(function(s,c){let u=X(s);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let f;return u.mutationQueue.lookupMutationBatch(l,c).next(p=>(Ie(p!==null,37113),f=p.keys(),u.mutationQueue.removeMutationBatch(l,p))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,f,c)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,f)).next(()=>u.localDocuments.getDocuments(l,f))})})(r.localStore,e);XC(r,e,n),ZC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Mc(r,i)}catch(i){await ws(i)}}function ZC(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function XC(t,e,n){let r=X(t),i=r.Vu[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function bv(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(let r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||eS(t,r)})}function eS(t,e){t.Eu.delete(e.path.canonicalString());let n=t.du.get(e);n!==null&&(Gv(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),Xv(t))}function FT(t,e,n){for(let r of n)r instanceof gf?(t.Ru.addReference(r.key,e),c2(t,r)):r instanceof mf?(B(Zv,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||eS(t,r.key)):W(19791,{wu:r})}function c2(t,e){let n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(B(Zv,"New document in limbo: "+n),t.Eu.add(r),Xv(t))}function Xv(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){let e=t.Eu.values().next().value;t.Eu.delete(e);let n=new G(Ne.fromString(e)),r=t.fu.next();t.Au.set(r,new Iv(n)),t.du=t.du.insert(n,r),$C(t.remoteStore,new Tc(Ln($v(n.path)),r,"TargetPurposeLimboResolution",Ov.ce))}}async function Mc(t,e,n){let r=X(t),i=[],o=[],s=[];r.Tu.isEmpty()||(r.Tu.forEach((c,u)=>{s.push(r.pu(u,e,n).then(l=>{if((l||n)&&r.isPrimaryClient){let f=l?!l.fromCache:n?.targetChanges.get(u.targetId)?.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);let f=Xy.As(u.targetId,l);o.push(f)}}))}),await Promise.all(s),r.Pu.H_(i),await(async function(u,l){let f=X(u);try{await f.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>O.forEach(l,m=>O.forEach(m.Es,y=>f.persistence.referenceDelegate.addReference(p,m.targetId,y)).next(()=>O.forEach(m.ds,y=>f.persistence.referenceDelegate.removeReference(p,m.targetId,y)))))}catch(p){if(!Is(p))throw p;B(qv,"Failed to update sequence numbers: "+p)}for(let p of l){let m=p.targetId;if(!p.fromCache){let y=f.Ms.get(m),A=y.snapshotVersion,x=y.withLastLimboFreeSnapshotVersion(A);f.Ms=f.Ms.insert(m,x)}}})(r.localStore,o))}async function u2(t,e){let n=X(t);if(!n.currentUser.isEqual(e)){B(Zv,"User change. New user:",e.toKey());let r=await BC(n.localStore,e);n.currentUser=e,(function(o,s){o.mu.forEach(c=>{c.forEach(u=>{u.reject(new U(N.CANCELLED,s))})}),o.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Mc(n,r.Ls)}}function l2(t,e){let n=X(t),r=n.Au.get(e);if(r&&r.hu)return ue().add(r.key);{let i=ue(),o=n.Iu.get(e);if(!o)return i;for(let s of o){let c=n.Tu.get(s);i=i.unionWith(c.view.nu)}return i}}function tS(t){let e=X(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=JC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=l2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=o2.bind(null,e),e.Pu.H_=JL.bind(null,e.eventManager),e.Pu.yu=ZL.bind(null,e.eventManager),e}function d2(t){let e=X(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=s2.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=a2.bind(null,e),e}var nS=(()=>{class t{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(n){this.serializer=Rf(n.databaseInfo.databaseId),this.sharedClientState=this.Du(n),this.persistence=this.Cu(n),await this.persistence.start(),this.localStore=this.vu(n),this.gcScheduler=this.Fu(n,this.localStore),this.indexBackfillerScheduler=this.Mu(n,this.localStore)}Fu(n,r){return null}Mu(n,r){return null}vu(n){return NL(this.persistence,new tv,n.initialUser,this.serializer)}Cu(n){return new of(Zy.mi,this.serializer)}Du(n){return new iv}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}return t.provider={build:()=>new t},t})(),Tv=class extends nS{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ie(this.persistence.referenceDelegate instanceof sf,46915);let r=this.persistence.referenceDelegate.garbageCollector;return new jy(r,e.asyncQueue,n)}Cu(e){let n=this.cacheSizeBytes!==void 0?nn.withCacheSize(this.cacheSizeBytes):nn.DEFAULT;return new of(r=>sf.mi(r,n),this.serializer)}};var f2=(()=>{class t{async initialize(n,r){this.localStore||(this.localStore=n.localStore,this.sharedClientState=n.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!n.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>kT(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=u2.bind(null,this.syncEngine),await YL(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(n){return(function(){return new vv})()}createDatastore(n){let r=Rf(n.databaseInfo.databaseId),i=(function(s){return new uv(s)})(n.databaseInfo);return(function(s,c,u,l){return new hv(s,c,u,l)})(n.authCredentials,n.appCheckCredentials,i,r)}createRemoteStore(n){return(function(i,o,s,c,u){return new gv(i,o,s,c,u)})(this.localStore,this.datastore,n.asyncQueue,r=>kT(this.syncEngine,r,0),(function(){return cf.v()?new cf:new ov})())}createSyncEngine(n,r){return(function(o,s,c,u,l,f,p){let m=new Dv(o,s,c,u,l,f);return p&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,n.initialUser,n.maxConcurrentLimboResolutions,r)}async terminate(){await(async function(r){let i=X(r);B(qi,"RemoteStore shutting down."),i.Ea.add(5),await xc(i),i.Aa.shutdown(),i.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}return t.provider={build:()=>new t},t})();var yf=class{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):or("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}};var Ur="FirestoreClient",Cv=class{constructor(e,n,r,i,o){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=st.UNAUTHENTICATED,this.clientId=_c.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,async s=>{B(Ur,"Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(B(Ur,"Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new vn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){let r=Yv(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}};async function Zm(t,e){t.asyncQueue.verifyOperationInProgress(),B(Ur,"Initializing OfflineComponentProvider");let n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await BC(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function LT(t,e){t.asyncQueue.verifyOperationInProgress();let n=await h2(t);B(Ur,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>NT(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>NT(e.remoteStore,i)),t._onlineComponents=e}async function h2(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){B(Ur,"Using user provided OfflineComponentProvider");try{await Zm(t,t._uninitializedComponentsProvider._offline)}catch(e){let n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===N.FAILED_PRECONDITION||i.code===N.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;is("Error using user provided cache. Falling back to memory cache: "+n),await Zm(t,new nS)}}else B(Ur,"Using default OfflineComponentProvider"),await Zm(t,new Tv(void 0));return t._offlineComponents}async function rS(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(B(Ur,"Using user provided OnlineComponentProvider"),await LT(t,t._uninitializedComponentsProvider._online)):(B(Ur,"Using default OnlineComponentProvider"),await LT(t,new f2))),t._onlineComponents}function p2(t){return rS(t).then(e=>e.syncEngine)}async function iS(t){let e=await rS(t),n=e.eventManager;return n.onListen=XL.bind(null,e.syncEngine),n.onUnlisten=n2.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=e2.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=r2.bind(null,e.syncEngine),n}function g2(t,e,n={}){let r=new vn;return t.asyncQueue.enqueueAndForget(async()=>(function(o,s,c,u,l){let f=new yf({next:m=>{f.Nu(),s.enqueueAndForget(()=>QC(o,p));let y=m.docs.has(c);!y&&m.fromCache?l.reject(new U(N.UNAVAILABLE,"Failed to get document because the client is offline.")):y&&m.fromCache&&u&&u.source==="server"?l.reject(new U(N.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new pf($v(c.path),f,{includeMetadataChanges:!0,qa:!0});return KC(o,p)})(await iS(t),t.asyncQueue,e,n,r)),r.promise}function m2(t,e,n={}){let r=new vn;return t.asyncQueue.enqueueAndForget(async()=>(function(o,s,c,u,l){let f=new yf({next:m=>{f.Nu(),s.enqueueAndForget(()=>QC(o,p)),m.fromCache&&u.source==="server"?l.reject(new U(N.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(m)},error:m=>l.reject(m)}),p=new pf(c,f,{includeMetadataChanges:!0,qa:!0});return KC(o,p)})(await iS(t),t.asyncQueue,e,n,r)),r.promise}function oS(t){let e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}var VT=new Map;var sS="firestore.googleapis.com",jT=!0,vf=class{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new U(N.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=sS,this.ssl=jT}else this.host=e.host,this.ssl=e.ssl??jT;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=jC;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<RL)throw new U(N.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}bF("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oS(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new U(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new U(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new U(N.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},vs=class{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new vf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new U(N.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new U(N.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new vf(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Xm;switch(r.type){case"firstParty":return new ry(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new U(N.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){let r=VT.get(n);r&&(B("ComponentProvider","Removing Datastore"),VT.delete(n),r.terminate())})(this),Promise.resolve()}};function y2(t,e,n,r={}){t=ss(t,vs);let i=td(e),o=t._getSettings(),s=De(j({},o),{emulatorOptions:t._getEmulatorOptions()}),c=`${e}:${n}`;i&&(ND(`https://${c}`),OD("Firestore",!0)),o.host!==sS&&o.host!==c&&is("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");let u=De(j({},o),{host:c,ssl:i,emulatorOptions:r});if(!Po(u,s)&&(t._setSettings(u),r.mockUserToken)){let l,f;if(typeof r.mockUserToken=="string")l=r.mockUserToken,f=st.MOCK_USER;else{l=PD(r.mockUserToken,t._app?.options.projectId);let p=r.mockUserToken.sub||r.mockUserToken.user_id;if(!p)throw new U(N.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new st(p)}t._authCredentials=new ey(new Hd(l,f))}}var _f=class t{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new t(this.firestore,e,this._query)}},xt=class t{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new kr(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new t(this.firestore,e,this._key)}toJSON(){return{type:t._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Rc(n,t._jsonSchema))return new t(e,r||null,new G(Ne.fromString(n.referencePath)))}};xt._jsonSchemaVersion="firestore/documentReference/1.0",xt._jsonSchema={type:Ge("string",xt._jsonSchemaVersion),referencePath:Ge("string")};var kr=class t extends _f{constructor(e,n,r){super(e,n,$v(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new xt(this.firestore,null,new G(e))}withConverter(e){return new t(this.firestore,e,this._path)}};function aS(t,e,...n){if(t=Oo(t),HT("collection","path",e),t instanceof vs){let r=Ne.fromString(e,...n);return oT(r),new kr(t,null,r)}{if(!(t instanceof xt||t instanceof kr))throw new U(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ne.fromString(e,...n));return oT(r),new kr(t.firestore,null,r)}}function e_(t,e,...n){if(t=Oo(t),arguments.length===1&&(e=_c.newId()),HT("doc","path",e),t instanceof vs){let r=Ne.fromString(e,...n);return iT(r),new xt(t,null,new G(r))}{if(!(t instanceof xt||t instanceof kr))throw new U(N.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=t._path.child(Ne.fromString(e,...n));return iT(r),new xt(t.firestore,t instanceof kr?t.converter:null,new G(r))}}var BT="AsyncQueue",Ef=class{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new uf(this,"async_queue_retry"),this._c=()=>{let r=Jm();r&&B(BT,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;let n=Jm();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;let n=Jm();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});let n=new vn;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Is(e))throw e;B(BT,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){let n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,or("INTERNAL UNHANDLED ERROR: ",UT(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);let i=mv.createAndSchedule(this,e,n,r,o=>this.hc(o));return this.tc.push(i),i}uc(){this.nc&&W(47125,{Pc:UT(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(let n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(let n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){let n=this.tc.indexOf(e);this.tc.splice(n,1)}};function UT(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}var _s=class extends vs{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Ef,this._persistenceKey=i?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Ef(e),this._firestoreClient=void 0,await e}}};function cS(t,e){let n=typeof t=="object"?t:XD(),r=typeof t=="string"?t:e||Kd,i=YD(n,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=MD("firestore");o&&y2(i,...o)}return i}function t_(t){if(t._terminated)throw new U(N.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||v2(t),t._firestoreClient}function v2(t){let e=t._freezeSettings(),n=(function(i,o,s,c){return new cy(i,o,s,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,oS(c.experimentalLongPollingOptions),c.useFetchStreams,c.isUsingEmulator)})(t._databaseId,t._app?.options.appId||"",t._persistenceKey,e);t._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new Cv(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(i){let o=i?._online.build();return{_offline:i?._offline.build(o),_online:o}})(t._componentsProvider))}var Fr=class t{constructor(e){this._byteString=e}static fromBase64String(e){try{return new t(Et.fromBase64String(e))}catch(n){throw new U(N.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new t(Et.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:t._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Rc(e,t._jsonSchema))return t.fromBase64String(e.bytes)}};Fr._jsonSchemaVersion="firestore/bytes/1.0",Fr._jsonSchema={type:Ge("string",Fr._jsonSchemaVersion),bytes:Ge("string")};var Ac=class{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new U(N.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new qt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var wf=class{constructor(e){this._methodName=e}};var Lr=class t{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new U(N.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new U(N.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ce(this._lat,e._lat)||ce(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:t._jsonSchemaVersion}}static fromJSON(e){if(Rc(e,t._jsonSchema))return new t(e.latitude,e.longitude)}};Lr._jsonSchemaVersion="firestore/geoPoint/1.0",Lr._jsonSchema={type:Ge("string",Lr._jsonSchemaVersion),latitude:Ge("number"),longitude:Ge("number")};var Vr=class t{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0})(this._values,e._values)}toJSON(){return{type:t._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Rc(e,t._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new t(e.vectorValues);throw new U(N.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}};Vr._jsonSchemaVersion="firestore/vectorValue/1.0",Vr._jsonSchema={type:Ge("string",Vr._jsonSchemaVersion),vectorValues:Ge("object")};var _2=/^__.*__$/,Sv=class{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new lr(e,this.data,this.fieldMask,n,this.fieldTransforms):new zi(e,this.data,n,this.fieldTransforms)}};function uS(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw W(40011,{Ac:t})}}var Av=class t{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.Rc(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new t(j(j({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){let n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){let n=this.path?.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return If(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(uS(this.Ac)&&_2.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}},Rv=class{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Rf(e)}Cc(e,n,r,i=!1){return new Av({Ac:e,methodName:n,Dc:r,path:qt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function E2(t){let e=t._freezeSettings(),n=Rf(t._databaseId);return new Rv(t._databaseId,!!e.ignoreUndefinedProperties,n)}function w2(t,e,n,r,i,o={}){let s=t.Cc(o.merge||o.mergeFields?2:0,e,n,i);hS("Data must be an object, but it was:",s,r);let c=dS(r,s),u,l;if(o.merge)u=new kn(s.fieldMask),l=s.fieldTransforms;else if(o.mergeFields){let f=[];for(let p of o.mergeFields){let m=I2(e,p,n);if(!s.contains(m))throw new U(N.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);b2(f,m)||f.push(m)}u=new kn(f),l=s.fieldTransforms.filter(p=>u.covers(p.field))}else u=null,l=s.fieldTransforms;return new Sv(new yn(c),u,l)}function lS(t,e){if(fS(t=Oo(t)))return hS("Unsupported field value:",e,t),dS(t,e);if(t instanceof wf)return(function(r,i){if(!uS(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(r,i){let o=[],s=0;for(let c of r){let u=lS(c,i.wc(s));u==null&&(u={nullValue:"NULL_VALUE"}),o.push(u),s++}return{arrayValue:{values:o}}})(t,e)}return(function(r,i){if((r=Oo(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return nL(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=We.fromDate(r);return{timestampValue:nf(i.serializer,o)}}if(r instanceof We){let o=new We(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:nf(i.serializer,o)}}if(r instanceof Lr)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Fr)return{bytesValue:NC(i.serializer,r._byteString)};if(r instanceof xt){let o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.Sc(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:zv(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Vr)return(function(s,c){return{mapValue:{fields:{[Lv]:{stringValue:Vv},[as]:{arrayValue:{values:s.toArray().map(l=>{if(typeof l!="number")throw c.Sc("VectorValues must only contain numeric values.");return Hv(c.serializer,l)})}}}}}})(r,i);throw i.Sc(`Unsupported field value: ${Pv(r)}`)})(t,e)}function dS(t,e){let n={};return oC(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Gi(t,(r,i)=>{let o=lS(i,e.mc(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function fS(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof We||t instanceof Lr||t instanceof Fr||t instanceof xt||t instanceof wf||t instanceof Vr)}function hS(t,e,n){if(!fS(n)||!zT(n)){let r=Pv(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function I2(t,e,n){if((e=Oo(e))instanceof Ac)return e._internalPath;if(typeof e=="string")return pS(t,e);throw If("Field path arguments must be of type string or ",t,!1,void 0,n)}var D2=new RegExp("[~\\*/\\[\\]]");function pS(t,e,n){if(e.search(D2)>=0)throw If(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Ac(...e.split("."))._internalPath}catch{throw If(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function If(t,e,n,r,i){let o=r&&!r.isEmpty(),s=i!==void 0,c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let u="";return(o||s)&&(u+=" (found",o&&(u+=` in field ${r}`),s&&(u+=` in document ${i}`),u+=")"),new U(N.INVALID_ARGUMENT,c+t+u)}function b2(t,e){return t.some(n=>n.isEqual(e))}var Df=class{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){let e=new xv(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){let n=this._document.data.field(gS("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}},xv=class extends Df{data(){return super.data()}};function gS(t,e){return typeof e=="string"?pS(t,e):e instanceof Ac?e._internalPath:e._delegate._internalPath}function T2(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new U(N.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Mv=class{convertValue(e,n="none"){switch(jr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return xe(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ar(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw W(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){let r={};return Gi(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertVectorValue(e){let n=e.fields?.[as].arrayValue?.values?.map(r=>xe(r.doubleValue));return new Vr(n)}convertGeoPoint(e){return new Lr(xe(e.latitude),xe(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":let r=Cf(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ic(e));default:return null}}convertTimestamp(e){let n=sr(e);return new We(n.seconds,n.nanos)}convertDocumentKey(e,n){let r=Ne.fromString(e);Ie(VC(r),9688,{name:e});let i=new Qd(r.get(1),r.get(3)),o=new G(r.popFirst(5));return i.isEqual(n)||or(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}};function C2(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}var Li=class{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}},ji=class t extends Df{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){let n=new ns(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){let r=this._document.data.field(gS("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new U(N.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e=this._document,n={};return n.type=t._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}};ji._jsonSchemaVersion="firestore/documentSnapshot/1.0",ji._jsonSchema={type:Ge("string",ji._jsonSchemaVersion),bundleSource:Ge("string","DocumentSnapshot"),bundleName:Ge("string"),bundle:Ge("string")};var ns=class extends ji{data(e={}){return super.data(e)}},rs=class t{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Li(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){let e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new ns(this._firestore,this._userDataWriter,r.key,r,new Li(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){let n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new U(N.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,o){if(i._snapshot.oldDocs.isEmpty()){let s=0;return i._snapshot.docChanges.map(c=>{let u=new ns(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Li(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:u,oldIndex:-1,newIndex:s++}})}{let s=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(c=>o||c.type!==3).map(c=>{let u=new ns(i._firestore,i._userDataWriter,c.doc.key,c.doc,new Li(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter),l=-1,f=-1;return c.type!==0&&(l=s.indexOf(c.doc.key),s=s.delete(c.doc.key)),c.type!==1&&(s=s.add(c.doc),f=s.indexOf(c.doc.key)),{type:S2(c.type),doc:u,oldIndex:l,newIndex:f}})}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new U(N.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");let e={};e.type=t._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=_c.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;let n=[],r=[],i=[];return this.docs.forEach(o=>{o._document!==null&&(n.push(o._document),r.push(this._userDataWriter.convertObjectMap(o._document.data.value.mapValue.fields,"previous")),i.push(o.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}};function S2(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return W(61501,{type:t})}}function mS(t){t=ss(t,xt);let e=ss(t.firestore,_s);return g2(t_(e),t._key).then(n=>R2(e,t,n))}rs._jsonSchemaVersion="firestore/querySnapshot/1.0",rs._jsonSchema={type:Ge("string",rs._jsonSchemaVersion),bundleSource:Ge("string","QuerySnapshot"),bundleName:Ge("string"),bundle:Ge("string")};var bf=class extends Mv{constructor(e){super(),this.firestore=e}convertBytes(e){return new Fr(e)}convertReference(e){let n=this.convertDocumentKey(e,this.firestore._databaseId);return new xt(this.firestore,null,n)}};function yS(t){t=ss(t,_f);let e=ss(t.firestore,_s),n=t_(e),r=new bf(e);return T2(t._query),m2(n,t._query).then(i=>new rs(e,r,t,i))}function vS(t,e){let n=ss(t.firestore,_s),r=e_(t),i=C2(t.converter,e);return A2(n,[w2(E2(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Vi.exists(!1))]).then(()=>r)}function A2(t,e){return(function(r,i){let o=new vn;return r.asyncQueue.enqueueAndForget(async()=>i2(await p2(r),i,o)),o.promise})(t_(t),e)}function R2(t,e,n){let r=n.docs.get(e._key),i=new bf(t);return new ji(t,i,e._key,r,new Li(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Es=i})(ZD),Ga(new er("firestore",(r,{instanceIdentifier:i,options:o})=>{let s=r.getProvider("app").getImmediate(),c=new _s(new ty(r.getProvider("auth-internal")),new iy(s,r.getProvider("app-check-internal")),(function(l,f){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new U(N.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qd(l.options.projectId,f)})(s,i),s);return o=j({useFetchStreams:n},o),c._setSettings(o),c},"PUBLIC").setMultipleInstances(!0)),Mr(tT,nT,e),Mr(tT,nT,"esm2020")})();var bs=class{id;name;description;category;color;prices;rating;constructor(e="",n="",r="",i="",o="Gris",s=[new Nc],c=5){this.id=e,this.name=n,this.description=r,this.category=i,this.color=o,this.prices=s,this.rating=c}getCurrentPrice(){return this.prices.reduce((e,n)=>n.date>e.date?n:e).amount}getPreviousPrice(){return this.prices.length<2?null:[...this.prices].sort((n,r)=>r.date.getTime()-n.date.getTime())[1].amount}getStarts(){return Array.from({length:5})}getFilledStarts(){return Math.min(this.rating??0,5)}},Nc=class{amount;date;constructor(e=1,n=new Date){this.amount=e,this.date=n}};var Ts=class t{productRepository=new r_;getProducts(){return this.productRepository.findAll()}getProduct(e){return this.productRepository.find(e)}saveProduct(e){return this.productRepository.create(e)}static \u0275fac=function(n){return new(n||t)};static \u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"})};function Ki(t,e=24){return atob(t).split("").map(n=>String.fromCharCode(n.charCodeAt(0)^e)).join("")}var n_=class{db=cS();get collectionRef(){return aS(this.db,this.collectionName)}find(e){let n=e_(this.db,this.collectionName,e);return this.build(n)}findAll(){return Oe(yS(this.collectionRef)).pipe(tt(e=>Ch(e.docs.map(n=>this.build(n.ref)))))}create(e){let n=this.debuild(e);return Oe(vS(this.collectionRef,n)).pipe(tt(r=>this.build(r)))}},r_=class extends n_{collectionName="products";build(e){return Oe(mS(e).then(n=>{if(!n.exists())return new bs;let r=n.data();if(!r)return new bs;let i=n.id,o=r.name,s=r.description,c=r.category,u=r.color,l=this.toPrices(r.prices),f=r.rating;return new bs(i,o,s,c,u,l,f)}))}debuild(e){return{name:e.name,description:e.description,category:e.category,color:e.color,prices:this.fromPrices(e.prices),rating:e.rating}}toPrices(e){return e?e?.map(n=>this.toPrice(n)):[]}toPrice(e){return new Nc(e?.amount,new Date(e?.date.seconds*1e3+e?.date.nanoseconds/1e6))}fromPrices(e){return e.map(n=>this.fromPrice(n))}fromPrice(e){return{amount:e.amount,date:e.date}}};function x2(t,e){if(t&1&&(rt(0,"div",1)(1,"span"),F(2,"Se ha producido un error:"),it(),rt(3,"pre",2)(4,"strong"),F(5),it()()()),t&2){let n=ie();Ti(n.alertClass),L(5),He(n.getErrorMessage())}}var Cs=class t{error=null;alertClass="";getErrorMessage(){return this.error?typeof this.error=="string"?this.error:JSON.stringify(this.error,null,2):""}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-error-alert"]],inputs:{error:"error",alertClass:"alertClass"},decls:1,vars:1,consts:[["role","alert",1,"alert","alert-danger","fade","show",3,"class"],["role","alert",1,"alert","alert-danger","fade","show"],[1,"mt-2","mb-0","pb-2"]],template:function(n,r){n&1&&dt(0,x2,6,3,"div",0),n&2&&ft(r.error?0:-1)},encapsulation:2})};var Pc=class{value;count;constructor(e,n){this.value=e,this.count=n}};var M2=()=>[5,4,3,2,1],N2=()=>[1,2,3,4,5],_S=(t,e)=>e.value,P2=(t,e)=>e.id;function O2(t,e){if(t&1&&Q(0,"app-spinner",3),t&2){let n=ie();me("size",n.SpinnerSize.LG)}}function k2(t,e){if(t&1){let n=Sr();R(0,"div",10)(1,"input",38),ht("change",function(){let i=Ct(n).$implicit,o=ie(2);return St(o.toggleCategory(i.value))}),M(),R(2,"label",39),F(3),R(4,"span",13),F(5),M()()()}if(t&2){let n=e.$implicit,r=ie(2);L(),me("id","category-"+n.value)("checked",r.selectedCategories.has(n.value)),L(),me("for","category-"+n.value),L(),Te(" ",n.value," "),L(2),Te("(",n.count,")")}}function F2(t,e){if(t&1){let n=Sr();R(0,"div",10)(1,"input",38),ht("change",function(){let i=Ct(n).$implicit,o=ie(2);return St(o.toggleColor(i.value))}),M(),R(2,"label",39),F(3),R(4,"span",13),F(5),M()()()}if(t&2){let n=e.$implicit,r=ie(2);L(),me("id","color-"+n.value)("checked",r.selectedColors.has(n.value)),L(),me("for","color-"+n.value),L(),Te(" ",n.value," "),L(2),Te("(",n.count,")")}}function L2(t,e){if(t&1&&Q(0,"i",49),t&2){let n=e.$implicit,r=ie().$implicit;vt("bi-star-fill",n<=r+1)("bi-star",n>=r+1)}}function V2(t,e){if(t&1){let n=Sr();R(0,"div",23)(1,"label",40)(2,"input",41),ht("change",function(){let i=Ct(n).$implicit,o=ie(2);return St(o.selectRating(i.toString()))}),M(),R(3,"div",42)(4,"div",43),Q(5,"div",44),M()(),R(6,"div",45),Je(7,L2,1,4,"i",46,Fl),M(),R(9,"div",47)(10,"span",48),F(11),M()()()()}if(t&2){let n=e.$implicit,r=ie(2);L(),vt("mb-1",n!=1)("mb-0",n==1),L(),me("checked",r.selectedRating==n.toString()),L(3),Ao("width",r.numProductsByRating[n]/r.totalProducts*100+"%"),L(2),Ze(Vl(8,N2)),L(4),Te("(",r.numProductsByRating[n],")")}}function j2(t,e){if(t&1&&(R(0,"span",28),F(1),M(),R(2,"span",27),F(3," de"),M()),t&2){let n=ie(2);L(),Ll(" ",n.startIndex," - ",n.endIndex)}}function B2(t,e){if(t&1&&Q(0,"app-list-product",36),t&2){let n=e.$implicit;me("product",n)}}function U2(t,e){if(t&1){let n=Sr();R(0,"li",51)(1,"a",57),ht("click",function(){let i=Ct(n).$implicit,o=ie(3);return St(o.goToPage(i))}),F(2),M()()}if(t&2){let n=e.$implicit,r=ie(3);vt("active",r.currentPage$.value===n),L(2),He(n)}}function $2(t,e){if(t&1){let n=Sr();R(0,"nav",37)(1,"ul",50)(2,"li",51)(3,"a",52),ht("click",function(){Ct(n);let i=ie(2);return St(i.prevPage())}),R(4,"span",53),F(5,"\xAB"),M()()(),Je(6,U2,3,3,"li",54,Yn),R(8,"li",55)(9,"a",56),ht("click",function(){Ct(n);let i=ie(2);return St(i.nextPage())}),R(10,"span",53),F(11,"\xBB"),M()()()()()}if(t&2){let n=ie(2);L(2),vt("disabled",n.currentPage$.value===1),L(4),Ze(n.getPages()),L(2),vt("disabled",n.currentPage$.value===n.totalPages)}}function H2(t,e){if(t&1){let n=Sr();R(0,"aside",5)(1,"div",6)(2,"div",7)(3,"div",8)(4,"h5",9),F(5,"Precio"),M(),R(6,"div",10)(7,"input",11),ht("change",function(){Ct(n);let i=ie();return St(i.togglePrice("0-9"))}),M(),R(8,"label",12),F(9," 0\u20AC - 9\u20AC "),R(10,"span",13),F(11),M()()(),R(12,"div",10)(13,"input",14),ht("change",function(){Ct(n);let i=ie();return St(i.togglePrice("10-19"))}),M(),R(14,"label",15),F(15," 10\u20AC - 19\u20AC "),R(16,"span",13),F(17),M()()(),R(18,"div",10)(19,"input",16),ht("change",function(){Ct(n);let i=ie();return St(i.togglePrice("20-49"))}),M(),R(20,"label",17),F(21," 20\u20AC - 49\u20AC "),R(22,"span",13),F(23),M()()(),R(24,"div",10)(25,"input",18),ht("change",function(){Ct(n);let i=ie();return St(i.togglePrice("50-99"))}),M(),R(26,"label",19),F(27," 50\u20AC - 99\u20AC "),R(28,"span",13),F(29),M()()(),R(30,"div",20)(31,"input",21),ht("change",function(){Ct(n);let i=ie();return St(i.togglePrice("100-10000000"))}),M(),R(32,"label",22),F(33," 100\u20AC + "),R(34,"span",13),F(35),M()()()()(),R(36,"div",7)(37,"div",8)(38,"h5",9),F(39,"Categor\xEDa"),M(),Je(40,k2,6,5,"div",10,_S),M()(),R(42,"div",7)(43,"div",8)(44,"h5",9),F(45,"Color"),M(),Je(46,F2,6,5,"div",10,_S),M()(),R(48,"div",7)(49,"div",8)(50,"h5",9),F(51,"Puntuaci\xF3n"),M(),Je(52,V2,12,9,"div",23,Fl),M()()()(),R(54,"div",24)(55,"div",25)(56,"div",26)(57,"span",27),F(58,"Mostrando"),M(),dt(59,j2,4,2),R(60,"span",28),F(61),M(),R(62,"span",27),F(63," resultados"),M()(),R(64,"div",29)(65,"label",30),F(66,"Ordenar por:"),M(),R(67,"select",31),ht("change",function(i){Ct(n);let o=ie();return St(o.changeOrder(i.target.value))}),R(68,"option",32),F(69,"Mejor puntuaci\xF3n"),M(),R(70,"option",33),F(71,"Precio: Menor a mayor"),M(),R(72,"option",34),F(73,"Precio: Mayor a menor"),M()()()(),Q(74,"hr"),R(75,"div",35),Je(76,B2,1,1,"app-list-product",36,P2),pt(78,"async"),M(),dt(79,$2,12,4,"nav",37),M()}if(t&2){let n=ie();L(7),me("checked",n.selectedPrices.has("0-9")),L(4),Te("(",n.numProductsByPrice["0-9"],")"),L(2),me("checked",n.selectedPrices.has("10-19")),L(4),Te("(",n.numProductsByPrice["10-19"],")"),L(2),me("checked",n.selectedPrices.has("20-49")),L(4),Te("(",n.numProductsByPrice["20-49"],")"),L(2),me("checked",n.selectedPrices.has("50-99")),L(4),Te("(",n.numProductsByPrice["50-99"],")"),L(2),me("checked",n.selectedPrices.has("100-10000000")),L(4),Te("(",n.numProductsByPrice["100+"],")"),L(5),Ze(n.categories),L(6),Ze(n.colors),L(6),Ze(Vl(15,M2)),L(7),ft(n.numProducts>0?59:-1),L(2),Te(" ",n.numProducts),L(15),Ze(gt(78,13,n.pagedProducts)),L(3),ft(n.numProducts>0?79:-1)}}var Nf=class t{SpinnerSize=fc;breadcrumb=[{text:"Inicio",link:"/"},{text:"Cat\xE1logo"}];cdr=P(Jn);firebaseService=P(Ts);products;pagedProducts;loadError;pageSize=4;currentPage$=new Qe(1);totalPages=1;totalProducts=0;numProducts=0;numProductsByPrice={};numProductsByRating={};categories=[];colors=[];selectedOrder="rating";selectedPrices=new Set;selectedCategories=new Set;selectedColors=new Set;selectedRating;constructor(){this.products=this.firebaseService.getProducts(),this.products.pipe(sn(()=>this.cdr.detectChanges())).subscribe({next:e=>{this.totalProducts=e.length,this.numProductsByPrice=this.getNumProductsByPrice(e),this.numProductsByRating=this.getNumProductsByRating(e),this.categories=this.getCategories(e),this.colors=this.getColors(e)},error:e=>this.loadError=e}),this.pagedProducts=Ws([this.products,this.currentPage$]).pipe(fe(([e,n])=>{let r=e;switch(this.selectedCategories.size>0&&(r=r.filter(s=>this.selectedCategories.has(s.category||""))),this.selectedColors.size>0&&(r=r.filter(s=>this.selectedColors.has(s.color||""))),this.selectedPrices.size>0&&(r=r.filter(s=>{let c=s.getCurrentPrice();for(let u of this.selectedPrices){let[l,f]=u.split("-"),p=parseFloat(l),m=parseFloat(f);if(c>=p&&c<=m)return!0}return!1})),this.selectedRating&&(r=r.filter(s=>this.selectedRating==s.rating.toString())),this.selectedOrder){case"rating":r.sort((s,c)=>(c.rating||0)-(s.rating||0));break;case"min-price":r.sort((s,c)=>(s.getCurrentPrice()||0)-(c.getCurrentPrice()||0));break;case"max-price":r.sort((s,c)=>(c.getCurrentPrice()||0)-(s.getCurrentPrice()||0));break}this.numProducts=r.length,this.totalPages=Math.ceil(r.length/this.pageSize);let i=(n-1)*this.pageSize,o=i+this.pageSize;return r.slice(i,o)}))}getPages(){return Array.from({length:this.totalPages},(e,n)=>n+1)}goToPage(e){e<1||e>this.totalPages||this.currentPage$.next(e)}nextPage(){this.currentPage$.next(Math.min(this.currentPage$.value+1,this.totalPages))}prevPage(){this.currentPage$.next(Math.max(this.currentPage$.value-1,1))}get startIndex(){return this.numProducts===0?0:(this.currentPage$.value-1)*this.pageSize+1}get endIndex(){return Math.min(this.currentPage$.value*this.pageSize,this.numProducts)}changeOrder(e){this.selectedOrder=e,this.currentPage$.next(1)}togglePrice(e){this.selectedPrices.has(e)?this.selectedPrices.delete(e):this.selectedPrices.add(e),this.currentPage$.next(1),this.cdr.detectChanges()}toggleCategory(e){this.selectedCategories.has(e)?this.selectedCategories.delete(e):this.selectedCategories.add(e),this.currentPage$.next(1),this.cdr.detectChanges()}toggleColor(e){this.selectedColors.has(e)?this.selectedColors.delete(e):this.selectedColors.add(e),this.currentPage$.next(1),this.cdr.detectChanges()}selectRating(e){this.selectedRating=e,this.currentPage$.next(1),this.cdr.detectChanges()}getNumProductsByPrice(e){return{"0-9":e.filter(n=>n.getCurrentPrice()<10).length,"10-19":e.filter(n=>n.getCurrentPrice()>=10&&n.getCurrentPrice()<20).length,"20-49":e.filter(n=>n.getCurrentPrice()>=20&&n.getCurrentPrice()<50).length,"50-99":e.filter(n=>n.getCurrentPrice()>=50&&n.getCurrentPrice()<100).length,"100+":e.filter(n=>n.getCurrentPrice()>=100).length}}getNumProductsByRating(e){return{1:e.filter(n=>n.rating===1).length,2:e.filter(n=>n.rating===2).length,3:e.filter(n=>n.rating===3).length,4:e.filter(n=>n.rating===4).length,5:e.filter(n=>n.rating===5).length}}getCategories(e){let n={};return e.filter(r=>!!r.category).forEach(r=>n[r.category]=(n[r.category]||0)+1),Object.entries(n).map(([r,i])=>new Pc(r,i))}getColors(e){let n={};return e.filter(r=>!!r.color).forEach(r=>n[r.color]=(n[r.color]||0)+1),Object.entries(n).map(([r,i])=>new Pc(r,i))}static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-catalog"]],decls:7,vars:6,consts:[[3,"paths"],[1,"container","my-4"],[1,"row","px-0","my-5"],[3,"size"],[3,"error","alertClass"],[1,"col-12","col-md-3","ps-0"],[1,"mb-4"],[1,"card","mb-3"],[1,"card-body"],[1,"card-title","section-title"],[1,"form-check","mb-2"],["type","checkbox","id","price1",1,"form-check-input",3,"change","checked"],["for","price1",1,"form-check-label"],[1,"text-muted","fs-7","ms-1"],["type","checkbox","id","price2",1,"form-check-input",3,"change","checked"],["for","price2",1,"form-check-label"],["type","checkbox","id","price3",1,"form-check-input",3,"change","checked"],["for","price3",1,"form-check-label"],["type","checkbox","id","price4",1,"form-check-input",3,"change","checked"],["for","price4",1,"form-check-label"],[1,"form-check","mb-0"],["type","checkbox","id","price5",1,"form-check-input",3,"change","checked"],["for","price5",1,"form-check-label"],[1,"vstack"],[1,"col-12","col-md-9","ps-4","pe-0"],[1,"row","align-items-center","mb-3"],[1,"col-6"],[1,"text-muted"],[1,"text-primary"],[1,"col-6","text-end"],["for","order",1,"form-check-label","text-muted","me-2"],["id","order",1,"form-select","d-inline-block","w-auto",3,"change"],["value","rating","selected",""],["value","min-price"],["value","max-price"],[1,"list-group"],[3,"product"],[1,"mt-5"],["type","checkbox",1,"form-check-input",3,"change","id","checked"],[1,"form-check-label",3,"for"],[1,"d-flex","align-items-center","gap-2"],["type","radio","name","rating",1,"form-check-input","mt-0",3,"change","checked"],[1,"flex-grow-1"],[1,"progress",2,"height","10px"],[1,"progress-bar"],[1,"text-warning"],[1,"bi",3,"bi-star-fill","bi-star"],[1,"text-end",2,"min-width","30px"],[1,"text-muted","fs-7"],[1,"bi"],[1,"pagination","justify-content-center","mb-0"],[1,"page-item","me-2"],["aria-label","Previous",1,"page-link","bg-light","border-0","rounded-1",3,"click"],["aria-hidden","true"],[1,"page-item","me-2",3,"active"],[1,"page-item"],["aria-label","Next",1,"page-link","bg-light","border-0","rounded-1",3,"click"],[1,"page-link","bg-light","border-0","rounded-1",3,"click"]],template:function(n,r){n&1&&(Q(0,"app-breadcrumb",0),R(1,"section",1)(2,"div",2),dt(3,O2,1,1,"app-spinner",3),pt(4,"async"),Cr(5,H2,80,16),Q(6,"app-error-alert",4),M()()),n&2&&(me("paths",r.breadcrumb),L(3),ft(gt(4,4,r.products)?5:3),L(3),me("error",r.loadError)("alertClass","mb-0 mt-4"))},dependencies:[Ko,Od,Cs,Wo,ka],encapsulation:2})};function z2(t,e){if(t&1&&Q(0,"div",12),t&2){let n=e.$index,r=ie();vt("bi-star-fill",n<r.product.getFilledStarts())("bi-star",n>=r.product.getFilledStarts())}}function q2(t,e){if(t&1&&(R(0,"span",8),F(1),M()),t&2){let n=ie();L(),Te(" ",n.product.getPreviousPrice(),"\u20AC ")}}var Pf=class t{product;class;static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-related-product"]],inputs:{product:"product",class:"class"},decls:19,vars:6,consts:[[1,"card","h-100"],["src","https://dummyimage.com/450x300/dee2e6/6c757d.jpg","alt","...",1,"card-img-top"],[1,"card-body","p-4"],[1,"text-center"],[1,"fw-bolder"],[1,"d-flex","justify-content-center","small","text-warning","mb-2"],[1,"bi",3,"bi-star-fill","bi-star"],[1,"fs-5","text-primary"],[1,"fs-6","text-muted","text-decoration-line-through","ms-1"],[1,"card-footer","p-4","pt-0","border-top-0","bg-transparent"],[1,"btn","btn-primary","mt-auto",3,"routerLink"],[1,"bi","bi-eye","me-2"],[1,"bi"]],template:function(n,r){n&1&&(R(0,"div")(1,"div",0),Q(2,"img",1),R(3,"div",2)(4,"div",3)(5,"h5",4),F(6),M(),R(7,"div",5),Je(8,z2,1,4,"div",6,Yn),M(),R(10,"span",7),F(11),M(),dt(12,q2,2,1,"span",8),M()(),R(13,"div",9)(14,"div",3)(15,"a",10),Q(16,"i",11),R(17,"span"),F(18,"Ver detalle"),M()()()()()()),n&2&&(Ti(r.class),L(6),He(r.product.name),L(2),Ze(r.product.getStarts()),L(3),Te(" ",r.product.getCurrentPrice(),"\u20AC "),L(),ft(r.product.getPreviousPrice()?12:-1),L(3),me("routerLink","/product/"+r.product.id))},dependencies:[tn],encapsulation:2})};var G2=(t,e)=>e.id;function W2(t,e){if(t&1&&Q(0,"app-spinner",3),t&2){let n=ie();me("size",n.SpinnerSize.LG)}}function K2(t,e){if(t&1&&(R(0,"span",14),F(1),pt(2,"async"),M()),t&2){let n,r=ie(2);L(),Te(" ",(n=gt(2,1,r.product))==null?null:n.getPreviousPrice(),"\u20AC ")}}function Q2(t,e){if(t&1&&(Q(0,"div",22),pt(1,"async"),pt(2,"async")),t&2){let n,r,i=e.$index,o=ie(2);vt("bi-star-fill",i<(((n=gt(1,4,o.product))==null?null:n.getFilledStarts())??0))("bi-star",i>=(((r=gt(2,6,o.product))==null?null:r.getFilledStarts())??0))}}function Y2(t,e){if(t&1&&(R(0,"div",9),Q(1,"img",10),M(),R(2,"div",9)(3,"div",11),F(4),pt(5,"async"),M(),R(6,"h1",12),F(7),pt(8,"async"),M(),R(9,"div")(10,"span",13),F(11),pt(12,"async"),M(),dt(13,K2,3,3,"span",14),pt(14,"async"),M(),R(15,"div",15),Je(16,Q2,3,8,"div",16,Yn),pt(18,"async"),M(),R(19,"p",17),F(20),pt(21,"async"),M(),R(22,"div",18),Q(23,"input",19),R(24,"button",20),Q(25,"i",21),F(26," A\xF1adir al carrito "),M()()()),t&2){let n,r,i,o,s,c,u=ie();L(4),He((n=gt(5,5,u.product))==null?null:n.category),L(3),He((r=gt(8,7,u.product))==null?null:r.name),L(4),Te(" ",(i=gt(12,9,u.product))==null?null:i.getCurrentPrice(),"\u20AC "),L(2),ft((o=gt(14,11,u.product))!=null&&o.getPreviousPrice()?13:-1),L(3),Ze((s=gt(18,13,u.product))==null?null:s.getStarts()),L(4),He((c=gt(21,15,u.product))==null?null:c.description)}}function J2(t,e){if(t&1&&Q(0,"app-spinner",3),t&2){let n=ie();me("size",n.SpinnerSize.LG)}}function Z2(t,e){if(t&1&&Q(0,"app-related-product",24),t&2){let n=e.$implicit;Ti("col mb-5"),me("product",n)}}function X2(t,e){if(t&1&&(R(0,"div",8),Je(1,Z2,1,3,"app-related-product",23,G2),pt(3,"async"),M()),t&2){let n=ie();L(),Ze(gt(3,0,n.relatedProducts))}}var Of=class t{constructor(e){this.route=e;this.route.paramMap.subscribe({next:n=>this.loadProduct(n.get("id"))})}SpinnerSize=fc;breadcrumb=[{text:"Inicio",link:"/"},{text:"Cat\xE1logo",link:"/catalog"},{text:"Producto"}];cdr=P(Jn);firebaseService=P(Ts);product;loadError;relatedProducts;loadRelatedProductsError;loadProduct(e){this.product=this.firebaseService.getProduct(e),this.loadError=null,this.product.pipe(sn(()=>this.cdr.detectChanges())).subscribe({next:n=>this.loadRelated(n),error:n=>this.loadError=n})}loadRelated(e){this.relatedProducts=this.firebaseService.getProducts().pipe(fe(n=>n.filter(r=>r.id!==e.id&&r.category===e.category).sort((r,i)=>i.getCurrentPrice()-r.getCurrentPrice()).slice(0,4))),this.relatedProducts.pipe(sn(()=>this.cdr.detectChanges())).subscribe({error:n=>this.loadRelatedProductsError=n})}static \u0275fac=function(n){return new(n||t)($t(mn))};static \u0275cmp=Se({type:t,selectors:[["app-product"]],decls:16,vars:11,consts:[[3,"paths"],[1,"container","px-0","my-5"],[1,"row","gx-4","gx-lg-5","align-items-center",2,"min-height","500px"],[3,"size"],[3,"error","alertClass"],[1,"pt-5","bg-light",2,"min-height","300px"],[1,"container","px-0"],[1,"fw-bolder","mb-4"],[1,"row","gx-4","gx-lg-5","row-cols-2","row-cols-md-3","row-cols-xl-4","justify-content-center"],[1,"col-md-6"],["src","https://dummyimage.com/600x700/dee2e6/6c757d.jpg","alt","...",1,"card-img-top","mb-5","mb-md-0"],[1,"small","mb-1"],[1,"display-5","fw-bolder"],[1,"fs-5","text-primary"],[1,"fs-6","text-muted","text-decoration-line-through","ms-2"],[1,"d-flex","text-warning","mt-2"],[1,"bi",3,"bi-star-fill","bi-star"],[1,"lead","mt-5"],[1,"d-flex"],["id","inputQuantity","type","num","value","1",1,"form-control","text-center","me-3",2,"max-width","3rem"],["type","button",1,"btn","btn-primary","flex-shrink-0"],[1,"bi-cart-fill","me-1"],[1,"bi"],[3,"product","class"],[3,"product"]],template:function(n,r){n&1&&(Q(0,"app-breadcrumb",0),R(1,"section")(2,"div",1)(3,"div",2),dt(4,W2,1,1,"app-spinner",3),pt(5,"async"),Cr(6,Y2,27,17),Q(7,"app-error-alert",4),M()()(),R(8,"section",5)(9,"div",6)(10,"h2",7),F(11,"Productos relacionados"),M(),dt(12,J2,1,1,"app-spinner",3),pt(13,"async"),Cr(14,X2,4,2,"div",8),Q(15,"app-error-alert",4),M()()),n&2&&(me("paths",r.breadcrumb),L(4),ft(gt(5,7,r.product)?6:4),L(3),me("error",r.loadError)("alertClass","mb-0 mt-4"),L(5),ft(gt(13,9,r.relatedProducts)?14:12),L(3),me("error",r.loadRelatedProductsError)("alertClass","mb-0 mt-4"))},dependencies:[Ko,Pf,Cs,Wo,ka],encapsulation:2})};var ES=[{path:"",component:Pd,title:"JoyARt \xB7 Inicio"},{path:"catalog",component:Nf,title:"JoyARt \xB7 Cat\xE1logo"},{path:"product/:id",component:Of,title:"JoyARt \xB7 Producto"},{path:"**",redirectTo:""}];var wS={providers:[Np(),Xg(),Um(ES)]};var kf=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-header"]],decls:15,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-white","py-1"],[1,"container"],["routerLink","/",1,"navbar-brand"],["height","50","src","assets/images/logo-header.png","alt","JoyARt",1,"me-2"],[1,"fw-bolder","text-primary"],[1,"collapse","navbar-collapse"],[1,"navbar-nav","ms-auto","mb-2","mb-lg-0","small","fw-bolder"],[1,"nav-item"],["routerLink","/",1,"nav-link"],["routerLink","/catalog",1,"nav-link"]],template:function(n,r){n&1&&(R(0,"header")(1,"nav",0)(2,"div",1)(3,"a",2),Q(4,"img",3),R(5,"span",4),F(6,"JoyARt"),M()(),R(7,"div",5)(8,"ul",6)(9,"li",7)(10,"a",8),F(11,"Inicio"),M()(),R(12,"li",7)(13,"a",9),F(14,"Cat\xE1logo"),M()()()()()()())},dependencies:[tn],encapsulation:2})};var Ff=class t{static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-footer"]],decls:18,vars:0,consts:[[1,"bg-white","py-5"],[1,"container","px-5"],[1,"row","gx-5","justify-content-center"],[1,"col-xxl-8"],[1,"text-center","my-2"],[1,"display-5","fw-bolder"],[1,"text-gradient","d-inline"],[1,"lead","fw-light","mb-4"],[1,"text-muted"],[1,"d-flex","justify-content-center","fs-2","gap-4"],["target","_blank","href","https://github.com/alvaro-ortiz-fernandez/JoyARt",1,"text-gradient"],[1,"bi","bi-github"],[1,"col-auto"],[1,"small","text-muted","m-0"]],template:function(n,r){n&1&&(rt(0,"footer",0)(1,"section",1)(2,"article",2)(3,"div",3)(4,"div",4)(5,"h2",5)(6,"span",6),F(7,"JoyARt"),it()(),rt(8,"p",7),F(9,"Visualiza joyas artesanales en 3D y realidad aumentada"),it(),rt(10,"p",8),F(11,"JoyARt muestra piezas de joyer\xEDa artesanal con interacci\xF3n entre el modelo 3D y el entorno f\xEDsico del usuario."),it(),rt(12,"div",9)(13,"a",10),Co(14,"i",11),it()(),rt(15,"div",12)(16,"div",13),F(17,"\xA9 JoyARt GPL-3.0"),it()()()()()()())},encapsulation:2})};var Lf=class t{title=Qn("JoyARt",{});static \u0275fac=function(n){return new(n||t)};static \u0275cmp=Se({type:t,selectors:[["app-root"]],decls:5,vars:0,consts:[[1,"d-flex","flex-column","min-vh-100","bg-light"],[1,"flex-grow-1","container","px-4","py-5"]],template:function(n,r){n&1&&(R(0,"div",0),Q(1,"app-header"),R(2,"main",1),Q(3,"router-outlet"),M(),Q(4,"app-footer"),M())},dependencies:[cc,kf,Ff],encapsulation:2})};Kg(Lf,wS).catch(t=>console.error(t));vm({apiKey:Ki("WVFieUthWXVCaXp2YlZbfHkgNVRRYiFpKlxJbG5ISigsIUh3XEFv"),authDomain:Ki("cndheWpsNXstLS55Nn5xan16eWt9eWhoNnt3dQ=="),projectId:Ki("cndheWpsNXstLS55"),storageBucket:Ki("cndheWpsNXstLS55Nn5xan16eWt9a2x3anl/fTZ5aGg="),messagingSenderId:Ki("Ky0pLCEuKC4hLg=="),appId:Ki("KSIrLSksIS4oLiEuIm99eiJ6LyotKHkufC15Li8rKCB9LHsofnt8")});
